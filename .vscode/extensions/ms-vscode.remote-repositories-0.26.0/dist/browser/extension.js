var $l=Object.defineProperty;var o=(ho,Ba)=>$l(ho,"name",{value:Ba,configurable:!0});(()=>{var ho={326:(Rt,l,T)=>{"use strict";T.r(l),T.d(l,{AppInsightsCore:()=>se,BaseCore:()=>Z,BaseTelemetryPlugin:()=>Tt.i,CoreUtils:()=>X.Tr,DiagnosticLogger:()=>be.AQ,ESPromise:()=>We,ESPromiseScheduler:()=>Se,EventHelper:()=>$.zB,EventLatency:()=>U,EventPersistence:()=>Le,EventPropertyType:()=>J,EventsDiscardedReason:()=>$e.h,FullVersionString:()=>X.vs,InternalAppInsightsCore:()=>oe.F,InternalBaseCore:()=>Q.A,LoggingSeverity:()=>C.X,MinChannelPriorty:()=>Ee,NotificationManager:()=>qe.f,PerfEvent:()=>Ie.zn,PerfManager:()=>Ie.Jk,ProcessTelemetryContext:()=>it.Vi,TraceLevel:()=>ke,Undefined:()=>ce.jA,Utils:()=>X.cQ,ValueKind:()=>B,ValueSanitizer:()=>Re,Version:()=>X.Gf,_ExtendedInternalMessageId:()=>Pe,_InternalLogMessage:()=>be.lQ,_InternalMessageId:()=>C.v,__getRegisteredEvents:()=>pe.um,_logInternalMessage:()=>be.L4,_throwInternal:()=>be.kP,_warnToConsole:()=>be.jV,addEventHandler:()=>pe.Ib,addEventListeners:()=>pe.yw,addPageHideEventListener:()=>pe.TJ,addPageShowEventListener:()=>pe.nD,addPageUnloadEventListener:()=>pe.c9,areCookiesSupported:()=>Ge.p7,arrForEach:()=>M.tO,arrIndexOf:()=>M.UA,arrMap:()=>M.Mr,arrReduce:()=>M.Xz,attachEvent:()=>pe.pZ,cookieAvailable:()=>Ge.p7,createCookieMgr:()=>Ge.Nz,createEnumStyle:()=>S.By,createGuid:()=>X.cm,createProcessTelemetryContext:()=>it.CD,createTraceParent:()=>ge.SU,createUniqueNamespace:()=>at.J,createUnloadHandlerContainer:()=>ne.Y,dateNow:()=>M.m6,deleteCookie:()=>X.kT,detachEvent:()=>pe.pD,disableCookies:()=>X.oF,disallowsSameSiteNone:()=>Ge.UY,doPerf:()=>Ie.Lm,dumpObj:()=>he.eU,eventOff:()=>pe.QY,eventOn:()=>pe.XO,extend:()=>X.l7,findW3cTraceParent:()=>ge.lq,formatTraceParent:()=>ge.aR,generateW3CId:()=>$.DO,getCommonSchemaMetaData:()=>X.Vv,getConsole:()=>he.dr,getCookie:()=>X.ej,getCookieValue:()=>X.Do,getCrypto:()=>he.MX,getDocument:()=>he.Me,getExceptionName:()=>M.jj,getFieldValueType:()=>X.Sy,getGlobal:()=>Je.Rd,getGlobalInst:()=>he.a8,getHistory:()=>he.s1,getIEVersion:()=>he.sA,getISOString:()=>M.Y6,getJSON:()=>he.xA,getLocation:()=>he.k$,getMsCrypto:()=>he.gz,getNavigator:()=>he.jW,getPerformance:()=>he.r,getSetValue:()=>M.qK,getTenantId:()=>X.jM,getTime:()=>X.hK,getWindow:()=>he.Jj,hasDocument:()=>he.Nv,hasHistory:()=>he.fE,hasJSON:()=>he.nS,hasNavigator:()=>he.d6,hasOwnProperty:()=>M.nr,hasWindow:()=>he.Ym,isArray:()=>M.kJ,isArrayValid:()=>X.JT,isBeaconsSupported:()=>he.MF,isBoolean:()=>M.jn,isChromium:()=>X.mJ,isDate:()=>M.J_,isDocumentObjectAvailable:()=>X.x9,isError:()=>M.VZ,isFetchSupported:()=>he.JO,isFunction:()=>M.mf,isIE:()=>he.w1,isLatency:()=>X.r7,isNotTruthy:()=>M.F,isNullOrUndefined:()=>M.le,isNumber:()=>M.hj,isObject:()=>M.Kn,isReactNative:()=>he.b$,isSampledFlag:()=>ge.Pn,isString:()=>M.HD,isTruthy:()=>M.fQ,isTypeof:()=>M.Ym,isUint8ArrayAvailable:()=>X.IZ,isUndefined:()=>M.o8,isValidSpanId:()=>ge.Lc,isValidTraceId:()=>ge.jN,isValidTraceParent:()=>ge.J6,isValueAssigned:()=>X.Sn,isValueKind:()=>X.oS,isWindowObjectAvailable:()=>X.dH,isXhrSupported:()=>he.Z3,mergeEvtNamespace:()=>pe.jU,newGuid:()=>$.GW,newId:()=>Y.pZ,normalizeJsName:()=>M.Gf,objCreate:()=>Je.pu,objDefineAccessors:()=>M.l_,objForEachKey:()=>M.rW,objFreeze:()=>M.FL,objKeys:()=>M.FY,objSeal:()=>M.Xi,openXhr:()=>X.ot,optimizeObject:()=>M.Ax,parseTraceParent:()=>ge.j_,perfNow:()=>$.Jj,proxyAssign:()=>M.cf,proxyFunctionAs:()=>M.Oi,proxyFunctions:()=>M.Vb,random32:()=>Y._l,randomValue:()=>Y.az,removeEventHandler:()=>pe.C1,removeEventListeners:()=>pe.nJ,removePageHideEventListener:()=>pe.C9,removePageShowEventListener:()=>pe.Yl,removePageUnloadEventListener:()=>pe.JA,safeGetCookieMgr:()=>Ge.JP,safeGetLogger:()=>be.vH,sanitizeProperty:()=>X.yj,setCookie:()=>X.d8,setEnableEnvMocks:()=>he.dI,setProcessTelemetryTimings:()=>X.if,setValue:()=>M.sO,strContains:()=>M._Q,strEndsWith:()=>M.Id,strFunction:()=>ce.cb,strObject:()=>ce.fK,strPrototype:()=>ce.hB,strStartsWith:()=>M.xe,strTrim:()=>M.nd,strUndefined:()=>ce.jA,throwError:()=>M._y,toISOString:()=>M.Y6,useXDomainRequest:()=>he.cp});var R=T(88),S=T(873),M=T(708),C=T(310),B=(0,S.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),U=(0,S.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),J=(0,S.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Le=(0,S.By)({Normal:1,Critical:2}),ke=(0,S.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Pe=(0,M.FL)((0,R.uc)((0,R.uc)({},C.v),(0,S.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),F=T(679),be=T(18),Ie=T(288),he=T(630),oe=T(121),ze=T(984),X=T(599),Me=function(ee){(0,R.ne)(W,ee);function W(){var ye=ee.call(this)||this;return ye.pluginVersionStringArr=[],(0,F.Z)(W,ye,function(fe,vt){(!fe.logger||!fe.logger.queue)&&(fe.logger=new be.AQ({loggingLevelConsole:1})),fe.initialize=function(Ce,D,I,Ne){(0,Ie.Lm)(fe,function(){return"AppInsightsCore.initialize"},function(){var St=fe.pluginVersionStringArr;if(Ce){Ce.endpointUrl||(Ce.endpointUrl=ze.YT);var ht=Ce.propertyStorageOverride;ht&&(!ht.getProperty||!ht.setProperty)&&(0,M._y)("Invalid property storage override passed."),Ce.channels&&(0,M.tO)(Ce.channels,function(At){At&&(0,M.tO)(At,function(Ct){if(Ct.identifier&&Ct.version){var dn=Ct.identifier+"="+Ct.version;St.push(dn)}})})}fe.getWParam=function(){return typeof document!="undefined"||!!Ce.enableWParam?0:-1},D&&(0,M.tO)(D,function(At){if(At&&At.identifier&&At.version){var Ct=At.identifier+"="+At.version;St.push(Ct)}}),fe.pluginVersionString=St.join(";"),fe.pluginVersionStringArr=St;try{vt.initialize(Ce,D,I,Ne),fe.pollInternalLogs("InternalLog")}catch(At){var kt=fe.logger,st=(0,he.eU)(At);st.indexOf("channels")!==-1&&(st+=`
 - Channels must be provided through config.channels only!`),(0,be.kP)(kt,1,514,"SDK Initialization Failed - no telemetry will be sent: "+st)}},function(){return{config:Ce,extensions:D,logger:I,notificationManager:Ne}})},fe.track=function(Ce){(0,Ie.Lm)(fe,function(){return"AppInsightsCore.track"},function(){var D=Ce;if(D){D.timings=D.timings||{},D.timings.trackStart=(0,X.hK)(),(0,X.r7)(D.latency)||(D.latency=1);var I=D.ext=D.ext||{};I.sdk=I.sdk||{},I.sdk.ver=X.vs;var Ne=D.baseData=D.baseData||{};Ne[ze.o6]=Ne[ze.o6]||{};var St=Ne[ze.o6];St[ze.p8]=St[ze.p8]||fe.pluginVersionString||ze.qS}vt.track(D)},function(){return{item:Ce}},!Ce.sync)}}),ye}return o(W,"AppInsightsCore"),W.__ieDyn=1,W}(oe.F);const se=Me;var Q=T(900),z=function(ee){(0,R.ne)(W,ee);function W(){var ye=ee.call(this)||this;return(0,F.Z)(W,ye,function(fe,vt){fe.initialize=function(Ce,D,I,Ne){Ce&&!Ce.endpointUrl&&(Ce.endpointUrl=ze.YT),fe.getWParam=function(){return X.x9||!!Ce.enableWParam?0:-1};try{vt.initialize(Ce,D,I,Ne)}catch(St){(0,be.kP)(fe.logger,1,514,"Initialization Failed: "+(0,he.eU)(St)+`
 - Note: Channels must be provided through config.channels only`)}},fe.track=function(Ce){var D=Ce;if(D){var I=D.ext=D.ext||{};I.sdk=I.sdk||{},I.sdk.ver=X.vs}vt.track(D)}}),ye}return o(W,"BaseCore"),W.__ieDyn=1,W}(Q.A);const Z=z;var ae=M.mf;function Ke(ee,W,ye){return function(fe){ee[W]=fe,ye()}}o(Ke,"_createPromiseAllOnResolvedFunction");var Fe=function(){function ee(W){var ye=0,fe=null,vt=[];(0,F.Z)(ee,this,function(St){St.then=function(ht,kt){return new ee(function(st,At){Ce(ht,kt,st,At)})},St.catch=function(ht){return St.then(null,ht)}});function Ce(St,ht,kt,st){vt.push(function(){var At;try{ye===1?At=ae(St)?St(fe):fe:At=ae(ht)?ht(fe):fe,At instanceof ee?At.then(kt,st):ye===2&&!ae(ht)?st(At):kt(At)}catch(Ct){st(Ct);return}}),ye!==0&&D()}o(Ce,"_enqueue");function D(){if(vt.length>0){var St=vt.slice();vt=[],setTimeout(function(){for(var ht=0,kt=St.length;ht<kt;++ht)try{St[ht]()}catch(st){}},0)}}o(D,"_processQueue");function I(St){ye===0&&(fe=St,ye=1,D())}o(I,"_resolve");function Ne(St){ye===0&&(fe=St,ye=2,D())}o(Ne,"_reject"),o(function(){if(!ae(W))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{W(I,Ne)}catch(ht){Ne(ht)}},"_initialize")()}return o(ee,"ESPromise"),ee.resolve=function(W){return W instanceof ee?W:W&&ae(W.then)?new ee(function(ye,fe){try{W.then(ye,fe)}catch(vt){fe(vt)}}):new ee(function(ye){ye(W)})},ee.reject=function(W){return new ee(function(ye,fe){fe(W)})},ee.all=function(W){if(!(!W||!W.length))return new ee(function(ye,fe){try{for(var vt=[],Ce=0,D=0;D<W.length;D++){var I=W[D];I&&ae(I.then)?(Ce++,I.then(Ke(vt,D,function(){--Ce==0&&ye(vt)}),fe)):vt[D]=I}Ce===0&&setTimeout(function(){ye(vt)},0)}catch(Ne){fe(Ne)}})},ee.race=function(W){return new ee(function(ye,fe){if(!(!W||!W.length))try{for(var vt=o(function(D){var I=W[D];I&&ae(I.then)?I.then(ye,fe):setTimeout(function(){ye(I)},0)},"_loop_1"),Ce=0;Ce<W.length;Ce++)vt(Ce)}catch(D){fe(D)}})},ee}();const We=Fe;var Je=T(91),q=6e5,E=0,xe=[],He=[],Oe=[];function re(){return new Date().getTime()}o(re,"_getTime");var L=function(){function ee(W,ye){var fe=0,vt=(W||"<unnamed>")+"."+E;E++,(0,F.Z)(ee,this,function(I){var Ne=null,St=0;I.scheduleEvent=function(kt,st,At){var Ct=vt+"."+St;St++,st&&(Ct+="-("+st+")");var dn=Ct+"{"+fe+"}";fe++;var pn={evt:null,tm:re(),id:dn,isRunning:!1,isAborted:!1};return Ne?pn.evt=en(pn,Ne):pn.evt=Mt(pn),Ne=pn,Ne.evt._schId=dn,pn.evt;function Dn(rt){for(var tn=re(),sn=tn-q,ln=rt.length,Zt=0;Zt<ln;){var _n=rt[Zt];if(_n&&_n.tm<sn){var Fn=null;_n.abort?(Fn="Aborting ["+_n.id+"] due to Excessive runtime ("+(tn-_n.tm)+" ms)",_n.abort(Fn)):Fn="Removing ["+_n.id+"] due to Excessive runtime ("+(tn-_n.tm)+" ms)",D(Fn),rt.splice(Zt,1),ln--}else Zt++}}o(Dn,"_abortAndRemoveOldEvents");function $n(rt,tn){var sn=!1,ln=ht(xe,rt);if(ln||(ln=ht(Oe,rt),sn=!0),ln){ln.to&&(clearTimeout(ln.to),ln.to=null);var Zt=re()-ln.tm;tn?sn?D("Timed out event ["+rt+"] finally complete -- "+Zt+" ms"):Ce("Promise ["+rt+"] Complete -- "+Zt+" ms"):(Oe.push(ln),D("Event ["+rt+"] Timed out and removed -- "+Zt+" ms"))}else Ce("Failed to remove ["+rt+"] from running queue");Ne&&Ne.id===rt&&(Ne=null),Dn(xe),Dn(He),Dn(Oe)}o($n,"_cleanup");function Ye(rt,tn){return function(sn){return $n(rt,!0),tn&&tn(sn),sn}}o(Ye,"_removeScheduledEvent");function Et(rt,tn,sn,ln){tn.then(function(Zt){return Zt instanceof We?(Ce("Event ["+rt+"] returned a promise -- waiting"),Et(rt,Zt,sn,ln),Zt):Ye(rt,sn)(Zt)},Ye(rt,ln))}o(Et,"_waitForFinalResult");function jt(rt,tn){var sn=rt.id;return new We(function(ln,Zt){Ce("Event ["+sn+"] Starting -- waited for "+(rt.wTm||"--")+" ms"),rt.isRunning=!0,rt.abort=function(Fn){rt.abort=null,rt.isAborted=!0,$n(sn,!1),Zt(new Error(Fn))};var _n=tn(sn);_n instanceof We?(At&&(rt.to=setTimeout(function(){$n(sn,!1),Zt(new Error("Timed out after ["+At+"] ms"))},At)),Et(sn,_n,function(Fn){Ce("Event ["+sn+"] Resolving after "+(re()-rt.tm)+" ms"),ln(Fn)},Zt)):(Ce("Promise ["+sn+"] Auto completed as the start action did not return a promise"),ln())})}o(jt,"_createScheduledEvent");function Mt(rt){var tn=re();return rt.wTm=tn-rt.tm,rt.tm=tn,rt.isAborted?We.reject(new Error("["+Ct+"] was aborted")):(xe.push(rt),jt(rt,kt))}o(Mt,"_startWaitingEvent");function en(rt,tn){var sn=new We(function(ln,Zt){var _n=re()-tn.tm,Fn=tn.id;Ce("["+Ct+"] is waiting for ["+Fn+":"+_n+" ms] to complete before starting -- ["+He.length+"] waiting and ["+xe.length+"] running"),rt.abort=function(ei){rt.abort=null,ht(He,Ct),rt.isAborted=!0,Zt(new Error(ei))},tn.evt.then(function(ei){ht(He,Ct),Mt(rt).then(ln,Zt)},function(ei){ht(He,Ct),Mt(rt).then(ln,Zt)})});return He.push(rt),sn}o(en,"_waitForPreviousEvent")};function ht(kt,st){for(var At=0;At<kt.length;At++)if(kt[At].id===st)return kt.splice(At,1)[0];return null}o(ht,"_removeQueuedEvent")});function Ce(I){var Ne=(0,Je.Rd)();Ne&&Ne.QUnit&&console&&console.log("ESPromiseScheduler["+vt+"] "+I)}o(Ce,"_debugLog");function D(I){(0,be.jV)(ye,"ESPromiseScheduler["+vt+"] "+I)}o(D,"_warnLog")}return o(ee,"ESPromiseScheduler"),ee.incomplete=function(){return xe},ee.waitingToStart=function(){return He},ee}();const Se=L;var Re=function(){function ee(W){var ye=this,fe={},vt=[],Ce=[];W&&Ce.push(W);function D(ht,kt){var st,At=fe[ht];if(At&&(st=At[kt]),!st&&st!==null){if((0,M.HD)(ht)&&(0,M.HD)(kt))if(Ce.length>0){for(var Ct=0;Ct<Ce.length;Ct++)if(Ce[Ct].handleField(ht,kt)){st={canHandle:!0,fieldHandler:Ce[Ct]};break}}else vt.length===0&&(st={canHandle:!0});if(!st&&st!==null){st=null;for(var Ct=0;Ct<vt.length;Ct++)if(vt[Ct].handleField(ht,kt)){st={canHandle:!0,handler:vt[Ct],fieldHandler:null};break}}At||(At=fe[ht]={}),At[kt]=st}return st}o(D,"_getFieldSanitizer"),ye.addSanitizer=function(ht){ht&&(vt.push(ht),fe={})},ye.addFieldSanitizer=function(ht){ht&&(Ce.push(ht),fe={})},ye.handleField=function(ht,kt){var st=D(ht,kt);return st?st.canHandle:!1},ye.value=function(ht,kt,st,At){var Ct=D(ht,kt);if(Ct&&Ct.canHandle){if(!Ct||!Ct.canHandle)return null;if(Ct.handler)return Ct.handler.value(ht,kt,st,At);if(!(0,M.HD)(kt)||(0,M.le)(st)||st===ze.qS)return null;var dn=null,pn=(0,X.Sy)(st);if((pn&8192)==8192){var Dn=pn&~8192;if(dn=st,!(0,X.Sn)(dn.value)||Dn!==1&&Dn!==2&&Dn!==3&&(Dn&4096)!=4096)return null}else pn===1||pn===2||pn===3||(pn&4096)==4096?dn=Ne(ht,kt,st):pn===4&&(dn=Ne(ht,kt,At?JSON.stringify(st):st));if(dn)return I(Ct,ht,kt,pn,dn,At)}return null},ye.property=function(ht,kt,st,At){var Ct=D(ht,kt);if(!Ct||!Ct.canHandle||!(0,M.HD)(kt)||(0,M.le)(st)||!(0,X.Sn)(st.value))return null;var dn=(0,X.Sy)(st.value);return dn===0?null:I(Ct,ht,kt,dn,st,At)};function I(ht,kt,st,At,Ct,dn){if(ht.handler)return ht.handler.property(kt,st,Ct,dn);if(!(0,M.le)(Ct.kind)){if((At&4096)==4096||!(0,X.oS)(Ct.kind))return null;Ct.value=Ct.value.toString()}return St(ht.fieldHandler,kt,st,At,Ct)}o(I,"_handleProperty");function Ne(ht,kt,st){return(0,X.Sn)(st)?{value:st}:null}o(Ne,"_convertToProperty");function St(ht,kt,st,At,Ct){if(Ct&&ht){var dn=ht.getSanitizer(kt,st,At,Ct.kind,Ct.propertyType);if(dn)if(At===4){var pn={},Dn=Ct.value;(0,M.rW)(Dn,function(Ye,Et){var jt=kt+"."+st;if((0,X.Sn)(Et)){var Mt=Ne(jt,Ye,Et);Mt=St(ht,jt,Ye,(0,X.Sy)(Et),Mt),Mt&&(pn[Ye]=Mt.value)}}),Ct.value=pn}else{var $n={path:kt,name:st,type:At,prop:Ct,sanitizer:ye};Ct=dn.call(ye,$n)}}return Ct}o(St,"_callFieldSanitizer")}return o(ee,"ValueSanitizer"),ee.getFieldType=X.Sy,ee}(),Ee=100,qe=T(880),Tt=T(63),it=T(589),$e=T(928),$=T(843),pe=T(869),Y=T(878),ce=T(392),Ge=T(242),at=T(883),ne=T(790),ge=T(206)},984:(Rt,l,T)=>{"use strict";T.d(l,{qS:()=>R,YT:()=>S,p8:()=>B,o6:()=>U});var R="",S="https://browser.events.data.microsoft.com/OneCollector/1.0/",M="pluginVersionString",C=M+"Arr",B="version",U="properties"},599:(Rt,l,T)=>{"use strict";T.d(l,{Gf:()=>F,vs:()=>be,x9:()=>Me,dH:()=>se,Sn:()=>Q,jM:()=>z,IZ:()=>Z,r7:()=>ae,yj:()=>Ke,Vv:()=>Fe,oF:()=>We,d8:()=>Je,kT:()=>q,ej:()=>E,Do:()=>xe,cm:()=>He,l7:()=>Oe,hK:()=>re,oS:()=>L,JT:()=>Ee,if:()=>qe,Sy:()=>Tt,cQ:()=>it,Tr:()=>$e,mJ:()=>$,ot:()=>pe});var R=T(630),S=T(708),M=T(242),C=T(843),B=T(392),U=T(869),J=T(878),Le=T(91),ke=T(984),Pe,F="3.2.8",be="1DS-Web-JS-"+F,Ie="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",he="withCredentials",oe="timeout",ze=(Pe={},Pe[0]=0,Pe[2]=6,Pe[1]=1,Pe[3]=7,Pe[4096|2]=6,Pe[4096|1]=1,Pe[4096|3]=7,Pe),X=null,Me=Boolean((0,R.Me)()),se=Boolean((0,R.Jj)());function Q(Y){return!(Y===ke.qS||(0,S.le)(Y))}o(Q,"isValueAssigned");function z(Y){if(Y){var ce=Y.indexOf("-");if(ce>-1)return Y.substring(0,ce)}return ke.qS}o(z,"getTenantId");function Z(){return X===null&&(X=!(0,S.o8)(Uint8Array)&&!Re()&&!(0,R.b$)()),X}o(Z,"isUint8ArrayAvailable");function ae(Y){return!!(Y&&(0,S.hj)(Y)&&Y>=1&&Y<=4)}o(ae,"isLatency");function Ke(Y,ce,Ge){if(!ce&&!Q(ce)||typeof Y!="string")return null;var at=typeof ce;if(at==="string"||at==="number"||at==="boolean"||(0,S.kJ)(ce))ce={value:ce};else if(at==="object"&&!B.CY.call(ce,"value"))ce={value:Ge?JSON.stringify(ce):ce};else if((0,S.le)(ce.value)||ce.value===ke.qS||!(0,S.HD)(ce.value)&&!(0,S.hj)(ce.value)&&!(0,S.jn)(ce.value)&&!(0,S.kJ)(ce.value))return null;if((0,S.kJ)(ce.value)&&!Ee(ce.value))return null;if(!(0,S.le)(ce.kind)){if((0,S.kJ)(ce.value)||!L(ce.kind))return null;ce.value=ce.value.toString()}return ce}o(Ke,"sanitizeProperty");function Fe(Y,ce,Ge){var at=-1;if(!(0,S.o8)(Y))if(ce>0&&(ce===32?at=1<<13:ce<=13&&(at=ce<<5)),Se(Ge))at===-1&&(at=0),at|=Ge;else{var ne=ze[Tt(Y)]||-1;at!==-1&&ne!==-1?at|=ne:ne===6&&(at=ne)}return at}o(Fe,"getCommonSchemaMetaData");function We(){(0,M.JP)(null).setEnabled(!1)}o(We,"disableCookies");function Je(Y,ce,Ge){(0,M.p7)(null)&&(0,M.JP)(null).set(Y,ce,Ge*86400,null,"/")}o(Je,"setCookie");function q(Y){(0,M.p7)(null)&&(0,M.JP)(null).del(Y)}o(q,"deleteCookie");function E(Y){return(0,M.p7)(null)?xe((0,M.JP)(null),Y):ke.qS}o(E,"getCookie");function xe(Y,ce,Ge){Ge===void 0&&(Ge=!0);var at;return Y&&(at=Y.get(ce),Ge&&at&&decodeURIComponent&&(at=decodeURIComponent(at))),at||ke.qS}o(xe,"getCookieValue");function He(Y){Y===void 0&&(Y="D");var ce=(0,C.GW)();return Y==="B"?ce="{"+ce+"}":Y==="P"?ce="("+ce+")":Y==="N"&&(ce=ce.replace(/-/g,ke.qS)),ce}o(He,"createGuid");function Oe(Y,ce,Ge,at,ne){var ge={},ee=!1,W=0,ye=arguments.length,fe=Object[B.hB],vt=arguments;for(fe.toString.call(vt[0])==="[object Boolean]"&&(ee=vt[0],W++);W<ye;W++){var Y=vt[W];(0,S.rW)(Y,function(D,I){ee&&I&&(0,S.Kn)(I)?(0,S.kJ)(I)?(ge[D]=ge[D]||[],(0,S.tO)(I,function(Ne,St){Ne&&(0,S.Kn)(Ne)?ge[D][St]=Oe(!0,ge[D][St],Ne):ge[D][St]=Ne})):ge[D]=Oe(!0,ge[D],I):ge[D]=I})}return ge}o(Oe,"extend");var re=C.Jj;function L(Y){return Y===0||Y>0&&Y<=13||Y===32}o(L,"isValueKind");function Se(Y){return Y>=0&&Y<=9}o(Se,"isDataType");function Re(){var Y=(0,R.jW)();if(!(0,S.o8)(Y)&&Y.userAgent){var ce=Y.userAgent.toLowerCase();if((ce.indexOf("safari")>=0||ce.indexOf("firefox")>=0)&&ce.indexOf("chrome")<0)return!0}return!1}o(Re,"isSafariOrFirefox");function Ee(Y){return Y.length>0}o(Ee,"isArrayValid");function qe(Y,ce){var Ge=Y;Ge.timings=Ge.timings||{},Ge.timings.processTelemetryStart=Ge.timings.processTelemetryStart||{},Ge.timings.processTelemetryStart[ce]=re()}o(qe,"setProcessTelemetryTimings");function Tt(Y){var ce=0;if(Y!=null){var Ge=typeof Y;Ge==="string"?ce=1:Ge==="number"?ce=2:Ge==="boolean"?ce=3:Ge===B.fK&&(ce=4,(0,S.kJ)(Y)?(ce=4096,Y.length>0&&(ce|=Tt(Y[0]))):B.CY.call(Y,"value")&&(ce=8192|Tt(Y.value)))}return ce}o(Tt,"getFieldValueType");var it={Version:F,FullVersionString:be,strUndefined:B.jA,strObject:B.fK,Undefined:B.jA,arrForEach:S.tO,arrIndexOf:S.UA,arrMap:S.Mr,arrReduce:S.Xz,objKeys:S.FY,toISOString:S.Y6,isReactNative:R.b$,isString:S.HD,isNumber:S.hj,isBoolean:S.jn,isFunction:S.mf,isArray:S.kJ,isObject:S.Kn,strTrim:S.nd,isDocumentObjectAvailable:Me,isWindowObjectAvailable:se,isValueAssigned:Q,getTenantId:z,isBeaconsSupported:R.MF,isUint8ArrayAvailable:Z,isLatency:ae,sanitizeProperty:Ke,getISOString:S.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:Fe,cookieAvailable:M.p7,disallowsSameSiteNone:M.UY,setCookie:Je,deleteCookie:q,getCookie:E,createGuid:He,extend:Oe,getTime:re,isValueKind:L,isArrayValid:Ee,objDefineAccessors:S.l_,addPageUnloadEventListener:U.c9,setProcessTelemetryTimings:qe,addEventHandler:U.Ib,getFieldValueType:Tt,strEndsWith:S.Id,objForEachKey:S.rW},$e={_canUseCookies:void 0,isTypeof:S.Ym,isUndefined:S.o8,isNullOrUndefined:S.le,hasOwnProperty:S.nr,isFunction:S.mf,isObject:S.Kn,isDate:S.J_,isArray:S.kJ,isError:S.VZ,isString:S.HD,isNumber:S.hj,isBoolean:S.jn,toISOString:S.Y6,arrForEach:S.tO,arrIndexOf:S.UA,arrMap:S.Mr,arrReduce:S.Xz,strTrim:S.nd,objCreate:Le.pu,objKeys:S.FY,objDefineAccessors:S.l_,addEventHandler:U.Ib,dateNow:S.m6,isIE:R.w1,disableCookies:We,newGuid:C.GW,perfNow:C.Jj,newId:J.pZ,randomValue:J.az,random32:J._l,mwcRandomSeed:J.CN,mwcRandom32:J.F6,generateW3CId:C.DO};function $(){return!!(0,R.a8)("chrome")}o($,"isChromium");function pe(Y,ce,Ge,at,ne,ge){at===void 0&&(at=!1),ne===void 0&&(ne=!1);function ee(ye,fe,vt){try{ye[fe]=vt}catch(Ce){}}o(ee,"_wrapSetXhrProp");var W=new XMLHttpRequest;return at&&ee(W,Ie,at),Ge&&ee(W,he,Ge),W.open(Y,ce,!ne),Ge&&ee(W,he,Ge),!ne&&ge&&ee(W,oe,ge),W}o(pe,"openXhr")},865:(Rt,l,T)=>{"use strict";T.r(l),T.d(l,{BE_PROFILE:()=>he,NRT_PROFILE:()=>Ie,PostChannel:()=>An,RT_PROFILE:()=>be});var R=T(88),S=T(679),M=T(288),C=T(869),B=T(883),U=T(599),J=T(708),Le=T(630),ke=T(928),Pe=T(18),F=T(63),be="REAL_TIME",Ie="NEAR_REAL_TIME",he="BEST_EFFORT",oe="",ze="POST",X="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Me="drop",se="send",Q="requeue",z="rspFail",Z="oth",ae="no-cache, no-store",Ke="application/x-json-stream",Fe="cache-control",We="content-type",Je="kill-tokens",q="kill-duration",E="kill-duration-seconds",xe="time-delta-millis",He="client-version",Oe="client-id",re="time-delta-to-apply-millis",L="upload-time",Se="apikey",Re="AuthMsaDeviceTicket",Ee="AuthXToken",qe="sdk-version",Tt="NoResponseBody",it="msfpc",$e="trace",$="user";function pe(yt){var _t=(yt.ext||{}).intweb;return _t&&(0,U.Sn)(_t[it])?_t[it]:null}o(pe,"_getEventMsfpc");function Y(yt){for(var _t=null,Ot=0;_t===null&&Ot<yt.length;Ot++)_t=pe(yt[Ot]);return _t}o(Y,"_getMsfpc");var ce=function(){function yt(_t,Ot){var ot=Ot?[].concat(Ot):[],Qt=this,Kt=Y(ot);Qt.iKey=function(){return _t},Qt.Msfpc=function(){return Kt||oe},Qt.count=function(){return ot.length},Qt.events=function(){return ot},Qt.addEvent=function(pt){return pt?(ot.push(pt),Kt||(Kt=pe(pt)),!0):!1},Qt.split=function(pt,nn){var Xt;if(pt<ot.length){var Cn=ot.length-pt;(0,J.le)(nn)||(Cn=nn<Cn?nn:Cn),Xt=ot.splice(pt,Cn),Kt=Y(ot)}return new yt(_t,Xt)}}return o(yt,"EventBatch"),yt.create=function(_t,Ot){return new yt(_t,Ot)},yt}(),Ge=function(){function yt(){var _t=!0,Ot=!0,ot=!0,Qt="use-collector-delta",Kt=!1;(0,S.Z)(yt,this,function(pt){pt.allowRequestSending=function(){return _t},pt.firstRequestSent=function(){ot&&(ot=!1,Kt||(_t=!1))},pt.shouldAddClockSkewHeaders=function(){return Ot},pt.getClockSkewHeaderValue=function(){return Qt},pt.setClockSkew=function(nn){Kt||(nn?(Qt=nn,Ot=!0,Kt=!0):Ot=!1,_t=!0)}})}return o(yt,"ClockSkewManager"),yt.__ieDyn=1,yt}();const at=Ge;var ne=1e3,ge=function(){function yt(){var _t={};function Ot(ot){var Qt=[];return ot&&(0,J.tO)(ot,function(Kt){Qt.push((0,J.nd)(Kt))}),Qt}o(Ot,"_normalizeTenants"),(0,S.Z)(yt,this,function(ot){ot.setKillSwitchTenants=function(Qt,Kt){if(Qt&&Kt)try{var pt=Ot(Qt.split(","));if(Kt==="this-request-only")return pt;for(var nn=parseInt(Kt,10)*ne,Xt=0;Xt<pt.length;++Xt)_t[pt[Xt]]=(0,J.m6)()+nn}catch(Cn){return[]}return[]},ot.isTenantKilled=function(Qt){var Kt=_t,pt=(0,J.nd)(Qt);return Kt[pt]!==void 0&&Kt[pt]>(0,J.m6)()?!0:(delete Kt[pt],!1)}})}return o(yt,"KillSwitch"),yt.__ieDyn=1,yt}();const ee=ge;var W=T(392),ye=.8,fe=1.2,vt=3e3,Ce=6e5;function D(yt){return!(yt>=300&&yt<500&&yt!=408&&yt!=429||yt==501||yt==505)}o(D,"retryPolicyShouldRetryForStatus");function I(yt){var _t=0,Ot=vt*ye,ot=vt*fe,Qt=Math.floor(Math.random()*(ot-Ot))+Ot;return _t=Math.pow(2,yt)*Qt,Math.min(_t,Ce)}o(I,"retryPolicyGetMillisToBackoffForRetry");var Ne=20,St=3984588,ht=65e3,kt=2e6,st=Math.min(kt,ht),At="metadata",Ct="f",dn=/\./,pn=function(){function yt(_t,Ot,ot,Qt){var Kt="data",pt="baseData",nn="ext",Xt=!!Qt,Cn=!0,yn=Ot,Jn={};(0,S.Z)(yt,this,function(bn){bn.createPayload=function(Pt,Gt,an,Rn,Jt,on){return{apiKeys:[],payloadBlob:oe,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Pt,isTeardown:Gt,isSync:an,isBeacon:Rn,sendType:on,sendReason:Jt}},bn.appendPayload=function(Pt,Gt,an){var Rn=Pt&&Gt&&!Pt.overflow;return Rn&&(0,M.Lm)(_t,function(){return"Serializer:appendPayload"},function(){for(var Jt=Gt.events(),on=Pt.payloadBlob,wn=Pt.numEvents,In=!1,cn=[],Ln=[],ti=Pt.isBeacon,On=ti?ht:St,Vn=ti?st:kt,Tn=0,Gn=0;Tn<Jt.length;){var Yt=Jt[Tn];if(Yt){if(wn>=an){Pt.overflow=Gt.split(Tn);break}var Ut=bn.getEventBlob(Yt);if(Ut&&Ut.length<=Vn){var oi=Ut.length,ki=on.length;if(ki+oi>On){Pt.overflow=Gt.split(Tn);break}on&&(on+=`
`),on+=Ut,Gn++,Gn>Ne&&(on.substr(0,1),Gn=0),In=!0,wn++}else Ut?cn.push(Yt):Ln.push(Yt),Jt.splice(Tn,1),Tn--}Tn++}if(cn&&cn.length>0&&Pt.sizeExceed.push(ce.create(Gt.iKey(),cn)),Ln&&Ln.length>0&&Pt.failedEvts.push(ce.create(Gt.iKey(),Ln)),In){Pt.batches.push(Gt),Pt.payloadBlob=on,Pt.numEvents=wn;var zn=Gt.iKey();(0,J.UA)(Pt.apiKeys,zn)===-1&&Pt.apiKeys.push(zn)}},function(){return{payload:Pt,theBatch:{iKey:Gt.iKey(),evts:Gt.events()},max:an}}),Rn},bn.getEventBlob=function(Pt){try{return(0,M.Lm)(_t,function(){return"Serializer.getEventBlob"},function(){var Gt={};Gt.name=Pt.name,Gt.time=Pt.time,Gt.ver=Pt.ver,Gt.iKey="o:"+(0,U.jM)(Pt.iKey);var an={},Rn=Pt[nn];Rn&&(Gt[nn]=an,(0,J.rW)(Rn,function(wn,In){var cn=an[wn]={};zt(In,cn,"ext."+wn,!0,null,null,!0)}));var Jt=Gt[Kt]={};Jt.baseType=Pt.baseType;var on=Jt[pt]={};return zt(Pt.baseData,on,pt,!1,[pt],function(wn,In,cn){Dn(an,wn,In,cn)},Cn),zt(Pt.data,Jt,Kt,!1,[],function(wn,In,cn){Dn(an,wn,In,cn)},Cn),JSON.stringify(Gt)},function(){return{item:Pt}})}catch(Gt){return null}};function Nn(Pt,Gt){var an=Jn[Pt];return an===void 0&&(Pt.length>=7&&(an=(0,J.xe)(Pt,"ext.metadata")||(0,J.xe)(Pt,"ext.web")),Jn[Pt]=an),an}o(Nn,"_isReservedField");function zt(Pt,Gt,an,Rn,Jt,on,wn){(0,J.rW)(Pt,function(In,cn){var Ln=null;if(cn||(0,U.Sn)(cn)){var ti=an,On=In,Vn=Jt,Tn=Gt;if(Xt&&!Rn&&dn.test(In)){var Gn=In.split("."),Yt=Gn.length;if(Yt>1){Vn&&(Vn=Vn.slice());for(var Ut=0;Ut<Yt-1;Ut++){var oi=Gn[Ut];Tn=Tn[oi]=Tn[oi]||{},ti+="."+oi,Vn&&Vn.push(oi)}On=Gn[Yt-1]}}var ki=Rn&&Nn(ti,On);if(!ki&&yn&&yn.handleField(ti,On)?Ln=yn.value(ti,On,cn,ot):Ln=(0,U.yj)(On,cn,ot),Ln){var zn=Ln.value;if(Tn[On]=zn,on&&on(Vn,On,Ln),wn&&typeof zn=="object"&&!(0,J.kJ)(zn)){var si=Vn;si&&(si=si.slice(),si.push(On)),zt(cn,zn,ti+"."+On,Rn,si,on,wn)}}}})}o(zt,"_processPathKeys")})}return o(yt,"Serializer"),yt.__ieDyn=1,yt}();function Dn(yt,_t,Ot,ot){if(ot&&yt){var Qt=(0,U.Vv)(ot.value,ot.kind,ot.propertyType);if(Qt>-1){var Kt=yt[At];Kt||(Kt=yt[At]={f:{}});var pt=Kt[Ct];if(pt||(pt=Kt[Ct]={}),_t)for(var nn=0;nn<_t.length;nn++){var Xt=_t[nn];pt[Xt]||(pt[Xt]={f:{}});var Cn=pt[Xt][Ct];Cn||(Cn=pt[Xt][Ct]={}),pt=Cn}pt=pt[Ot]={},(0,J.kJ)(ot.value)?pt.a={t:Qt}:pt.t=Qt}}}o(Dn,"_addJSONPropertyMetaData");var $n,Ye="sendAttempt",Et="&"+Tt+"=true",jt=($n={},$n[1]=Q,$n[100]=Q,$n[200]="sent",$n[8004]=Me,$n[8003]=Me,$n),Mt={},en={};function rt(yt,_t,Ot){Mt[yt]=_t,Ot!==!1&&(en[_t]=yt)}o(rt,"_addCollectorHeaderQsMapping"),rt(Re,Re,!1),rt(He,He),rt(Oe,"Client-Id"),rt(Se,Se),rt(re,re),rt(L,L),rt(Ee,Ee);function tn(yt){try{return yt.responseText}catch(_t){}return oe}o(tn,"_getResponseText");function sn(yt,_t){var Ot=!1;if(yt&&_t){var ot=(0,J.FY)(yt);if(ot&&ot.length>0)for(var Qt=_t.toLowerCase(),Kt=0;Kt<ot.length;Kt++){var pt=ot[Kt];if(pt&&(0,J.nr)(_t,pt)&&pt.toLowerCase()===Qt){Ot=!0;break}}}return Ot}o(sn,"_hasHeader");function ln(yt,_t,Ot,ot){_t&&Ot&&Ot.length>0&&(ot&&Mt[_t]?(yt.hdrs[Mt[_t]]=Ot,yt.useHdrs=!0):yt.url+="&"+_t+"="+Ot)}o(ln,"_addRequestDetails");function Zt(yt,_t){return _t&&((0,J.hj)(_t)?yt=[_t].concat(yt):(0,J.kJ)(_t)&&(yt=_t.concat(yt))),yt}o(Zt,"_prependTransports");var _n=function(){function yt(_t,Ot,ot,Qt,Kt){this._responseHandlers=[];var pt="?cors=true&"+We.toLowerCase()+"="+Ke,nn=new ee,Xt=!1,Cn=new at,yn=!1,Jn=0,bn,Nn,zt,Pt,Gt=!0,an=[],Rn={},Jt=[],on=null,wn=!1,In,cn=!1,Ln=!1,ti,On,Vn,Tn,Gn;(0,S.Z)(yt,this,function(Yt){var Ut=!0;Yt.initialize=function(j,v,_,H,we){var ut;we||(we={}),pt=j+pt,Ln=(0,J.o8)(we.avoidOptions)?!0:!we.avoidOptions,Pt=v,In=v.getCookieMgr(),wn=!Pt.config.disableEventTimings;var et=!!Pt.config.enableCompoundKey;bn=_,Nn=bn.diagLog();var K=we.valueSanitizer,ie=we.stringifyObjects;(0,J.o8)(we.enableCompoundKey)||(et=!!we.enableCompoundKey),ti=we.xhrTimeout,On=!!we.disableXhrSync,Vn=!!we.disableFetchKeepAlive,Gn=we.addNoResponse!==!1,yn=!(0,Le.b$)(),on=new pn(Pt,K,ie,et),(0,J.le)(we.useSendBeacon)||(yn=!!we.useSendBeacon);var de=H,Be=we.alwaysUseXhrOverride?H:null,je=we.alwaysUseXhrOverride?H:null,Qe=[3,2];if(!H){Gt=!1;var Bt=(0,Le.k$)();Bt&&Bt.protocol&&Bt.protocol.toLowerCase()==="file:"&&(Ut=!1);var Dt=[];(0,Le.b$)()?(Dt=[2,1],Qe=[2,1,3]):Dt=[1,2,3],Dt=Zt(Dt,we.transports),H=oi(Dt,!1),H||(0,Pe.jV)(Nn,"No available transport to send events"),de=oi(Dt,!0)}Be||(Qe=Zt(Qe,we.unloadTransports),Be=oi(Qe,!0)),Tn=!Gt&&(yn&&(0,Le.MF)()||!Vn&&(0,Le.JO)(!0)),zt=(ut={},ut[0]=H,ut[1]=de||oi([1,2,3],!0),ut[2]=Be||de||oi([1],!0),ut[3]=je||oi([2,3],!0)||de||oi([1],!0),ut)};function oi(j,v){for(var _=0,H=null,we=0;H==null&&we<j.length;)_=j[we],_===1?(0,Le.cp)()?H=ki:(0,Le.Z3)()&&(H=si):_===2&&(0,Le.JO)(v)&&(!v||v&&!Vn)?H=zn:yn&&_===3&&(0,Le.MF)()&&(H=xi),we++;return H?{_transport:_,_isSync:v,sendPOST:H}:null}o(oi,"_getSenderInterface"),Yt._getDbgPlgTargets=function(){return[zt[0],nn,on,zt]};function ki(j,v,_){var H=new XDomainRequest;H.open(ze,j.urlString),j.timeout&&(H.timeout=j.timeout),H.onload=function(){var we=tn(H);ni(v,200,{},we),yi(we)},H.onerror=function(){ni(v,400,{})},H.ontimeout=function(){ni(v,500,{})},H.onprogress=function(){},_?H.send(j.data):Kt.set(function(){H.send(j.data)},0)}o(ki,"_xdrSendPost");function zn(j,v,_){var H,we=j.urlString,ut=!1,et=!1,K=(H={body:j.data,method:ze},H[X]=!0,H);_&&(K.keepalive=!0,j._sendReason===2&&(ut=!0,Gn&&(we+=Et))),Ut&&(K.credentials="include"),j.headers&&(0,J.FY)(j.headers).length>0&&(K.headers=j.headers),fetch(we,K).then(function(ie){var de={},Be=oe,je=ie.headers;je&&je.forEach(function(Qe,Bt){de[Bt]=Qe}),ie.body&&ie.text().then(function(Qe){Be=Qe}),et||(et=!0,ni(v,ie.status,de,Be),yi(Be))}).catch(function(ie){et||(et=!0,ni(v,0,{}))}),ut&&!et&&(et=!0,ni(v,200,{})),!et&&j.timeout>0&&Kt.set(function(){et||(et=!0,ni(v,500,{}))},j.timeout)}o(zn,"_fetchSendPost");function si(j,v,_){var H=j.urlString;function we(ie,de,Be){if(!ie[Be]&&de&&de.getResponseHeader){var je=de.getResponseHeader(Be);je&&(ie[Be]=(0,J.nd)(je))}return ie}o(we,"_appendHeader");function ut(ie){var de={};return ie.getAllResponseHeaders?de=nr(ie.getAllResponseHeaders()):(de=we(de,ie,xe),de=we(de,ie,q),de=we(de,ie,E)),de}o(ut,"_getAllResponseHeaders");function et(ie,de){ni(v,ie.status,ut(ie),de)}o(et,"xhrComplete"),_&&j.disableXhrSync&&(_=!1);var K=(0,U.ot)(ze,H,Ut,!0,_,j.timeout);(0,J.rW)(j.headers,function(ie,de){K.setRequestHeader(ie,de)}),K.onload=function(){var ie=tn(K);et(K,ie),yi(ie)},K.onerror=function(){et(K)},K.ontimeout=function(){et(K)},K.send(j.data)}o(si,"_xhrSendPost");function ni(j,v,_,H){try{j(v,_,H)}catch(we){(0,Pe.kP)(Nn,2,518,(0,Le.eU)(we))}}o(ni,"_doOnComplete");function xi(j,v,_){var H=j,we=200,ut=H._thePayload,et=j.urlString+(Gn?Et:oe);try{var K=(0,Le.jW)();if(!K.sendBeacon(et,j.data))if(ut){var ie=[];(0,J.tO)(ut.batches,function(de){if(ie&&de&&de.count()>0){for(var Be=de.events(),je=0;je<Be.length;je++)if(!K.sendBeacon(et,on.getEventBlob(Be[je]))){ie.push(de.split(je));break}}else ie.push(de.split(0))}),Mn(ie,8003,ut.sendType,!0)}else we=0}catch(de){(0,Pe.jV)(Nn,"Failed to send telemetry using sendBeacon API. Ex:"+(0,Le.eU)(de)),we=0}finally{ni(v,we,{},oe)}}o(xi,"_beaconSendPost");function jn(j){return j===2||j===3}o(jn,"_isBeaconPayload");function Yn(j){return cn&&jn(j)&&(j=2),j}o(Yn,"_adjustSendType"),Yt.addQueryStringParameter=function(j,v){for(var _=0;_<an.length;_++)if(an[_].name===j){an[_].value=v;return}an.push({name:j,value:v})},Yt.addHeader=function(j,v){Rn[j]=v},Yt.canSendRequest=function(){return Di()&&Cn.allowRequestSending()},Yt.sendQueuedRequests=function(j,v){(0,J.o8)(j)&&(j=0),cn&&(j=Yn(j),v=2),Si(Jt,j,0)&&Ri(Ai(),0,!1,j,v||0)},Yt.isCompletelyIdle=function(){return!Xt&&Jn===0&&Jt.length===0},Yt.setUnloading=function(j){cn=j},Yt.addBatch=function(j){if(j&&j.count()>0){if(nn.isTenantKilled(j.iKey()))return!1;Jt.push(j)}return!0},Yt.teardown=function(){Jt.length>0&&Ri(Ai(),0,!0,2,2)},Yt.pause=function(){Xt=!0},Yt.resume=function(){Xt=!1,Yt.sendQueuedRequests(0,4)},Yt.sendSynchronousBatch=function(j,v,_){j&&j.count()>0&&((0,J.le)(v)&&(v=1),cn&&(v=Yn(v),_=2),Ri([j],0,!1,v,_||0))};function Di(){return!Xt&&Jn<Ot}o(Di,"_hasIdleConnection");function Ai(){var j=Jt;return Jt=[],j}o(Ai,"_clearQueue");function Si(j,v,_){var H=!1;return j&&j.length>0&&!Xt&&zt[v]&&on&&(H=v!==0||Di()&&(_>0||Cn.allowRequestSending())),H}o(Si,"_canSendPayload");function Ii(j){var v={};return j&&(0,J.tO)(j,function(_,H){v[H]={iKey:_.iKey(),evts:_.events()}}),v}o(Ii,"_createDebugBatches");function Ri(j,v,_,H,we){if(!(!j||j.length===0)){if(Xt){Mn(j,1,H);return}H=Yn(H);try{var ut=j,et=H!==0;(0,M.Lm)(Pt,function(){return"HttpManager:_sendBatches"},function(K){K&&(j=j.slice(0));for(var ie=[],de=null,Be=(0,U.hK)(),je=zt[H]||(et?zt[1]:zt[0]),Qe=je&&je._transport,Bt=Tn&&(cn||jn(H)||Qe===3||je._isSync&&Qe===2);Si(j,H,v);){var Dt=j.shift();Dt&&Dt.count()>0&&(nn.isTenantKilled(Dt.iKey())?ie.push(Dt):(de=de||on.createPayload(v,_,et,Bt,we,H),on.appendPayload(de,Dt,_t)?de.overflow!==null&&(j=[de.overflow].concat(j),de.overflow=null,Li(de,Be,(0,U.hK)(),we),Be=(0,U.hK)(),de=null):(Li(de,Be,(0,U.hK)(),we),Be=(0,U.hK)(),j=[Dt].concat(j),de=null)))}de&&Li(de,Be,(0,U.hK)(),we),j.length>0&&(Jt=j.concat(Jt)),Mn(ie,8004,H)},function(){return{batches:Ii(ut),retryCount:v,isTeardown:_,isSynchronous:et,sendReason:we,useSendBeacon:jn(H),sendType:H}},!et)}catch(K){(0,Pe.kP)(Nn,2,48,"Unexpected Exception sending batch: "+(0,Le.eU)(K))}}}o(Ri,"_sendBatches");function zi(j,v){var _={url:pt,hdrs:{},useHdrs:!1};v?(_.hdrs=(0,U.l7)(_.hdrs,Rn),_.useHdrs=(0,J.FY)(_.hdrs).length>0):(0,J.rW)(Rn,function(K,ie){en[K]?ln(_,en[K],ie,!1):(_.hdrs[K]=ie,_.useHdrs=!0)}),ln(_,Oe,"NO_AUTH",v),ln(_,He,U.vs,v);var H=oe;(0,J.tO)(j.apiKeys,function(K){H.length>0&&(H+=","),H+=K}),ln(_,Se,H,v),ln(_,L,(0,J.m6)().toString(),v);var we=Ni(j);if((0,U.Sn)(we)&&(_.url+="&ext.intweb.msfpc="+we),Cn.shouldAddClockSkewHeaders()&&ln(_,re,Cn.getClockSkewHeaderValue(),v),Pt.getWParam){var ut=Pt.getWParam();ut>=0&&(_.url+="&w="+ut)}for(var et=0;et<an.length;et++)_.url+="&"+an[et].name+"="+an[et].value;return _}o(zi,"_buildRequestDetails");function Un(j,v,_){j[v]=j[v]||{},j[v][bn.identifier]=_}o(Un,"_setTimingValue");function Li(j,v,_,H){if(j&&j.payloadBlob&&j.payloadBlob.length>0){var we=!!Yt.sendHook,ut=zt[j.sendType];!jn(j.sendType)&&j.isBeacon&&j.sendReason===2&&(ut=zt[2]||zt[3]||ut);var et=Ln;(j.isBeacon||ut._transport===3)&&(et=!1);var K=zi(j,et);et=et||K.useHdrs;var ie=(0,U.hK)();(0,M.Lm)(Pt,function(){return"HttpManager:_doPayloadSend"},function(){for(var de=0;de<j.batches.length;de++)for(var Be=j.batches[de],je=Be.events(),Qe=0;Qe<je.length;Qe++){var Bt=je[Qe];if(wn){var Dt=Bt.timings=Bt.timings||{};Un(Dt,"sendEventStart",ie),Un(Dt,"serializationStart",v),Un(Dt,"serializationCompleted",_)}Bt[Ye]>0?Bt[Ye]++:Bt[Ye]=1}Mn(j.batches,1e3+(H||0),j.sendType,!0);var Vt={data:j.payloadBlob,urlString:K.url,headers:K.hdrs,_thePayload:j,_sendReason:H,timeout:ti,disableXhrSync:On,disableFetchKeepAlive:Vn};et&&(sn(Vt.headers,Fe)||(Vt.headers[Fe]=ae),sn(Vt.headers,We)||(Vt.headers[We]=Ke));var qn=null;ut&&(qn=o(function($t){Cn.firstRequestSent();var ui=o(function(di,Qn){un(di,Qn,j,H)},"onComplete"),ii=j.isTeardown||j.isSync;try{ut.sendPOST($t,ui,ii),Yt.sendListener&&Yt.sendListener(Vt,$t,ii,j.isBeacon)}catch(di){(0,Pe.jV)(Nn,"Unexpected exception sending payload. Ex:"+(0,Le.eU)(di)),ni(ui,0,{})}},"sender")),(0,M.Lm)(Pt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(qn)if(j.sendType===0&&Jn++,we&&!j.isBeacon&&ut._transport!==3){var $t={data:Vt.data,urlString:Vt.urlString,headers:(0,U.l7)({},Vt.headers),timeout:Vt.timeout,disableXhrSync:Vt.disableXhrSync,disableFetchKeepAlive:Vt.disableFetchKeepAlive},ui=!1;(0,M.Lm)(Pt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Yt.sendHook($t,function(ii){ui=!0,!Gt&&!ii._thePayload&&(ii._thePayload=ii._thePayload||Vt._thePayload,ii._sendReason=ii._sendReason||Vt._sendReason),qn(ii)},j.isSync||j.isTeardown)}catch(ii){ui||qn(Vt)}})}else qn(Vt)})},function(){return{thePayload:j,serializationStart:v,serializationCompleted:_,sendReason:H}},j.isSync)}j.sizeExceed&&j.sizeExceed.length>0&&Mn(j.sizeExceed,8003,j.sendType),j.failedEvts&&j.failedEvts.length>0&&Mn(j.failedEvts,8002,j.sendType)}o(Li,"_doPayloadSend");function gi(j,v){wn&&(0,J.tO)(j,function(_){var H=_.timings=_.timings||{};Un(H,"sendEventCompleted",v)})}o(gi,"_addEventCompletedTimings");function un(j,v,_,H){var we=9e3,ut=null,et=!1,K=!1;try{var ie=!0;if(typeof j!==W.jA){if(v){Cn.setClockSkew(v[xe]);var de=v[q]||v["kill-duration-seconds"];(0,J.tO)(nn.setKillSwitchTenants(v[Je],de),function(je){(0,J.tO)(_.batches,function(Qe){if(Qe.iKey()===je){ut=ut||[];var Bt=Qe.split(0);_.numEvents-=Bt.count(),ut.push(Bt)}})})}if(j==200||j==204){we=200;return}(!D(j)||_.numEvents<=0)&&(ie=!1),we=9e3+j%1e3}if(ie){we=100;var Be=_.retryCnt;_.sendType===0&&(Be<ot?(et=!0,ci(function(){_.sendType===0&&Jn--,Ri(_.batches,Be+1,_.isTeardown,cn?2:_.sendType,5)},cn,I(Be))):(K=!0,cn&&(we=8001)))}}finally{et||(Cn.setClockSkew(),Ji(_,we,H,K)),Mn(ut,8004,_.sendType)}}o(un,"_retryRequestIfNeeded");function Ji(j,v,_,H){try{H&&bn._backOffTransmission(),v===200&&(!H&&!j.isSync&&bn._clearBackOff(),li(j.batches)),Mn(j.batches,v,j.sendType,!0)}finally{j.sendType===0&&(Jn--,_!==5&&Yt.sendQueuedRequests(j.sendType,_))}}o(Ji,"_handleRequestFinished");function li(j){if(wn){var v=(0,U.hK)();(0,J.tO)(j,function(_){_&&_.count()>0&&gi(_.events(),v)})}}o(li,"_addCompleteTimings");function ci(j,v,_){v?j():Kt.set(j,_)}o(ci,"_doAction");function nr(j){var v={};if((0,J.HD)(j)){var _=(0,J.nd)(j).split(/[\r\n]+/);(0,J.tO)(_,function(H){if(H){var we=H.indexOf(": ");if(we!==-1){var ut=(0,J.nd)(H.substring(0,we)).toLowerCase(),et=(0,J.nd)(H.substring(we+1));v[ut]=et}else v[(0,J.nd)(H)]=1}})}return v}o(nr,"_convertAllHeadersToMap");function Ni(j){for(var v=0;v<j.batches.length;v++){var _=j.batches[v].Msfpc();if(_)return encodeURIComponent(_)}return oe}o(Ni,"_getMsfpc");function yi(j){var v=Yt._responseHandlers;try{for(var _=0;_<v.length;_++)try{v[_](j)}catch(we){(0,Pe.kP)(Nn,1,519,"Response handler failed: "+we)}if(j){var H=JSON.parse(j);(0,U.Sn)(H.webResult)&&(0,U.Sn)(H.webResult[it])&&In.set("MSFPC",H.webResult[it],365*86400)}}catch(we){}}o(yi,"_handleCollectorResponse");function Mn(j,v,_,H){if(j&&j.length>0&&Qt){var we=Qt[kn(v)];if(we){var ut=_!==0;(0,M.Lm)(Pt,function(){return"HttpManager:_sendBatchesNotification"},function(){ci(function(){try{we.call(Qt,j,v,ut,_)}catch(et){(0,Pe.kP)(Nn,1,74,"send request notification failed: "+et)}},H||ut,0)},function(){return{batches:Ii(j),reason:v,isSync:ut,sendSync:H,sendType:_}},!ut)}}}o(Mn,"_sendBatchesNotification");function kn(j){var v=jt[j];return(0,U.Sn)(v)||(v=Z,j>=9e3&&j<=9999?v=z:j>=8e3&&j<=8999?v=Me:j>=1e3&&j<=1999&&(v=se)),v}o(kn,"_getNotificationAction")})}return o(yt,"HttpManager"),yt.__ieDyn=1,yt}();function Fn(yt,_t){for(var Ot=[],ot=2;ot<arguments.length;ot++)Ot[ot-2]=arguments[ot];return setTimeout(yt,_t,Ot)}o(Fn,"defaultSetTimeout");function ei(yt){clearTimeout(yt)}o(ei,"defaultClearTimeout");function fi(yt,_t){return{set:yt||Fn,clear:_t||ei}}o(fi,"createTimeoutWrapper");var xn=.25,mi=500,er=20,Wi=6,tr=2,Ki=4,Ei=2,k=1,Ue="eventsDiscarded",Xe="overrideInstrumentationKey",dt="maxEventRetryAttempts",ct="maxUnloadEventRetryAttempts",Lt="addUnloadCb",Wn=function(yt){(0,R.ne)(_t,yt);function _t(){var Ot=yt.call(this)||this;Ot.identifier="PostChannel",Ot.priority=1011,Ot.version="3.2.8";var ot,Qt=!1,Kt=[],pt=null,nn=!1,Xt=0,Cn=500,yn=0,Jn=1e4,bn={},Nn=be,zt=null,Pt=null,Gt=0,an=0,Rn,Jt,on={},wn,In,cn=-1,Ln,ti=!0,On=!1,Vn=Wi,Tn=tr,Gn,Yt;return(0,S.Z)(_t,Ot,function(Ut,oi){Di(),Ut._getDbgPlgTargets=function(){return[Jt]},Ut.initialize=function(K,ie,de){(0,M.Lm)(ie,function(){return"PostChannel:initialize"},function(){var Be=ie;oi.initialize(K,ie,de);try{var je=!!ie[Lt];Gn=(0,C.jU)((0,B.J)(Ut.identifier),ie.evtNamespace&&ie.evtNamespace());var Qe=Ut._getTelCtx();K.extensionConfig[Ut.identifier]=K.extensionConfig[Ut.identifier]||{},ot=Qe.getExtCfg(Ut.identifier),Yt=fi(ot.setTimeoutOverride,ot.clearTimeoutOverride),ti=!ot.disableOptimizeObj&&(0,U.mJ)(),ki(Be),ot.eventsLimitInMem>0&&(Jn=ot.eventsLimitInMem),ot.immediateEventLimit>0&&(Cn=ot.immediateEventLimit),ot.autoFlushEventsLimit>0&&(wn=ot.autoFlushEventsLimit),(0,J.hj)(ot[dt])&&(Vn=ot[dt]),(0,J.hj)(ot[ct])&&(Tn=ot[ct]),et(),ot.httpXHROverride&&ot.httpXHROverride.sendPOST&&(Rn=ot.httpXHROverride),(0,U.Sn)(K.anonCookieName)&&Jt.addQueryStringParameter("anoncknm",K.anonCookieName),Jt.sendHook=ot.payloadPreprocessor,Jt.sendListener=ot.payloadListener;var Bt=ot.overrideEndpointUrl?ot.overrideEndpointUrl:K.endpointUrl;Ut._notificationManager=ie.getNotifyMgr(),Jt.initialize(Bt,Ut.core,Ut,Rn,ot);var Dt=K.disablePageUnloadEvents||[];(0,C.c9)(zn,Dt,Gn),(0,C.TJ)(zn,Dt,Gn),(0,C.nD)(si,K.disablePageShowEvents,Gn)}catch(Vt){throw Ut.setInitialized(!1),Vt}},function(){return{coreConfig:K,core:ie,extensions:de}})},Ut.processTelemetry=function(K,ie){(0,U.if)(K,Ut.identifier),ie=Ut._getTelCtx(ie);var de=ie.getExtCfg(Ut.identifier),Be=!!ot.disableTelemetry;de&&(Be=Be||!!de.disableTelemetry);var je=K;!Be&&!Qt&&(ot[Xe]&&(je.iKey=ot[Xe]),de&&de[Xe]&&(je.iKey=de[Xe]),ni(je,!0),On?Ii(2,2):Yn()),Ut.processNext(je,ie)},Ut._doTeardown=function(K,ie){Ii(2,2),Qt=!0,Jt.teardown(),(0,C.JA)(null,Gn),(0,C.C9)(null,Gn),(0,C.Yl)(null,Gn),Di()};function ki(K){var ie=K.getWParam;K.getWParam=function(){var de=0;return ot.ignoreMc1Ms0CookieProcessing&&(de=de|2),de|ie()}}o(ki,"_hookWParam");function zn(K){var ie=K||(0,Le.Jj)().event;ie.type!=="beforeunload"&&(On=!0,Jt.setUnloading(On)),Ii(2,2)}o(zn,"_handleUnloadEvents");function si(K){On=!1,Jt.setUnloading(On)}o(si,"_handleShowEvents");function ni(K,ie){if(K.sendAttempt||(K.sendAttempt=0),K.latency||(K.latency=1),K.ext&&K.ext[$e]&&delete K.ext[$e],K.ext&&K.ext[$]&&K.ext[$].id&&delete K.ext[$].id,ti&&(U.if,K.ext=(0,J.Ax)(K.ext),K.baseData&&(K.baseData=(0,J.Ax)(K.baseData)),K.data&&(K.data=(0,J.Ax)(K.data))),K.sync){if(Gt||nn)K.latency=3,K.sync=!1;else if(Jt){ti&&(K=(0,J.Ax)(K)),Jt.sendSynchronousBatch(ce.create(K.iKey,[K]),K.sync===!0?1:K.sync,3);return}}var de=K.latency,Be=yn,je=Jn;de===4&&(Be=Xt,je=Cn);var Qe=!1;if(Be<je)Qe=!Li(K,ie);else{var Bt=1,Dt=er;de===4&&(Bt=4,Dt=1),Qe=!0,gi(K.iKey,K.latency,Bt,Dt)&&(Qe=!Li(K,ie))}Qe&&kn(Ue,[K],ke.h.QueueFull)}o(ni,"_addEventToQueues"),Ut.setEventQueueLimits=function(K,ie){Jn=K>0?K:1e4,wn=ie>0?ie:0,et();var de=yn>K;if(!de&&In>0)for(var Be=1;!de&&Be<=3;Be++){var je=on[Be];je&&je.batches&&(0,J.tO)(je.batches,function(Qe){Qe&&Qe.count()>=In&&(de=!0)})}Un(!0,de)},Ut.pause=function(){Si(),nn=!0,Jt.pause()},Ut.resume=function(){nn=!1,Jt.resume(),Yn()},Ut.addResponseHandler=function(K){Jt._responseHandlers.push(K)},Ut._loadTransmitProfiles=function(K){nr(),(0,J.rW)(K,function(ie,de){var Be=de.length;if(Be>=2){var je=Be>2?de[2]:0;if(de.splice(0,Be-2),de[1]<0&&(de[0]=-1),de[1]>0&&de[0]>0){var Qe=de[0]/de[1];de[0]=Math.ceil(Qe)*de[1]}je>=0&&de[1]>=0&&je>de[1]&&(je=de[1]),de.push(je),bn[ie]=de}})},Ut.flush=function(K,ie,de){if(K===void 0&&(K=!0),!nn)if(de=de||1,K)pt==null?(Si(),Ji(1,0,de),pt=Ai(function(){pt=null,li(ie,de)},0)):Kt.push(ie);else{var Be=Si();xi(1,1,de),ie!=null&&ie(),Be&&Yn()}},Ut.setMsaAuthTicket=function(K){Jt.addHeader(Re,K)},Ut.hasEvents=jn,Ut._setTransmitProfile=function(K){Nn!==K&&bn[K]!==void 0&&(Si(),Nn=K,Yn())};function xi(K,ie,de){var Be=Ji(K,ie,de);return Jt.sendQueuedRequests(ie,de),Be}o(xi,"_sendEventsForLatencyAndAbove");function jn(){return yn>0}o(jn,"_hasEvents");function Yn(){if(cn>=0&&Ji(cn,0,Ln)&&Jt.sendQueuedRequests(0,Ln),Xt>0&&!Pt&&!nn){var K=bn[Nn][2];K>=0&&(Pt=Ai(function(){Pt=null,xi(4,0,1),Yn()},K))}var ie=bn[Nn][1];!zt&&!pt&&ie>=0&&!nn&&(jn()?zt=Ai(function(){zt=null,xi(an===0?3:1,0,1),an++,an%=2,Yn()},ie):an=0)}o(Yn,"_scheduleTimer"),Ut._backOffTransmission=function(){Gt<Ki&&(Gt++,Si(),Yn())},Ut._clearBackOff=function(){Gt&&(Gt=0,Si(),Yn())};function Di(){ot=null,Qt=!1,Kt=[],pt=null,nn=!1,Xt=0,Cn=500,yn=0,Jn=1e4,bn={},Nn=be,zt=null,Pt=null,Gt=0,an=0,Rn=null,on={},wn=void 0,In=0,cn=-1,Ln=null,ti=!0,On=!1,Vn=Wi,Tn=tr,Gn=null,Yt=fi(),Jt=new _n(mi,Ei,k,{requeue:yi,send:v,sent:_,drop:H,rspFail:we,oth:ut},Yt),Ni(),Ri(),et()}o(Di,"_initDefaults");function Ai(K,ie){ie===0&&Gt&&(ie=1);var de=1e3;return Gt&&(de=I(Gt-1)),Yt.set(K,ie*de)}o(Ai,"_createTimer");function Si(){return zt!==null?(Yt.clear(zt),zt=null,an=0,!0):!1}o(Si,"_clearScheduledTimer");function Ii(K,ie){Si(),pt&&(Yt.clear(pt),pt=null),nn||xi(1,K,ie)}o(Ii,"_releaseAllQueues");function Ri(){on[4]={batches:[],iKeyMap:{}},on[3]={batches:[],iKeyMap:{}},on[2]={batches:[],iKeyMap:{}},on[1]={batches:[],iKeyMap:{}}}o(Ri,"_clearQueues");function zi(K,ie,de){var Be=on[ie];Be||(ie=1,Be=on[ie]);var je=Be.iKeyMap[K];return!je&&de&&(je=ce.create(K),Be.batches.push(je),Be.iKeyMap[K]=je),je}o(zi,"_getEventBatch");function Un(K,ie){Jt.canSendRequest()&&!Gt&&(wn>0&&yn>wn&&(ie=!0),ie&&pt==null&&Ut.flush(K,null,20))}o(Un,"_performAutoFlush");function Li(K,ie){ti&&(K=(0,J.Ax)(K));var de=K.latency,Be=zi(K.iKey,de,!0);return Be.addEvent(K)?(de!==4?(yn++,ie&&K.sendAttempt===0&&Un(!K.sync,In>0&&Be.count()>=In)):Xt++,!0):!1}o(Li,"_addEventToProperQueue");function gi(K,ie,de,Be){for(;de<=ie;){var je=zi(K,ie,!0);if(je&&je.count()>0){var Qe=je.split(0,Be),Bt=Qe.count();if(Bt>0)return de===4?Xt-=Bt:yn-=Bt,j(Ue,[Qe],ke.h.QueueFull),!0}de++}return un(),!1}o(gi,"_dropEventWithLatencyOrLess");function un(){for(var K=0,ie=0,de=o(function(je){var Qe=on[je];Qe&&Qe.batches&&(0,J.tO)(Qe.batches,function(Bt){je===4?K+=Bt.count():ie+=Bt.count()})},"_loop_1"),Be=1;Be<=4;Be++)de(Be);yn=ie,Xt=K}o(un,"_resetQueueCounts");function Ji(K,ie,de){var Be=!1,je=ie===0;return!je||Jt.canSendRequest()?(0,M.Lm)(Ut.core,function(){return"PostChannel._queueBatches"},function(){for(var Qe=[],Bt=4;Bt>=K;){var Dt=on[Bt];Dt&&Dt.batches&&Dt.batches.length>0&&((0,J.tO)(Dt.batches,function(Vt){Jt.addBatch(Vt)?Be=Be||Vt&&Vt.count()>0:Qe=Qe.concat(Vt.events()),Bt===4?Xt-=Vt.count():yn-=Vt.count()}),Dt.batches=[],Dt.iKeyMap={}),Bt--}Qe.length>0&&kn(Ue,Qe,ke.h.KillSwitch),Be&&cn>=K&&(cn=-1,Ln=0)},function(){return{latency:K,sendType:ie,sendReason:de}},!je):(cn=cn>=0?Math.min(cn,K):K,Ln=Math.max(Ln,de)),Be}o(Ji,"_queueBatches");function li(K,ie){xi(1,0,ie),un(),ci(function(){K&&K(),Kt.length>0?pt=Ai(function(){pt=null,li(Kt.shift(),ie)},0):(pt=null,Yn())})}o(li,"_flushImpl");function ci(K){Jt.isCompletelyIdle()?K():pt=Ai(function(){pt=null,ci(K)},xn)}o(ci,"_waitForIdleManager");function nr(){Si(),Ni(),Nn=be,Yn()}o(nr,"_resetTransmitProfiles");function Ni(){bn={},bn[be]=[2,1,0],bn[Ie]=[6,3,0],bn[he]=[18,9,0]}o(Ni,"_initializeProfiles");function yi(K,ie){var de=[],Be=Vn;On&&(Be=Tn),(0,J.tO)(K,function(je){je&&je.count()>0&&(0,J.tO)(je.events(),function(Qe){Qe&&(Qe.sync&&(Qe.latency=4,Qe.sync=!1),Qe.sendAttempt<Be?((0,U.if)(Qe,Ut.identifier),ni(Qe,!1)):de.push(Qe))})}),de.length>0&&kn(Ue,de,ke.h.NonRetryableStatus),On&&Ii(2,2)}o(yi,"_requeueEvents");function Mn(K,ie){var de=Ut._notificationManager||{},Be=de[K];if(Be)try{Be.apply(de,ie)}catch(je){(0,Pe.kP)(Ut.diagLog(),1,74,K+" notification failed: "+je)}}o(Mn,"_callNotification");function kn(K,ie){for(var de=[],Be=2;Be<arguments.length;Be++)de[Be-2]=arguments[Be];ie&&ie.length>0&&Mn(K,[ie].concat(de))}o(kn,"_notifyEvents");function j(K,ie){for(var de=[],Be=2;Be<arguments.length;Be++)de[Be-2]=arguments[Be];ie&&ie.length>0&&(0,J.tO)(ie,function(je){je&&je.count()>0&&Mn(K,[je.events()].concat(de))})}o(j,"_notifyBatchEvents");function v(K,ie,de){K&&K.length>0&&Mn("eventsSendRequest",[ie>=1e3&&ie<=1999?ie-1e3:0,de!==!0])}o(v,"_sendingEvent");function _(K,ie){j("eventsSent",K,ie),Yn()}o(_,"_eventsSentEvent");function H(K,ie){j(Ue,K,ie>=8e3&&ie<=8999?ie-8e3:ke.h.Unknown)}o(H,"_eventsDropped");function we(K){j(Ue,K,ke.h.NonRetryableStatus),Yn()}o(we,"_eventsResponseFail");function ut(K,ie){j(Ue,K,ke.h.Unknown),Yn()}o(ut,"_otherEvent");function et(){!ot||!ot.disableAutoBatchFlushLimit?In=Math.max(mi*(Ei+1),Jn/6):In=0}o(et,"_setAutoLimits"),(0,J.l_)(Ut,"_setTimeoutOverride",function(){return Yt.set},function(K){Yt=fi(K,Yt.clear)}),(0,J.l_)(Ut,"_clearTimeoutOverride",function(){return Yt.clear},function(K){Yt=fi(Yt.set,K)})}),Ot}return o(_t,"PostChannel"),_t.__ieDyn=1,_t}(F.i);const An=Wn},873:(Rt,l,T)=>{"use strict";T.d(l,{By:()=>S,cc:()=>C});var R=T(708);function S(B){var U={};return(0,R.rW)(B,function(J,Le){U[J]=Le,U[Le]=J}),(0,R._A)(U)}o(S,"createEnumStyle");function M(B){var U={};return objForEachKey(B,function(J,Le){U[J]=J,U[Le]=J}),deepFreeze(U)}o(M,"createEnumMap");function C(B){var U={};return(0,R.rW)(B,function(J,Le){U[J]=Le[1],U[Le[0]]=Le[1]}),(0,R._A)(U)}o(C,"createValueMap")},928:(Rt,l,T)=>{"use strict";T.d(l,{h:()=>S});var R=T(873),S=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},310:(Rt,l,T)=>{"use strict";T.d(l,{X:()=>Me,v:()=>se});var R=T(873),S,M="Failed",C=M+"MonitorAjax",B="Track",U="Start",J="Stop",Le="Event",ke="AuthContext",Pe="Exception",F="Local",be="Session",Ie="Storage",he="Browser",oe="Cannot",ze="Buffer",X="InstrumentationKey",Me=(0,R.By)({CRITICAL:1,WARNING:2}),se=(0,R.By)((S={},S[he+"DoesNotSupport"+F+Ie]=0,S[he+oe+"Read"+F+Ie]=1,S[he+oe+"Read"+be+Ie]=2,S[he+oe+"Write"+F+Ie]=3,S[he+oe+"Write"+be+Ie]=4,S[he+M+"RemovalFrom"+F+Ie]=5,S[he+M+"RemovalFrom"+be+Ie]=6,S[oe+"SendEmptyTelemetry"]=7,S.ClientPerformanceMathError=8,S["ErrorParsingAI"+be+"Cookie"]=9,S.ErrorPVCalc=10,S[Pe+"WhileLoggingError"]=11,S[M+"AddingTelemetryTo"+ze]=12,S[C+"Abort"]=13,S[C+"Dur"]=14,S[C+"Open"]=15,S[C+"RSC"]=16,S[C+"Send"]=17,S[C+"GetCorrelationHeader"]=18,S[M+"ToAddHandlerForOnBeforeUnload"]=19,S[M+"ToSendQueuedTelemetry"]=20,S[M+"ToReportDataLoss"]=21,S["Flush"+M]=22,S.MessageLimitPerPVExceeded=23,S.MissingRequiredFieldSpecification=24,S.NavigationTimingNotSupported=25,S.OnError=26,S[be+"RenewalDateIsZero"]=27,S.SenderNotInitialized=28,S[U+B+Le+M]=29,S[J+B+Le+M]=30,S[U+B+M]=31,S[J+B+M]=32,S.TelemetrySampledAndNotSent=33,S[B+Le+M]=34,S[B+Pe+M]=35,S[B+"Metric"+M]=36,S[B+"PV"+M]=37,S[B+"PV"+M+"Calc"]=38,S[B+"Trace"+M]=39,S["Transmission"+M]=40,S[M+"ToSet"+Ie+ze]=41,S[M+"ToRestore"+Ie+ze]=42,S.InvalidBackendResponse=43,S[M+"ToFixDepricatedValues"]=44,S.InvalidDurationValue=45,S.TelemetryEnvelopeInvalid=46,S.CreateEnvelopeError=47,S[oe+"SerializeObject"]=48,S[oe+"SerializeObjectNonSerializable"]=49,S.CircularReferenceDetected=50,S["Clear"+ke+M]=51,S[Pe+"Truncated"]=52,S.IllegalCharsInName=53,S.ItemNotInArray=54,S.MaxAjaxPerPVExceeded=55,S.MessageTruncated=56,S.NameTooLong=57,S.SampleRateOutOfRange=58,S["Set"+ke+M]=59,S["Set"+ke+M+"AccountName"]=60,S.StringValueTooLong=61,S.StartCalledMoreThanOnce=62,S.StopCalledWithoutStart=63,S["TelemetryInitializer"+M]=64,S.TrackArgumentsNotSpecified=65,S.UrlTooLong=66,S[be+Ie+ze+"Full"]=67,S[oe+"AccessCookie"]=68,S.IdTooLong=69,S.InvalidEvent=70,S[C+"SetRequestHeader"]=71,S["Send"+he+"InfoOnUserInit"]=72,S["Plugin"+Pe]=73,S["Notification"+Pe]=74,S.SnippetScriptLoadFailure=99,S["Invalid"+X]=100,S[oe+"ParseAiBlobValue"]=101,S.InvalidContentBlob=102,S[B+"PageAction"+Le+M]=103,S[M+"AddingCustomDefinedRequestContext"]=104,S["InMemory"+Ie+ze+"Full"]=105,S[X+"Deprecation"]=106,S))},121:(Rt,l,T)=>{"use strict";T.d(l,{F:()=>Pe});var R=T(88),S=T(679),M=T(96),C=T(900),B=T(18),U=T(708),J=T(41),Le=T(880),ke=T(288),Pe=function(F){(0,R.ne)(be,F);function be(){var Ie=F.call(this)||this;return(0,S.Z)(be,Ie,function(he,oe){he[M.VL]=function(Me,se,Q,z){oe[M.VL](Me,se,Q||new B.AQ(Me),z||new Le.f(Me))},he.track=function(Me){(0,ke.Lm)(he[J.kl](),function(){return"AppInsightsCore:track"},function(){Me===null&&(X(Me),(0,U._y)("Invalid telemetry item")),ze(Me),oe.track(Me)},function(){return{item:Me}},!Me.sync)};function ze(Me){(0,U.le)(Me[M.I])&&(X(Me),(0,U._y)("telemetry name required"))}o(ze,"_validateTelemetryItem");function X(Me){var se=he[M.tb]();se&&se[J.$F]([Me],2)}o(X,"_notifyInvalidEvent")}),Ie}return o(be,"AppInsightsCore"),be.__ieDyn=1,be}(C.A)},900:(Rt,l,T)=>{"use strict";T.d(l,{A:()=>Oe});var R=T(88),S=T(679),M=T(91),C=T(96),B=T(708),U=T(41),J=T(589),Le=T(833),ke=500,Pe="Channel has invalid priority - ";function F(re,L,Se){L&&(0,B.kJ)(L)&&L[C.R5]>0&&(L=L.sort(function(Re,Ee){return Re[U.yi]-Ee[U.yi]}),(0,B.tO)(L,function(Re){Re[U.yi]<ke&&(0,B._y)(Pe+Re[C.pZ])}),re[C.MW]({queue:(0,B.FL)(L),chain:(0,J.jV)(L,Se[C.TC],Se)}))}o(F,"_addChannelQueue");function be(re,L){function Se(){return(0,J.CD)(null,L[C.TC],L,null)}o(Se,"_getTelCtx");function Re($,pe,Y,ce){var Ge=$?$[C.R5]+1:1;function at(){Ge--,Ge===0&&(ce&&ce(),ce=null)}o(at,"_runChainOnComplete"),Ge>0&&(0,B.tO)($,function(ne){if(ne&&ne.queue[C.R5]>0){var ge=ne.chain,ee=pe[C.zV](ge);ee[C.Fc](at),Y(ee)}else Ge--}),at()}o(Re,"_processChannelQueue");function Ee($,pe){var Y=pe||{reason:0};return Re(re,$,function(ce){ce[C.uL](Y)},function(){$[C.uL](Y)}),!0}o(Ee,"_doUpdate");function qe($,pe){var Y=pe||{reason:0,isAsync:!1};return Re(re,$,function(ce){ce[C.uL](Y)},function(){$[C.uL](Y),it=!1}),!0}o(qe,"_doTeardown");function Tt($){var pe=null;return re&&re[C.R5]>0&&(0,B.tO)(re,function(Y){if(Y&&Y.queue[C.R5]>0&&((0,B.tO)(Y.queue,function(ce){if(ce[C.pZ]===$)return pe=ce,-1}),pe))return-1}),pe}o(Tt,"_getChannel");var it=!1,$e={identifier:"ChannelControllerPlugin",priority:ke,initialize:function($,pe,Y,ce){it=!0,(0,B.tO)(re,function(Ge){Ge&&Ge.queue[C.R5]>0&&(0,Le.bP)((0,J.CD)(Ge.chain,$,pe),Y)})},isInitialized:function(){return it},processTelemetry:function($,pe){Re(re,pe||Se(),function(Y){Y[C.uL]($)},function(){pe[C.uL]($)})},update:Ee,pause:function(){Re(re,Se(),function($){$.iterate(function(pe){pe.pause&&pe.pause()})},null)},resume:function(){Re(re,Se(),function($){$.iterate(function(pe){pe.resume&&pe.resume()})},null)},teardown:qe,getChannel:Tt,flush:function($,pe,Y,ce){var Ge=1,at=!1,ne=null;ce=ce||5e3;function ge(){Ge--,at&&Ge===0&&(ne&&(clearTimeout(ne),ne=null),pe&&pe(at),pe=null)}return o(ge,"doCallback"),Re(re,Se(),function(ee){ee.iterate(function(W){if(W[C.kL]){Ge++;var ye=!1;W[C.kL]($,function(){ye=!0,ge()},Y)||ye||($&&ne==null?ne=setTimeout(function(){ne=null,ge()},ce):ge())}})},function(){at=!0,ge()}),!0},_setQueue:function($){re=$}};return $e}o(be,"createChannelControllerPlugin");function Ie(re,L,Se){var Re=[];if(re&&(0,B.tO)(re,function(qe){return F(Re,qe,Se)}),L){var Ee=[];(0,B.tO)(L,function(qe){qe[U.yi]>ke&&Ee[C.MW](qe)}),F(Re,Ee,Se)}return Re}o(Ie,"createChannelQueues");var he=T(242),oe=T(883),ze=T(158),X=T(18),Me=T(288),se=T(63),Q=T(630),z=function(re){(0,R.ne)(L,re);function L(){var Se=re.call(this)||this;Se.identifier="TelemetryInitializerPlugin",Se.priority=199;var Re,Ee;qe(),(0,S.Z)(L,Se,function(Tt,it){Tt.addTelemetryInitializer=function($e){var $={id:Re++,fn:$e};Ee[C.MW]($);var pe={remove:function(){(0,B.tO)(Ee,function(Y,ce){if(Y.id===$.id)return Ee[C.cb](ce,1),-1})}};return pe},Tt[U.hL]=function($e,$){for(var pe=!1,Y=Ee[C.R5],ce=0;ce<Y;++ce){var Ge=Ee[ce];if(Ge)try{if(Ge.fn[C.ZV](null,[$e])===!1){pe=!0;break}}catch(at){(0,X.kP)($[C.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(at),{exception:(0,Q.eU)(at)},!0)}}pe||Tt[C.uL]($e,$)},Tt[C.F3]=function(){qe()}});function qe(){Re=0,Ee=[]}return o(qe,"_initDefaults"),Se}return o(L,"TelemetryInitializerPlugin"),L.__ieDyn=1,L}(se.i),Z=T(790),ae="Plugins must provide initialize method",Ke="_notificationManager",Fe="SDK is still unloading...",We="SDK is not initialized",Je={loggingLevelConsole:1};function q(re,L){return new Me.Jk(L)}o(q,"_createPerfManager");function E(re,L,Se){var Re,Ee=[],qe={};return(0,B.tO)(Se,function(Tt){((0,B.le)(Tt)||(0,B.le)(Tt[C.VL]))&&(0,B._y)(ae);var it=Tt[U.yi],$e=Tt[C.pZ];Tt&&it&&((0,B.le)(qe[it])?qe[it]=$e:(0,X.jV)(re,"Two extensions have same priority #"+it+" - "+qe[it]+", "+$e)),(!it||it<L)&&Ee[C.MW](Tt)}),Re={all:Se},Re[U.oV]=Ee,Re}o(E,"_validateExtensions");function xe(re,L){var Se=!1;return(0,B.tO)(L,function(Re){if(Re===re)return Se=!0,-1}),Se}o(xe,"_isPluginPresent");function He(){var re;return(0,M.pu)((re={},re[C.g]=function(L){},re[C.n7]=function(L){},re[U.uC]=function(L){},re[U.$F]=function(L,Se){},re[U.f_]=function(L,Se){},re))}o(He,"_createDummyNotificationManager");var Oe=function(){function re(){var L,Se,Re,Ee,qe,Tt,it,$e,$,pe,Y,ce,Ge,at,ne,ge,ee,W,ye,fe,vt=0;(0,S.Z)(re,this,function(Ce){D(),Ce[C.yl]=function(){return Se},Ce[C.VL]=function(Ye,Et,jt,Mt){at&&(0,B._y)(Fe),Ce[C.yl]()&&(0,B._y)("Core should not be initialized more than once"),L=Ye||{},Ce[C.TC]=L,(0,B.le)(Ye[C.p$])&&(0,B._y)("Please provide instrumentation key"),Ee=Mt,Ce[Ke]=Mt,Ct(),dn(),pn(),jt&&(Ce[C.eZ]=jt);var en=(0,B.qK)(L,U.js,[]);$=[],$[C.MW].apply($,(0,R.$h)((0,R.$h)([],Et,!1),en,!1)),ce=(0,B.qK)(L,U.Z,[]),Ne(null),(!Ge||Ge[C.R5]===0)&&(0,B._y)("No "+U.Z+" available"),Se=!0,Ce.releaseQueue()},Ce.getTransmissionControls=function(){var Ye=[];return Ge&&(0,B.tO)(Ge,function(Et){Ye[C.MW](Et.queue)}),(0,B.FL)(Ye)},Ce.track=function(Ye){Ye.iKey=Ye.iKey||L[C.p$],Ye[C.Z_]=Ye[C.Z_]||(0,B.Y6)(new Date),Ye.ver=Ye.ver||"4.0",!at&&Ce[C.yl]()?I()[C.uL](Ye):Re[C.MW](Ye)},Ce[C.SD]=I,Ce[C.tb]=function(){return Ee||(Ee=He(),Ce[Ke]=Ee),Ee},Ce[C.g]=function(Ye){Ee&&Ee[C.g](Ye)},Ce[C.n7]=function(Ye){Ee&&Ee[C.n7](Ye)},Ce.getCookieMgr=function(){return it||(it=(0,he.Nz)(L,Ce[C.eZ])),it},Ce.setCookieMgr=function(Ye){it=Ye},Ce[U.kl]=function(){if(!qe&&!Tt&&(0,B.v4)(L.enablePerfMgr)){var Ye=(0,B.v4)(L[U.DN]);(0,B.mf)(Ye)&&(Tt=Ye(Ce,Ce[C.tb]()))}return qe||Tt||(0,Me.j5)()},Ce.setPerfMgr=function(Ye){qe=Ye},Ce.eventCnt=function(){return Re[C.R5]},Ce.releaseQueue=function(){if(Se&&Re[C.R5]>0){var Ye=Re;Re=[],(0,B.tO)(Ye,function(Et){I()[C.uL](Et)})}},Ce.pollInternalLogs=function(Ye){ge=Ye||null;var Et=(0,B.v4)(L.diagnosticLogInterval);return(!Et||!(Et>0))&&(Et=1e4),vt&&clearInterval(vt),vt=setInterval(function(){st()},Et),vt},Ce[C.LS]=function(){vt&&(clearInterval(vt),vt=0,st())},(0,B.Vb)(Ce,function(){return ne},["addTelemetryInitializer"]),Ce.unload=function(Ye,Et,jt){var Mt;Ye===void 0&&(Ye=!0),Se||(0,B._y)(We),at&&(0,B._y)(Fe);var en=(Mt={reason:50},Mt[C.d]=Ye,Mt.flushComplete=!1,Mt),rt=(0,J.Bt)(ht(),Ce);rt[C.Fc](function(){D(),Et&&Et(en)},Ce);function tn(sn){en.flushComplete=sn,at=!0,W.run(rt,en),Ce[C.LS](),rt[C.uL](en)}o(tn,"_doUnload"),At(Ye,tn,6,jt)||tn(!1)},Ce[C.TO]=St,Ce.addPlugin=function(Ye,Et,jt,Mt){if(!Ye){Mt&&Mt(!1),$n(ae);return}var en=St(Ye[C.pZ]);if(en&&!Et){Mt&&Mt(!1),$n("Plugin ["+Ye[C.pZ]+"] is already loaded!");return}var rt={reason:16};function tn(Zt){$[C.MW](Ye),rt.added=[Ye],Ne(rt),Mt&&Mt(!0)}if(o(tn,"_addPlugin"),en){var sn=[en.plugin],ln={reason:2,isAsync:!!jt};kt(sn,ln,function(Zt){Zt?(rt.removed=sn,rt.reason|=32,tn(!0)):Mt&&Mt(!1)})}else tn(!1)},Ce.evtNamespace=function(){return ee},Ce[C.kL]=At,Ce.getTraceCtx=function(Ye){return fe||(fe=(0,Le.Yn)()),fe},Ce.setTraceCtx=function(Ye){fe=Ye||null},(0,B.Oi)(Ce,"addUnloadCb",function(){return W},"add");function D(){Se=!1,L=(0,B.mm)(!0,{},Je),Ce[C.TC]=L,Ce[C.eZ]=new X.AQ(L),Ce[C.iC]=[],ne=new z,Re=[],Ee=null,qe=null,Tt=null,it=null,$e=null,pe=null,$=[],Y=null,ce=null,Ge=null,at=!1,ge=null,ee=(0,oe.J)("AIBaseCore",!0),W=(0,Z.Y)(),fe=null}o(D,"_initDefaults");function I(){return(0,J.CD)(ht(),L,Ce)}o(I,"_createTelCtx");function Ne(Ye){var Et=E(Ce[C.eZ],ke,$);pe=Et[U.oV],$e=null;var jt=Et.all;if(Ge=(0,B.FL)(Ie(ce,jt,Ce)),Y){var Mt=(0,B.UA)(jt,Y);Mt!==-1&&jt[C.cb](Mt,1),Mt=(0,B.UA)(pe,Y),Mt!==-1&&pe[C.cb](Mt,1),Y._setQueue(Ge)}else Y=be(Ge,Ce);jt[C.MW](Y),pe[C.MW](Y),Ce[C.iC]=(0,Le.AA)(jt),Y[C.VL](L,Ce,jt),(0,Le.bP)(I(),jt),Ce[C.iC]=(0,B.FL)((0,Le.AA)(pe||[])).slice(),Ye&&Dn(Ye)}o(Ne,"_initPluginChain");function St(Ye){var Et,jt=null,Mt=null;return(0,B.tO)(Ce[C.iC],function(en){if(en[C.pZ]===Ye&&en!==Y&&en!==ne)return Mt=en,-1}),!Mt&&Y&&(Mt=Y.getChannel(Ye)),Mt&&(jt=(Et={plugin:Mt},Et[C.$h]=function(en){(0,Le.OY)(Mt)[U.mE]=!en},Et.isEnabled=function(){var en=(0,Le.OY)(Mt);return!en[C.fi]&&!en[U.mE]},Et.remove=function(en,rt){var tn;en===void 0&&(en=!0);var sn=[Mt],ln=(tn={reason:1},tn[C.d]=en,tn);kt(sn,ln,function(Zt){Zt&&Ne({reason:32,removed:sn}),rt&&rt(Zt)})},Et)),jt}o(St,"_getPlugin");function ht(){if(!$e){var Ye=(pe||[]).slice();(0,B.UA)(Ye,ne)===-1&&Ye[C.MW](ne),$e=(0,J.jV)((0,Le.AA)(Ye),L,Ce)}return $e}o(ht,"_getPluginChain");function kt(Ye,Et,jt){if(Ye&&Ye[C.R5]>0){var Mt=(0,J.jV)(Ye,L,Ce),en=(0,J.Bt)(Mt,Ce);en[C.Fc](function(){var rt=!1,tn=[];(0,B.tO)($,function(ln,Zt){xe(ln,Ye)?rt=!0:tn[C.MW](ln)}),$=tn;var sn=[];ce&&((0,B.tO)(ce,function(ln,Zt){var _n=[];(0,B.tO)(ln,function(Fn){xe(Fn,Ye)?rt=!0:_n[C.MW](Fn)}),sn[C.MW](_n)}),ce=sn),jt&&jt(rt)}),en[C.uL](Et)}else jt(!1)}o(kt,"_removePlugins");function st(){var Ye=Ce[C.eZ]?Ce[C.eZ].queue:[];Ye&&((0,B.tO)(Ye,function(Et){var jt,Mt=(jt={},jt[C.I]=ge||"InternalMessageId: "+Et[C.Gc],jt.iKey=(0,B.v4)(L[C.p$]),jt.time=(0,B.Y6)(new Date),jt.baseType=X.lQ.dataType,jt.baseData={message:Et[C.gU]},jt);Ce.track(Mt)}),Ye[C.R5]=0)}o(st,"_flushInternalLogs");function At(Ye,Et,jt,Mt){return Y?Y[C.kL](Ye,Et,jt||6,Mt):(Et&&Et(!1),!0)}o(At,"_flushChannels");function Ct(){var Ye=(0,B.v4)(L.disableDbgExt);Ye===!0&&ye&&(Ee[C.n7](ye),ye=null),Ee&&!ye&&Ye!==!0&&(ye=(0,ze.p)(L),Ee[C.g](ye))}o(Ct,"_initDebugListener");function dn(){var Ye=(0,B.v4)(L.enablePerfMgr);!Ye&&Tt&&(Tt=null),Ye&&(0,B.qK)(L,U.DN,q)}o(dn,"_initPerfManager");function pn(){var Ye=(0,B.qK)(L,U.Zh,{});Ye.NotificationManager=Ee}o(pn,"_initExtConfig");function Dn(Ye){var Et=(0,J.xy)(ht(),Ce);(!Ce._updateHook||Ce._updateHook(Et,Ye)!==!0)&&Et[C.uL](Ye)}o(Dn,"_doUpdate");function $n(Ye){var Et=Ce[C.eZ];Et?(0,X.kP)(Et,2,73,Ye):(0,B._y)(Ye)}o($n,"_logOrThrowError")})}return o(re,"BaseCore"),re.__ieDyn=1,re}()},63:(Rt,l,T)=>{"use strict";T.d(l,{i:()=>Le});var R=T(679),S=T(96),M=T(708),C=T(41),B=T(589),U=T(790),J="getPlugin",Le=function(){function ke(){var Pe=this,F,be,Ie,he,oe;Me(),(0,R.Z)(ke,Pe,function(se){se[S.VL]=function(Q,z,Z,ae){X(Q,z,ae),F=!0},se[S.fi]=function(Q,z){var Z,ae=se[C.oV];if(!ae||Q&&ae!==Q[C.oV]())return;var Ke,Fe=!1,We=Q||(0,B.Bt)(null,ae,Ie&&Ie[J]?Ie[J]():Ie),Je=z||(Z={reason:0},Z[S.d]=!1,Z);function q(){if(!Fe){Fe=!0,he.run(We,z);var E=oe;oe=[],(0,M.tO)(E,function(xe){xe.rm()}),Ke===!0&&We[S.uL](Je),Me()}}return o(q,"_unloadCallback"),!se[S.F3]||se[S.F3](We,Je,q)!==!0?q():Ke=!0,Ke},se[S.Tu]=function(Q,z){var Z=se[C.oV];if(!Z||Q&&Z!==Q[C.oV]())return;var ae,Ke=!1,Fe=Q||(0,B.xy)(null,Z,Ie&&Ie[J]?Ie[J]():Ie),We=z||{reason:0};function Je(){Ke||(Ke=!0,X(Fe.getCfg(),Fe.core(),Fe[S.W2]()))}return o(Je,"_updateCallback"),!se._doUpdate||se._doUpdate(Fe,We,Je)!==!0?Je():ae=!0,ae},se._addHook=function(Q){Q&&((0,M.kJ)(Q)?oe=oe.concat(Q):oe[S.MW](Q))},(0,M.Oi)(se,"_addUnloadCb",function(){return he},"add")}),Pe[S.mc]=function(se){return ze(se)[S.mc]()},Pe[S.yl]=function(){return F},Pe.setInitialized=function(se){F=se},Pe[S.Jd]=function(se){Ie=se},Pe[S.uL]=function(se,Q){Q?Q[S.uL](se):Ie&&(0,M.mf)(Ie[C.hL])&&Ie[C.hL](se,null)},Pe._getTelCtx=ze;function ze(se){se===void 0&&(se=null);var Q=se;if(!Q){var z=be||(0,B.CD)(null,{},Pe[C.oV]);Ie&&Ie[J]?Q=z[S.zV](null,Ie[J]):Q=z[S.zV](null,Ie)}return Q}o(ze,"_getTelCtx");function X(se,Q,z){se&&(0,M.sO)(se,C.Zh,[],null,M.le),!z&&Q&&(z=Q[S.SD]()[S.W2]());var Z=Ie;Ie&&Ie[J]&&(Z=Ie[J]()),Pe[C.oV]=Q,be=(0,B.CD)(z,se,Q,Z)}o(X,"_setDefaults");function Me(){F=!1,Pe[C.oV]=null,be=null,Ie=null,oe=[],he=(0,U.Y)()}o(Me,"_initDefaults")}return o(ke,"BaseTelemetryPlugin"),ke.__ieDyn=1,ke}()},242:(Rt,l,T)=>{"use strict";T.d(l,{kj:()=>Q,JP:()=>Fe,Nz:()=>We,p7:()=>Je,UY:()=>re});var R=T(96),S=T(18),M=T(630),C=T(708),B=T(41),U="toGMTString",J="toUTCString",Le="cookie",ke="expires",Pe="enabled",F="isCookieUseDisabled",be="disableCookiesUsage",Ie="_ckMgr",he=null,oe=null,ze=null,X=(0,M.Me)(),Me={},se={};function Q(L,Se){var Re=We[Ie]||se[Ie];return Re||(Re=We[Ie]=We(L,Se),se[Ie]=Re),Re}o(Q,"_gblCookieMgr");function z(L){return L?L.isEnabled():!0}o(z,"_isMgrEnabled");function Z(L){var Se=L[R.Lk]=L[R.Lk]||{};if((0,C.sO)(Se,"domain",L.cookieDomain,C.BX,C.le),(0,C.sO)(Se,"path",L.cookiePath||"/",null,C.le),(0,C.le)(Se[Pe])){var Re=void 0;(0,C.o8)(L[F])||(Re=!L[F]),(0,C.o8)(L[be])||(Re=!L[be]),Se[Pe]=Re}return Se}o(Z,"_createCookieMgrConfig");function ae(L,Se){return Se&&L&&(0,C.kJ)(L.ignoreCookies)?L.ignoreCookies[R.ou](Se)!==-1:!1}o(ae,"_isIgnoredCookie");function Ke(L,Se){return Se&&L&&(0,C.kJ)(L.blockedCookies)&&L.blockedCookies[R.ou](Se)!==-1?!0:ae(L,Se)}o(Ke,"_isBlockedCookie");function Fe(L,Se){var Re;if(L)Re=L.getCookieMgr();else if(Se){var Ee=Se[R.Lk];Ee[Ie]?Re=Ee[Ie]:Re=We(Se)}return Re||(Re=Q(Se,(L||{})[R.eZ])),Re}o(Fe,"safeGetCookieMgr");function We(L,Se){var Re,Ee=Z(L||se),qe=Ee.path||"/",Tt=Ee.domain,it=Ee[Pe]!==!1,$e=(Re={isEnabled:function(){var $=it&&Je(Se),pe=se[Ie];return $&&pe&&$e!==pe&&($=z(pe)),$}},Re[R.$h]=function($){it=$!==!1},Re.set=function($,pe,Y,ce,Ge){var at=!1;if(z($e)&&!Ke(Ee,$)){var ne={},ge=(0,C.nd)(pe||B.qS),ee=ge[R.ou](";");if(ee!==-1&&(ge=(0,C.nd)(pe[R.zc](0,ee)),ne=q(pe[R.zc](ee+1))),(0,C.sO)(ne,"domain",ce||Tt,C.fQ,C.o8),!(0,C.le)(Y)){var W=(0,M.w1)();if((0,C.o8)(ne[ke])){var ye=(0,C.m6)(),fe=ye+Y*1e3;if(fe>0){var vt=new Date;vt.setTime(fe),(0,C.sO)(ne,ke,E(vt,W?U:J)||E(vt,W?U:J)||B.qS,C.fQ)}}W||(0,C.sO)(ne,"max-age",B.qS+Y,null,C.o8)}var Ce=(0,M.k$)();Ce&&Ce.protocol==="https:"&&((0,C.sO)(ne,"secure",null,null,C.o8),oe===null&&(oe=!re(((0,M.jW)()||{})[R.qV])),oe&&(0,C.sO)(ne,"SameSite","None",null,C.o8)),(0,C.sO)(ne,"path",Ge||qe,null,C.o8);var D=Ee.setCookie||Oe;D($,xe(ge,ne)),at=!0}return at},Re.get=function($){var pe=B.qS;return z($e)&&!ae(Ee,$)&&(pe=(Ee.getCookie||He)($)),pe},Re.del=function($,pe){var Y=!1;return z($e)&&(Y=$e.purge($,pe)),Y},Re.purge=function($,pe){var Y,ce=!1;if(Je(Se)){var Ge=(Y={},Y.path=pe||"/",Y[ke]="Thu, 01 Jan 1970 00:00:01 GMT",Y);(0,M.w1)()||(Ge["max-age"]="0");var at=Ee.delCookie||Oe;at($,xe(B.qS,Ge)),ce=!0}return ce},Re);return $e[Ie]=$e,$e}o(We,"createCookieMgr");function Je(L){if(he===null){he=!1;try{var Se=X||{};he=Se[Le]!==void 0}catch(Re){(0,S.kP)(L,2,68,"Cannot access document.cookie - "+(0,C.jj)(Re),{exception:(0,M.eU)(Re)})}}return he}o(Je,"areCookiesSupported");function q(L){var Se={};if(L&&L[R.R5]){var Re=(0,C.nd)(L)[R.w6](";");(0,C.tO)(Re,function(Ee){if(Ee=(0,C.nd)(Ee||B.qS),Ee){var qe=Ee[R.ou]("=");qe===-1?Se[Ee]=null:Se[(0,C.nd)(Ee[R.zc](0,qe))]=(0,C.nd)(Ee[R.zc](qe+1))}})}return Se}o(q,"_extractParts");function E(L,Se){return(0,C.mf)(L[Se])?L[Se]():null}o(E,"_formatDate");function xe(L,Se){var Re=L||B.qS;return(0,C.rW)(Se,function(Ee,qe){Re+="; "+Ee+((0,C.le)(qe)?B.qS:"="+qe)}),Re}o(xe,"_formatCookieValue");function He(L){var Se=B.qS;if(X){var Re=X[Le]||B.qS;ze!==Re&&(Me=q(Re),ze=Re),Se=(0,C.nd)(Me[L]||B.qS)}return Se}o(He,"_getCookieValue");function Oe(L,Se){X&&(X[Le]=L+"="+Se)}o(Oe,"_setCookieValue");function re(L){return(0,C.HD)(L)?!!((0,C._Q)(L,"CPU iPhone OS 12")||(0,C._Q)(L,"iPad; CPU OS 12")||(0,C._Q)(L,"Macintosh; Intel Mac OS X 10_14")&&(0,C._Q)(L,"Version/")&&(0,C._Q)(L,"Safari")||(0,C._Q)(L,"Macintosh; Intel Mac OS X 10_14")&&(0,C.Id)(L,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,C._Q)(L,"Chrome/5")||(0,C._Q)(L,"Chrome/6")||(0,C._Q)(L,"UnrealEngine")&&!(0,C._Q)(L,"Chrome")||(0,C._Q)(L,"UCBrowser/12")||(0,C._Q)(L,"UCBrowser/11")):!1}o(re,"uaDisallowsSameSiteNone")},843:(Rt,l,T)=>{"use strict";T.d(l,{GW:()=>be,Jj:()=>Ie,DO:()=>oe,Tr:()=>ze,zB:()=>Me,oF:()=>Q,vn:()=>z,ej:()=>Z,d8:()=>ae,kT:()=>Ke});var R=T(91),S=T(96),M=T(242),C=T(630),B=T(869),U=T(708),J=T(41),Le=T(878),ke=null,Pe,F=null;function be(){var Fe=oe();return Fe[S.zc](0,8)+"-"+Fe[S.zc](8,12)+"-"+Fe[S.zc](12,16)+"-"+Fe[S.zc](16,20)+"-"+Fe[S.zc](20)}o(be,"newGuid");function Ie(){var Fe=(0,C.r)();return Fe&&Fe.now?Fe.now():(0,U.m6)()}o(Ie,"perfNow");function he(Fe,We){if(Fe&&We){var Je=Fe[_DYN_LENGTH],q=Je-We[_DYN_LENGTH];return Fe[_DYN_SUBSTRING](q>=0?q:0,Je)===We}return!1}o(he,"strEndsWith");function oe(){for(var Fe=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],We=J.qS,Je,q=0;q<4;q++)Je=(0,Le._l)(),We+=Fe[Je&15]+Fe[Je>>4&15]+Fe[Je>>8&15]+Fe[Je>>12&15]+Fe[Je>>16&15]+Fe[Je>>20&15]+Fe[Je>>24&15]+Fe[Je>>28&15];var E=Fe[8+((0,Le._l)()&3)|0];return We[S.Jn](0,8)+We[S.Jn](9,4)+"4"+We[S.Jn](13,3)+E+We[S.Jn](16,3)+We[S.Jn](19,12)}o(oe,"generateW3CId");var ze={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:R.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:B.Ib,dateNow:U.m6,isIE:C.w1,disableCookies:Q,newGuid:be,perfNow:Ie,newId:Le.pZ,randomValue:Le.az,random32:Le._l,mwcRandomSeed:Le.CN,mwcRandom32:Le.F6,generateW3CId:oe},X=/[xy]/g,Me={Attach:B.pZ,AttachEvent:B.pZ,Detach:B.pD,DetachEvent:B.pD};function se(Fe,We){var Je=(0,M.kj)(Fe,We),q=ze._canUseCookies;return ke===null&&(ke=[],Pe=q,(0,U.l_)(ze,"_canUseCookies",function(){return Pe},function(E){Pe=E,(0,U.tO)(ke,function(xe){xe[S.$h](E)})})),(0,U.UA)(ke,Je)===-1&&ke[S.MW](Je),(0,U.jn)(q)&&Je[S.$h](q),(0,U.jn)(Pe)&&Je[S.$h](Pe),Je}o(se,"_legacyCookieMgr");function Q(){se()[S.$h](!1)}o(Q,"disableCookies");function z(Fe){return se(null,Fe).isEnabled()}o(z,"canUseCookies");function Z(Fe,We){return se(null,Fe).get(We)}o(Z,"getCookie");function ae(Fe,We,Je,q){se(null,Fe).set(We,Je,null,q)}o(ae,"setCookie");function Ke(Fe,We){return se(null,Fe).del(We)}o(Ke,"deleteCookie")},883:(Rt,l,T)=>{"use strict";T.d(l,{J:()=>Ie,K:()=>he});var R=T(392),S=T(96),M=T(708),C=T(41),B=T(878),U=R.RJ,J="2.8.9",Le="."+(0,B.pZ)(6),ke=0;function Pe(oe,ze,X){if(U)try{return U(oe,ze,{value:X,enumerable:!1,configurable:!0}),!0}catch(Me){}return!1}o(Pe,"_createAccessor");function F(oe){return oe[S.xv]===1||oe[S.xv]===9||!+oe[S.xv]}o(F,"_canAcceptData");function be(oe,ze){var X=ze[oe.id];if(!X){X={};try{F(ze)&&(Pe(ze,oe.id,X)||(ze[oe.id]=X))}catch(Me){}}return X}o(be,"_getCache");function Ie(oe,ze){return ze===void 0&&(ze=!1),(0,M.Gf)(oe+ke+++(ze?"."+J:C.qS)+Le)}o(Ie,"createUniqueNamespace");function he(oe){var ze={id:Ie("_aiData-"+(oe||C.qS)+"."+J),accept:function(X){return F(X)},get:function(X,Me,se,Q){var z=X[ze.id];return z?z[(0,M.Gf)(Me)]:(Q&&(z=be(ze,X),z[(0,M.Gf)(Me)]=se),se)},kill:function(X,Me){if(X&&X[Me])try{delete X[Me]}catch(se){}}};return ze}o(he,"createElmNodeData")},158:(Rt,l,T)=>{"use strict";T.d(l,{j:()=>Le,p:()=>ke});var R=T(96),S=T(630),M=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],C=null,B;function U(Pe,F){return function(){var be=arguments,Ie=Le(F);if(Ie){var he=Ie.listener;he&&he[Pe]&&he[Pe][R.ZV](he,be)}}}o(U,"_listenerProxyFunc");function J(){var Pe=(0,S.a8)("Microsoft");return Pe&&(C=Pe.ApplicationInsights),C}o(J,"_getExtensionNamespace");function Le(Pe){var F=C;return!F&&Pe.disableDbgExt!==!0&&(F=C||J()),F?F.ChromeDbgExt:null}o(Le,"getDebugExt");function ke(Pe){if(!B){B={};for(var F=0;F<M[R.R5];F++)B[M[F]]=U(M[F],Pe)}return B}o(ke,"getDebugListener")},18:(Rt,l,T)=>{"use strict";T.d(l,{lQ:()=>be,vH:()=>Ie,AQ:()=>he,kP:()=>ze,jV:()=>X,L4:()=>Me});var R=T(679),S=T(96),M=T(158),C=T(630),B=T(708),U=T(41),J="AI (Internal): ",Le="AI: ",ke="AITR_";function Pe(se){return se?'"'+se[S.i7](/\"/g,U.qS)+'"':U.qS}o(Pe,"_sanitizeDiagnosticText");function F(se,Q){var z=(0,C.dr)();if(z){var Z="log";z[se]&&(Z=se),(0,B.mf)(z[Z])&&z[Z](Q)}}o(F,"_logToConsole");var be=function(){function se(Q,z,Z,ae){Z===void 0&&(Z=!1);var Ke=this;Ke[S.Gc]=Q,Ke[S.gU]=(Z?Le:J)+Q;var Fe=U.qS;(0,C.nS)()&&(Fe=(0,C.xA)().stringify(ae));var We=(z?" message:"+Pe(z):U.qS)+(ae?" props:"+Pe(Fe):U.qS);Ke[S.gU]+=We}return o(se,"_InternalLogMessage"),se.dataType="MessageData",se}();function Ie(se,Q){return(se||{})[S.eZ]||new he(Q)}o(Ie,"safeGetLogger");var he=function(){function se(Q){this.identifier="DiagnosticLogger",this.queue=[];var z=0,Z={},ae,Ke,Fe,We;(0,R.Z)(se,this,function(Je){E(Q||{}),Je.consoleLoggingLevel=function(){return ae},Je.telemetryLoggingLevel=function(){return Ke},Je.maxInternalMessageLimit=function(){return Fe},Je[S.Fr]=function(){return We},Je.throwInternal=function(Oe,re,L,Se,Re){Re===void 0&&(Re=!1);var Ee=new be(re,L,Re,Se);if(We)throw(0,C.eU)(Ee);var qe=Oe===1?U.ys:U.cL;if((0,B.o8)(Ee[S.gU]))He("throw"+(Oe===1?"Critical":"Warning"),Ee);else{if(Re){var Tt=+Ee[S.Gc];!Z[Tt]&&ae>=Oe&&(Je[qe](Ee[S.gU]),Z[Tt]=!0)}else ae>=Oe&&Je[qe](Ee[S.gU]);q(Oe,Ee)}},Je[U.cL]=function(Oe){F("warn",Oe),He("warning",Oe)},Je[U.ys]=function(Oe){F("error",Oe),He("error",Oe)},Je.resetInternalMessageCount=function(){z=0,Z={}},Je[S.jk]=q;function q(Oe,re){if(!xe()){var L=!0,Se=ke+re[S.Gc];if(Z[Se]?L=!1:Z[Se]=!0,L&&(Oe<=Ke&&(Je.queue[S.MW](re),z++,He(Oe===1?"error":"warn",re)),z===Fe)){var Re="Internal events throttle limit per PageView reached for this app.",Ee=new be(23,Re,!1);Je.queue[S.MW](Ee),Oe===1?Je[U.ys](Re):Je[U.cL](Re)}}}o(q,"_logInternalMessage");function E(Oe){ae=(0,B.v4)(Oe.loggingLevelConsole,0),Ke=(0,B.v4)(Oe.loggingLevelTelemetry,1),Fe=(0,B.v4)(Oe.maxMessageLimit,25),We=(0,B.v4)(Oe[S.Fr],!1)}o(E,"_setDefaultsFromConfig");function xe(){return z>=Fe}o(xe,"_areInternalMessagesThrottled");function He(Oe,re){var L=(0,M.j)(Q||{});L&&L[S.mc]&&L[S.mc](Oe,re)}o(He,"_debugExtMsg")})}return o(se,"DiagnosticLogger"),se.__ieDyn=1,se}();function oe(se){return se||new he}o(oe,"_getLogger");function ze(se,Q,z,Z,ae,Ke){Ke===void 0&&(Ke=!1),oe(se).throwInternal(Q,z,Z,ae,Ke)}o(ze,"_throwInternal");function X(se,Q){oe(se)[U.cL](Q)}o(X,"_warnToConsole");function Me(se,Q,z){oe(se)[S.jk](Q,z)}o(Me,"_logInternalMessage")},630:(Rt,l,T)=>{"use strict";T.d(l,{dI:()=>Je,a8:()=>q,Ym:()=>E,Jj:()=>xe,Nv:()=>He,Me:()=>Oe,d6:()=>re,jW:()=>L,fE:()=>Se,s1:()=>Re,k$:()=>Ee,dr:()=>qe,r:()=>Tt,nS:()=>it,xA:()=>$e,MX:()=>$,gz:()=>pe,b$:()=>Y,w1:()=>ce,sA:()=>Ge,eU:()=>at,MF:()=>ge,JO:()=>ee,cp:()=>W,Z3:()=>ye,ed:()=>vt,pI:()=>Ce});var R=T(392),S=T(91),M=T(96),C=T(708),B=T(41),U="window",J="document",Le="documentMode",ke="navigator",Pe="history",F="location",be="console",Ie="performance",he="JSON",oe="crypto",ze="msCrypto",X="ReactNative",Me="msie",se="trident/",Q="XMLHttpRequest",z=null,Z=null,ae=!1,Ke=null,Fe=null;function We(D,I){var Ne=!1;if(D){try{if(Ne=I in D,!Ne){var St=D[R.hB];St&&(Ne=I in St)}}catch(kt){}if(!Ne)try{var ht=new D;Ne=!(0,C.o8)(ht[I])}catch(kt){}}return Ne}o(We,"_hasProperty");function Je(D){ae=D}o(Je,"setEnableEnvMocks");function q(D){var I=(0,S.Rd)();return I&&I[D]?I[D]:D===U&&E()?window:null}o(q,"getGlobalInst");function E(){return Boolean(typeof window===R.fK&&window)}o(E,"hasWindow");function xe(){return E()?window:q(U)}o(xe,"getWindow");function He(){return Boolean(typeof document===R.fK&&document)}o(He,"hasDocument");function Oe(){return He()?document:q(J)}o(Oe,"getDocument");function re(){return Boolean(typeof navigator===R.fK&&navigator)}o(re,"hasNavigator");function L(){return re()?navigator:q(ke)}o(L,"getNavigator");function Se(){return Boolean(typeof history===R.fK&&history)}o(Se,"hasHistory");function Re(){return Se()?history:q(Pe)}o(Re,"getHistory");function Ee(D){if(D&&ae){var I=q("__mockLocation");if(I)return I}return typeof location===R.fK&&location?location:q(F)}o(Ee,"getLocation");function qe(){return typeof console!==R.jA?console:q(be)}o(qe,"getConsole");function Tt(){return q(Ie)}o(Tt,"getPerformance");function it(){return Boolean(typeof JSON===R.fK&&JSON||q(he)!==null)}o(it,"hasJSON");function $e(){return it()?JSON||q(he):null}o($e,"getJSON");function $(){return q(oe)}o($,"getCrypto");function pe(){return q(ze)}o(pe,"getMsCrypto");function Y(){var D=L();return D&&D.product?D.product===X:!1}o(Y,"isReactNative");function ce(){var D=L();if(D&&(D[M.qV]!==Z||z===null)){Z=D[M.qV];var I=(Z||B.qS)[M.T1]();z=(0,C._Q)(I,Me)||(0,C._Q)(I,se)}return z}o(ce,"isIE");function Ge(D){if(D===void 0&&(D=null),!D){var I=L()||{};D=I?(I[M.qV]||B.qS)[M.T1]():B.qS}var Ne=(D||B.qS)[M.T1]();if((0,C._Q)(Ne,Me)){var St=Oe()||{};return Math.max(parseInt(Ne[M.w6](Me)[1]),St[Le]||0)}else if((0,C._Q)(Ne,se)){var ht=parseInt(Ne[M.w6](se)[1]);if(ht)return ht+4}return null}o(Ge,"getIEVersion");function at(D){var I=Object[R.hB].toString[M._S](D),Ne=B.qS;return I==="[object Error]"?Ne="{ stack: '"+D.stack+"', message: '"+D.message+"', name: '"+D[M.I]+"'":it()&&(Ne=$e().stringify(D)),I+Ne}o(at,"dumpObj");function ne(D){if(!D||!isString(D)){var I=L()||{};D=I?(I[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var Ne=(D||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return Ne[_DYN_INDEX_OF]("safari")>=0}o(ne,"isSafari");function ge(){return Fe===null&&(Fe=re()&&Boolean(L().sendBeacon)),Fe}o(ge,"isBeaconsSupported");function ee(D){var I=!1;try{I=!!q("fetch");var Ne=q("Request");I&&D&&Ne&&(I=We(Ne,"keepalive"))}catch(St){}return I}o(ee,"isFetchSupported");function W(){return Ke===null&&(Ke=typeof XDomainRequest!==R.jA,Ke&&ye()&&(Ke=Ke&&!We(q(Q),"withCredentials"))),Ke}o(W,"useXDomainRequest");function ye(){var D=!1;try{var I=q(Q);D=!!I}catch(Ne){}return D}o(ye,"isXhrSupported");function fe(D,I){if(D)for(var Ne=0;Ne<D[M.R5];Ne++){var St=D[Ne];if(St[M.I]&&St[M.I]===I)return St}return{}}o(fe,"_getNamedValue");function vt(D){var I=Oe();return I&&D?fe(I.querySelectorAll("meta"),D).content:null}o(vt,"findMetaTag");function Ce(D){var I,Ne=Tt();if(Ne){var St=Ne.getEntriesByType("navigation")||[];I=fe((St[M.R5]>0?St[0]:{}).serverTiming,D).description}return I}o(Ce,"findNamedServerTiming")},869:(Rt,l,T)=>{"use strict";T.d(l,{um:()=>We,jU:()=>Oe,XO:()=>re,QY:()=>L,pZ:()=>Se,pD:()=>Re,Ib:()=>Ee,C1:()=>qe,yw:()=>it,nJ:()=>$e,c9:()=>$,JA:()=>pe,TJ:()=>Y,C9:()=>ce,nD:()=>Ge,Yl:()=>at});var R=T(96),S=T(883),M=T(630),C=T(708),B=T(41),U="on",J="attachEvent",Le="addEventListener",ke="detachEvent",Pe="removeEventListener",F="events",be="visibilitychange",Ie="pagehide",he="pageshow",oe="unload",ze="beforeunload",X=(0,S.J)("aiEvtPageHide"),Me=(0,S.J)("aiEvtPageShow"),se=/\.[\.]+/g,Q=/[\.]+$/,z=1,Z=(0,S.K)("events"),ae=/^([^.]*)(?:\.(.+)|)/;function Ke(ne){return ne&&ne[R.i7]?ne[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,B.qS):ne}o(Ke,"_normalizeNamespace");function Fe(ne,ge){var ee;if(ge){var W=B.qS;(0,C.kJ)(ge)?(W=B.qS,(0,C.tO)(ge,function(fe){fe=Ke(fe),fe&&(fe[0]!=="."&&(fe="."+fe),W+=fe)})):W=Ke(ge),W&&(W[0]!=="."&&(W="."+W),ne=(ne||B.qS)+W)}var ye=ae.exec(ne||B.qS)||[];return ee={},ee[R.P6]=ye[1],ee.ns=(ye[2]||B.qS).replace(se,".").replace(Q,B.qS)[R.w6](".").sort().join("."),ee}o(Fe,"_getEvtNamespace");function We(ne,ge,ee){var W=[],ye=Z.get(ne,F,{},!1),fe=Fe(ge,ee);return(0,C.rW)(ye,function(vt,Ce){(0,C.tO)(Ce,function(D){var I;(!fe[R.P6]||fe[R.P6]===D.evtName[R.P6])&&(!fe.ns||fe.ns===fe.ns)&&W[R.MW]((I={},I[R.I]=D.evtName[R.P6]+(D.evtName.ns?"."+D.evtName.ns:B.qS),I.handler=D[R.Kn],I))})}),W}o(We,"__getRegisteredEvents");function Je(ne,ge,ee){ee===void 0&&(ee=!0);var W=Z.get(ne,F,{},ee),ye=W[ge];return ye||(ye=W[ge]=[]),ye}o(Je,"_getRegisteredEvents");function q(ne,ge,ee,W){ne&&ge&&ge[R.P6]&&(ne[Pe]?ne[Pe](ge[R.P6],ee,W):ne[ke]&&ne[ke](U+ge[R.P6],ee))}o(q,"_doDetach");function E(ne,ge,ee,W){var ye=!1;return ne&&ge&&ge[R.P6]&&ee&&(ne[Le]?(ne[Le](ge[R.P6],ee,W),ye=!0):ne[J]&&(ne[J](U+ge[R.P6],ee),ye=!0)),ye}o(E,"_doAttach");function xe(ne,ge,ee,W){for(var ye=ge[R.R5];ye--;){var fe=ge[ye];fe&&(!ee.ns||ee.ns===fe.evtName.ns)&&(!W||W(fe))&&(q(ne,fe.evtName,fe[R.Kn],fe.capture),ge[R.cb](ye,1))}}o(xe,"_doUnregister");function He(ne,ge,ee){if(ge[R.P6])xe(ne,Je(ne,ge[R.P6]),ge,ee);else{var W=Z.get(ne,F,{});(0,C.rW)(W,function(ye,fe){xe(ne,fe,ge,ee)}),(0,C.FY)(W)[R.R5]===0&&Z.kill(ne,F)}}o(He,"_unregisterEvents");function Oe(ne,ge){var ee;return ge?((0,C.kJ)(ge)?ee=[ne].concat(ge):ee=[ne,ge],ee=Fe("xx",ee).ns[R.w6](".")):ee=ne,ee}o(Oe,"mergeEvtNamespace");function re(ne,ge,ee,W,ye){var fe;ye===void 0&&(ye=!1);var vt=!1;if(ne)try{var Ce=Fe(ge,W);if(vt=E(ne,Ce,ee,ye),vt&&Z.accept(ne)){var D=(fe={guid:z++,evtName:Ce},fe[R.Kn]=ee,fe.capture=ye,fe);Je(ne,Ce.type)[R.MW](D)}}catch(I){}return vt}o(re,"eventOn");function L(ne,ge,ee,W,ye){if(ye===void 0&&(ye=!1),ne)try{var fe=Fe(ge,W),vt=!1;He(ne,fe,function(Ce){return fe.ns&&!ee||Ce[R.Kn]===ee?(vt=!0,!0):!1}),vt||q(ne,fe,ee,ye)}catch(Ce){}}o(L,"eventOff");function Se(ne,ge,ee,W){return W===void 0&&(W=!1),re(ne,ge,ee,null,W)}o(Se,"attachEvent");function Re(ne,ge,ee,W){W===void 0&&(W=!1),L(ne,ge,ee,null,W)}o(Re,"detachEvent");function Ee(ne,ge,ee){var W=!1,ye=(0,M.Jj)();ye&&(W=re(ye,ne,ge,ee),W=re(ye.body,ne,ge,ee)||W);var fe=(0,M.Me)();return fe&&(W=re(fe,ne,ge,ee)||W),W}o(Ee,"addEventHandler");function qe(ne,ge,ee){var W=(0,M.Jj)();W&&(L(W,ne,ge,ee),L(W.body,ne,ge,ee));var ye=(0,M.Me)();ye&&L(ye,ne,ge,ee)}o(qe,"removeEventHandler");function Tt(ne,ge,ee,W){var ye=!1;return ge&&ne&&ne[R.R5]>0&&(0,C.tO)(ne,function(fe){fe&&(!ee||(0,C.UA)(ee,fe)===-1)&&(ye=Ee(fe,ge,W)||ye)}),ye}o(Tt,"_addEventListeners");function it(ne,ge,ee,W){var ye=!1;return ge&&ne&&(0,C.kJ)(ne)&&(ye=Tt(ne,ge,ee,W),!ye&&ee&&ee[R.R5]>0&&(ye=Tt(ne,ge,null,W))),ye}o(it,"addEventListeners");function $e(ne,ge,ee){ne&&(0,C.kJ)(ne)&&(0,C.tO)(ne,function(W){W&&qe(W,ge,ee)})}o($e,"removeEventListeners");function $(ne,ge,ee){return it([ze,oe,Ie],ne,ge,ee)}o($,"addPageUnloadEventListener");function pe(ne,ge){$e([ze,oe,Ie],ne,ge)}o(pe,"removePageUnloadEventListener");function Y(ne,ge,ee){function W(vt){var Ce=(0,M.Me)();ne&&Ce&&Ce.visibilityState==="hidden"&&ne(vt)}o(W,"_handlePageVisibility");var ye=Oe(X,ee),fe=Tt([Ie],ne,ge,ye);return(!ge||(0,C.UA)(ge,be)===-1)&&(fe=Tt([be],W,ge,ye)||fe),!fe&&ge&&(fe=Y(ne,null,ee)),fe}o(Y,"addPageHideEventListener");function ce(ne,ge){var ee=Oe(X,ge);$e([Ie],ne,ee),$e([be],null,ee)}o(ce,"removePageHideEventListener");function Ge(ne,ge,ee){function W(vt){var Ce=(0,M.Me)();ne&&Ce&&Ce.visibilityState==="visible"&&ne(vt)}o(W,"_handlePageVisibility");var ye=Oe(Me,ee),fe=Tt([he],ne,ge,ye);return fe=Tt([be],W,ge,ye)||fe,!fe&&ge&&(fe=Ge(ne,null,ee)),fe}o(Ge,"addPageShowEventListener");function at(ne,ge){var ee=Oe(Me,ge);$e([he],ne,ee),$e([be],null,ee)}o(at,"removePageShowEventListener")},708:(Rt,l,T)=>{"use strict";T.d(l,{Ym:()=>Se,o8:()=>Re,le:()=>qe,BX:()=>Tt,nr:()=>it,Kn:()=>$e,mf:()=>$,Gf:()=>Y,rW:()=>ce,Id:()=>Ge,xe:()=>ne,_Q:()=>ee,J_:()=>W,kJ:()=>ye,VZ:()=>vt,HD:()=>Ce,hj:()=>D,jn:()=>I,Y6:()=>ht,tO:()=>st,UA:()=>At,Mr:()=>Ct,Xz:()=>dn,nd:()=>pn,FY:()=>Ye,l_:()=>Et,_A:()=>Mt,FL:()=>en,Xi:()=>rt,m6:()=>tn,jj:()=>sn,sO:()=>ln,qK:()=>Zt,v4:()=>_n,F:()=>Fn,fQ:()=>ei,_y:()=>fi,cf:()=>mi,Oi:()=>er,Vb:()=>Wi,hl:()=>tr,Ax:()=>Ki,mm:()=>Ei});var R=T(392),S=T(91),M=T(96),C=T(41),B="toISOString",U="endsWith",J="startsWith",Le="indexOf",ke="map",Pe="reduce",F="trim",be="toString",Ie="__proto__",he="constructor",oe=R.RJ,ze=R.Pw.freeze,X=R.Pw.seal,Me=R.Pw.keys,se=String[R.hB],Q=se[F],z=se[U],Z=se[J],ae=Date[R.hB],Ke=ae[B],Fe=Array.isArray,We=R.V4[be],Je=R.CY[be],q=Je[M._S](R.Pw),E=/-([a-z])/g,xe=/([^\w\d_$])/g,He=/^(\d+[\w\d_$])/,Oe=Object.getPrototypeOf;function re(k){if(k){if(Oe)return Oe(k);var Ue=k[Ie]||k[R.hB]||k[he];if(Ue)return Ue}return null}o(re,"_getObjProto");function L(k){return We[_DYN_CALL](k)}o(L,"objToString");function Se(k,Ue){return typeof k===Ue}o(Se,"isTypeof");function Re(k){return k===void 0||typeof k===R.jA}o(Re,"isUndefined");function Ee(k){return!Re(k)}o(Ee,"isNotUndefined");function qe(k){return k===null||Re(k)}o(qe,"isNullOrUndefined");function Tt(k){return!qe(k)}o(Tt,"isNotNullOrUndefined");function it(k,Ue){return!!(k&&R.CY[M._S](k,Ue))}o(it,"hasOwnProperty");function $e(k){return!!(k&&typeof k===R.fK)}o($e,"isObject");function $(k){return!!(k&&typeof k===R.cb)}o($,"isFunction");function pe(k){return k&&$(k.then)}o(pe,"isPromiseLike");function Y(k){var Ue=k;return Ue&&Ce(Ue)&&(Ue=Ue[M.i7](E,function(Xe,dt){return dt.toUpperCase()}),Ue=Ue[M.i7](xe,"_"),Ue=Ue[M.i7](He,function(Xe,dt){return"_"+dt})),Ue}o(Y,"normalizeJsName");function ce(k,Ue){if(k)for(var Xe in k)R.CY[M._S](k,Xe)&&Ue[M._S](k,Xe,k[Xe])}o(ce,"objForEachKey");function Ge(k,Ue){var Xe=!1;return k&&Ue&&!(Xe=k===Ue)&&(Xe=z?k[U](Ue):at(k,Ue)),Xe}o(Ge,"strEndsWith");function at(k,Ue){var Xe=!1,dt=Ue?Ue[M.R5]:0,ct=k?k[M.R5]:0;if(dt&&ct&&ct>=dt&&!(Xe=k===Ue)){for(var Lt=ct-1,Wn=dt-1;Wn>=0;Wn--){if(k[Lt]!=Ue[Wn])return!1;Lt--}Xe=!0}return Xe}o(at,"_strEndsWithPoly");function ne(k,Ue){var Xe=!1;return k&&Ue&&!(Xe=k===Ue)&&(Xe=Z?k[J](Ue):ge(k,Ue)),Xe}o(ne,"strStartsWith");function ge(k,Ue){var Xe=!1,dt=Ue?Ue[M.R5]:0;if(k&&dt&&k[M.R5]>=dt&&!(Xe=k===Ue)){for(var ct=0;ct<dt;ct++)if(k[ct]!==Ue[ct])return!1;Xe=!0}return Xe}o(ge,"_strStartsWithPoly");function ee(k,Ue){return k&&Ue?k[M.ou](Ue)!==-1:!1}o(ee,"strContains");function W(k){return!!(k&&We[M._S](k)==="[object Date]")}o(W,"isDate");var ye=Fe||fe;function fe(k){return!!(k&&We[M._S](k)==="[object Array]")}o(fe,"_isArrayPoly");function vt(k){return!!(k&&We[M._S](k)==="[object Error]")}o(vt,"isError");function Ce(k){return typeof k=="string"}o(Ce,"isString");function D(k){return typeof k=="number"}o(D,"isNumber");function I(k){return typeof k=="boolean"}o(I,"isBoolean");function Ne(k){return typeof k=="symbol"}o(Ne,"isSymbol");function St(k){var Ue=!1;if(k&&typeof k=="object"){var Xe=Oe?Oe(k):re(k);Xe?(Xe[he]&&R.CY[M._S](Xe,he)&&(Xe=Xe[he]),Ue=typeof Xe===R.cb&&Je[M._S](Xe)===q):Ue=!0}return Ue}o(St,"isPlainObject");function ht(k){if(k)return Ke?k[B]():kt(k)}o(ht,"toISOString");function kt(k){if(k&&k.getUTCFullYear){var Ue=o(function(Xe){var dt=String(Xe);return dt[M.R5]===1&&(dt="0"+dt),dt},"pad");return k.getUTCFullYear()+"-"+Ue(k.getUTCMonth()+1)+"-"+Ue(k.getUTCDate())+"T"+Ue(k.getUTCHours())+":"+Ue(k.getUTCMinutes())+":"+Ue(k.getUTCSeconds())+"."+String((k.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(kt,"_toISOStringPoly");function st(k,Ue,Xe){var dt=k[M.R5];try{for(var ct=0;ct<dt&&!(ct in k&&Ue[M._S](Xe||k,k[ct],ct,k)===-1);ct++);}catch(Lt){}}o(st,"arrForEach");function At(k,Ue,Xe){if(k){if(k[Le])return k[Le](Ue,Xe);var dt=k[M.R5],ct=Xe||0;try{for(var Lt=Math.max(ct>=0?ct:dt-Math.abs(ct),0);Lt<dt;Lt++)if(Lt in k&&k[Lt]===Ue)return Lt}catch(Wn){}}return-1}o(At,"arrIndexOf");function Ct(k,Ue,Xe){var dt;if(k){if(k[ke])return k[ke](Ue,Xe);var ct=k[M.R5],Lt=Xe||k;dt=new Array(ct);try{for(var Wn=0;Wn<ct;Wn++)Wn in k&&(dt[Wn]=Ue[M._S](Lt,k[Wn],k))}catch(An){}}return dt}o(Ct,"arrMap");function dn(k,Ue,Xe){var dt;if(k){if(k[Pe])return k[Pe](Ue,Xe);var ct=k[M.R5],Lt=0;if(arguments[M.R5]>=3)dt=arguments[2];else{for(;Lt<ct&&!(Lt in k);)Lt++;dt=k[Lt++]}for(;Lt<ct;)Lt in k&&(dt=Ue(dt,k[Lt],Lt,k)),Lt++}return dt}o(dn,"arrReduce");function pn(k){return k&&(k=Q&&k[F]?k[F]():k[M.i7]?k[M.i7](/^\s+|(?=\s)\s+$/g,C.qS):k),k}o(pn,"strTrim");var Dn=!{toString:null}.propertyIsEnumerable("toString"),$n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Ye(k){var Ue=typeof k;if(Ue!==R.cb&&(Ue!==R.fK||k===null)&&(0,S.ZU)("objKeys called on non-object"),!Dn&&Me)return Me(k);var Xe=[];for(var dt in k)k&&R.CY[M._S](k,dt)&&Xe[M.MW](dt);if(Dn)for(var ct=$n[M.R5],Lt=0;Lt<ct;Lt++)k&&R.CY[M._S](k,$n[Lt])&&Xe[M.MW]($n[Lt]);return Xe}o(Ye,"objKeys");function Et(k,Ue,Xe,dt){if(oe)try{var ct={enumerable:!0,configurable:!0};return Xe&&(ct.get=Xe),dt&&(ct.set=dt),oe(k,Ue,ct),!0}catch(Lt){}return!1}o(Et,"objDefineAccessors");function jt(k){return k}o(jt,"_doNothing");function Mt(k){return ze&&ce(k,function(Ue,Xe){(ye(Xe)||$e(Xe))&&ze(Xe)}),en(k)}o(Mt,"deepFreeze");var en=ze||jt,rt=X||jt;function tn(){var k=Date;return k.now?k.now():new k().getTime()}o(tn,"dateNow");function sn(k){return vt(k)?k[M.I]:C.qS}o(sn,"getExceptionName");function ln(k,Ue,Xe,dt,ct){var Lt=Xe;return k&&(Lt=k[Ue],Lt!==Xe&&(!ct||ct(Lt))&&(!dt||dt(Xe))&&(Lt=Xe,k[Ue]=Lt)),Lt}o(ln,"setValue");function Zt(k,Ue,Xe){var dt;return k?(dt=k[Ue],!dt&&qe(dt)&&(dt=Re(Xe)?{}:Xe,k[Ue]=dt)):dt=Re(Xe)?{}:Xe,dt}o(Zt,"getSetValue");function _n(k,Ue){return qe(k)?Ue:k}o(_n,"getCfgValue");function Fn(k){return!k}o(Fn,"isNotTruthy");function ei(k){return!!k}o(ei,"isTruthy");function fi(k){throw new Error(k)}o(fi,"throwError");function xn(k,Ue){var Xe=null,dt=null;return $(k)?Xe=k:dt=k,function(){var ct=arguments;if(Xe&&(dt=Xe()),dt)return dt[Ue][M.ZV](dt,ct)}}o(xn,"_createProxyFunction");function mi(k,Ue,Xe){if(k&&Ue&&$e(k)&&$e(Ue)){var dt=o(function(Lt){if(Ce(Lt)){var Wn=Ue[Lt];$(Wn)?(!Xe||Xe(Lt,!0,Ue,k))&&(k[Lt]=xn(Ue,Lt)):(!Xe||Xe(Lt,!1,Ue,k))&&(it(k,Lt)&&delete k[Lt],Et(k,Lt,function(){return Ue[Lt]},function(An){Ue[Lt]=An})||(k[Lt]=Wn))}},"_loop_1");for(var ct in Ue)dt(ct)}return k}o(mi,"proxyAssign");function er(k,Ue,Xe,dt,ct){k&&Ue&&Xe&&(ct!==!1||Re(k[Ue]))&&(k[Ue]=xn(Xe,dt))}o(er,"proxyFunctionAs");function Wi(k,Ue,Xe,dt){return k&&Ue&&$e(k)&&ye(Xe)&&st(Xe,function(ct){Ce(ct)&&er(k,ct,Ue,ct,dt)}),k}o(Wi,"proxyFunctions");function tr(k){return function(){function Ue(){var Xe=this;k&&ce(k,function(dt,ct){Xe[dt]=ct})}return o(Ue,"class_1"),Ue}()}o(tr,"createClassFromInterface");function Ki(k){return k&&R.rl&&(k=(0,R.Pw)((0,R.rl)({},k))),k}o(Ki,"optimizeObject");function Ei(k,Ue,Xe,dt,ct,Lt){var Wn=arguments,An=Wn[0]||{},yt=Wn[M.R5],_t=!1,Ot=1;for(yt>0&&I(An)&&(_t=An,An=Wn[Ot]||{},Ot++),$e(An)||(An={});Ot<yt;Ot++){var ot=Wn[Ot],Qt=ye(ot),Kt=$e(ot);for(var pt in ot){var nn=Qt&&pt in ot||Kt&&R.CY[M._S](ot,pt);if(!!nn){var Xt=ot[pt],Cn=void 0;if(_t&&Xt&&((Cn=ye(Xt))||St(Xt))){var yn=An[pt];Cn?ye(yn)||(yn=[]):St(yn)||(yn={}),Xt=Ei(_t,yn,Xt)}Xt!==void 0&&(An[pt]=Xt)}}}return An}o(Ei,"objExtend")},41:(Rt,l,T)=>{"use strict";T.d(l,{qS:()=>R,Z:()=>S,oV:()=>M,DN:()=>C,mE:()=>B,Zh:()=>U,js:()=>J,hL:()=>Le,yi:()=>ke,uC:()=>Pe,$F:()=>F,f_:()=>be,C$:()=>Ie,ys:()=>he,cL:()=>oe,kl:()=>ze});var R="",S="channels",M="core",C="createPerfMgr",B="disabled",U="extensionConfig",J="extensions",Le="processTelemetry",ke="priority",Pe="eventsSent",F="eventsDiscarded",be="eventsSendRequest",Ie="perfEvent",he="errorToConsole",oe="warnToConsole",ze="getPerfMgr"},880:(Rt,l,T)=>{"use strict";T.d(l,{f:()=>U});var R=T(679),S=T(96),M=T(708),C=T(41);function B(J,Le,ke,Pe){(0,M.tO)(J,function(F){if(F&&F[Le])if(ke)setTimeout(function(){return Pe(F)},0);else try{Pe(F)}catch(be){}})}o(B,"_runListeners");var U=function(){function J(Le){this.listeners=[];var ke=!!(Le||{}).perfEvtsSendAll;(0,R.Z)(J,this,function(Pe){Pe[S.g]=function(F){Pe.listeners[S.MW](F)},Pe[S.n7]=function(F){for(var be=(0,M.UA)(Pe[S.dE],F);be>-1;)Pe.listeners[S.cb](be,1),be=(0,M.UA)(Pe[S.dE],F)},Pe[C.uC]=function(F){B(Pe[S.dE],C.uC,!0,function(be){be[C.uC](F)})},Pe[C.$F]=function(F,be){B(Pe[S.dE],C.$F,!0,function(Ie){Ie[C.$F](F,be)})},Pe[C.f_]=function(F,be){B(Pe[S.dE],C.f_,be,function(Ie){Ie[C.f_](F,be)})},Pe[C.C$]=function(F){F&&(ke||!F[S.PL]())&&B(Pe[S.dE],C.C$,!1,function(be){F[S.d]?setTimeout(function(){return be[C.C$](F)},0):be[C.C$](F)})}})}return o(J,"NotificationManager"),J.__ieDyn=1,J}()},288:(Rt,l,T)=>{"use strict";T.d(l,{zn:()=>ke,Jk:()=>Pe,Lm:()=>be,j5:()=>he});var R=T(679),S=T(96),M=T(708),C=T(41),B="ctx",U="ParentContextKey",J="ChildrenContextKey",Le=null,ke=function(){function oe(ze,X,Me){var se=this,Q=!1;if(se.start=(0,M.m6)(),se[S.I]=ze,se[S.d]=Me,se[S.PL]=function(){return!1},(0,M.mf)(X)){var z;Q=(0,M.l_)(se,"payload",function(){return!z&&(0,M.mf)(X)&&(z=X(),X=null),z})}se[S.T]=function(Z){return Z?Z===oe[U]||Z===oe[J]?se[Z]:(se[B]||{})[Z]:null},se[S.wu]=function(Z,ae){if(Z)if(Z===oe[U])se[Z]||(se[S.PL]=function(){return!0}),se[Z]=ae;else if(Z===oe[J])se[Z]=ae;else{var Ke=se[B]=se[B]||{};Ke[Z]=ae}},se[S.Km]=function(){var Z=0,ae=se[S.T](oe[J]);if((0,M.kJ)(ae))for(var Ke=0;Ke<ae[S.R5];Ke++){var Fe=ae[Ke];Fe&&(Z+=Fe[S.Z_])}se[S.Z_]=(0,M.m6)()-se.start,se.exTime=se[S.Z_]-Z,se[S.Km]=function(){},!Q&&(0,M.mf)(X)&&(se.payload=X())}}return o(oe,"PerfEvent"),oe.ParentContextKey="parent",oe.ChildrenContextKey="childEvts",oe}(),Pe=function(){function oe(ze){this.ctx={},(0,R.Z)(oe,this,function(X){X.create=function(Me,se,Q){return new ke(Me,se,Q)},X.fire=function(Me){Me&&(Me[S.Km](),ze&&(0,M.mf)(ze[C.C$])&&ze[C.C$](Me))},X[S.wu]=function(Me,se){if(Me){var Q=X[B]=X[B]||{};Q[Me]=se}},X[S.T]=function(Me){return(X[B]||{})[Me]}})}return o(oe,"PerfManager"),oe.__ieDyn=1,oe}(),F="CoreUtils.doPerf";function be(oe,ze,X,Me,se){if(oe){var Q=oe;if(Q[C.kl]&&(Q=Q[C.kl]()),Q){var z=void 0,Z=Q[S.T](F);try{if(z=Q.create(ze(),Me,se),z){if(Z&&z[S.wu]&&(z[S.wu](ke[U],Z),Z[S.T]&&Z[S.wu])){var ae=Z[S.T](ke[J]);ae||(ae=[],Z[S.wu](ke[J],ae)),ae[S.MW](z)}return Q[S.wu](F,z),X(z)}}catch(Ke){z&&z[S.wu]&&z[S.wu]("exception",Ke)}finally{z&&Q.fire(z),Q[S.wu](F,Z)}}}return X()}o(be,"doPerf");function Ie(oe){Le=oe}o(Ie,"setGblPerfMgr");function he(){return Le}o(he,"getGblPerfMgr")},589:(Rt,l,T)=>{"use strict";T.d(l,{CD:()=>he,Bt:()=>oe,xy:()=>ze,jV:()=>X,Vi:()=>se});var R=T(96),S=T(18),M=T(630),C=T(708),B=T(41),U=T(288),J=T(833),Le="TelemetryPluginChain",ke="_hasRun",Pe="_getTelCtx",F=0;function be(Q,z,Z){for(;Q;){if(Q[R.TO]()===Z)return Q;Q=Q[R.W2]()}return X([Z],z[R.TC]||{},z)}o(be,"_getNextProxyStart");function Ie(Q,z,Z,ae){var Ke=null,Fe=[];ae!==null&&(Ke=ae?be(Q,Z,ae):Q);var We={_next:q,ctx:{core:function(){return Z},diagLog:function(){return(0,S.vH)(Z,z)},getCfg:function(){return z},getExtCfg:E,getConfig:xe,hasNext:function(){return!!Ke},getNext:function(){return Ke},setNext:function(Oe){Ke=Oe},iterate:He,onComplete:Je}};function Je(Oe,re){for(var L=[],Se=2;Se<arguments.length;Se++)L[Se-2]=arguments[Se];Oe&&Fe[R.MW]({func:Oe,self:(0,C.o8)(re)?We.ctx:re,args:L})}o(Je,"_addOnComplete");function q(){var Oe=Ke;if(Ke=Oe?Oe[R.W2]():null,!Oe){var re=Fe;re&&re[R.R5]>0&&((0,C.tO)(re,function(L){try{L.func[R._S](L.self,L.args)}catch(Se){(0,S.kP)(Z[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,M.eU)(Se))}}),Fe=[])}return Oe}o(q,"_moveNext");function E(Oe,re,L){re===void 0&&(re={}),L===void 0&&(L=0);var Se;if(z){var Re=z[B.Zh];Re&&Oe&&(Se=Re[Oe])}if(!Se)Se=re;else if((0,C.Kn)(re)&&L!==0){var Ee=(0,C.mm)(!0,re,Se);z&&L===2&&(0,C.rW)(re,function(qe){if((0,C.le)(Ee[qe])){var Tt=z[qe];(0,C.le)(Tt)||(Ee[qe]=Tt)}}),Se=Ee}return Se}o(E,"_getExtCfg");function xe(Oe,re,L){L===void 0&&(L=!1);var Se,Re=E(Oe,null);return Re&&!(0,C.le)(Re[re])?Se=Re[re]:z&&!(0,C.le)(z[re])&&(Se=z[re]),(0,C.le)(Se)?L:Se}o(xe,"_getConfig");function He(Oe){for(var re;re=We._next();){var L=re[R.TO]();L&&Oe(L)}}return o(He,"_iterateChain"),We}o(Ie,"_createInternalContext");function he(Q,z,Z,ae){var Ke=Ie(Q,z,Z,ae),Fe=Ke.ctx;function We(q){var E=Ke._next();return E&&E[B.hL](q,Fe),!E}o(We,"_processNext");function Je(q,E){return q===void 0&&(q=null),(0,C.kJ)(q)&&(q=X(q,z,Z,E)),he(q||Fe[R.W2](),z,Z,E)}return o(Je,"_createNew"),Fe[R.uL]=We,Fe[R.zV]=Je,Fe}o(he,"createProcessTelemetryContext");function oe(Q,z,Z){var ae=z[R.TC]||{},Ke=Ie(Q,ae,z,Z),Fe=Ke.ctx;function We(q){var E=Ke._next();return E&&E.unload(Fe,q),!E}o(We,"_processNext");function Je(q,E){return q===void 0&&(q=null),(0,C.kJ)(q)&&(q=X(q,ae,z,E)),oe(q||Fe[R.W2](),z,E)}return o(Je,"_createNew"),Fe[R.uL]=We,Fe[R.zV]=Je,Fe}o(oe,"createProcessTelemetryUnloadContext");function ze(Q,z,Z){var ae=z[R.TC]||{},Ke=Ie(Q,ae,z,Z),Fe=Ke.ctx;function We(q){return Fe.iterate(function(E){(0,C.mf)(E[R.Tu])&&E[R.Tu](Fe,q)})}o(We,"_processNext");function Je(q,E){return q===void 0&&(q=null),(0,C.kJ)(q)&&(q=X(q,ae,z,E)),ze(q||Fe[R.W2](),z,E)}return o(Je,"_createNew"),Fe[R.uL]=We,Fe[R.zV]=Je,Fe}o(ze,"createProcessTelemetryUpdateContext");function X(Q,z,Z,ae){var Ke=null,Fe=!ae;if((0,C.kJ)(Q)&&Q[R.R5]>0){var We=null;(0,C.tO)(Q,function(Je){if(!Fe&&ae===Je&&(Fe=!0),Fe&&Je&&(0,C.mf)(Je[B.hL])){var q=Me(Je,z,Z);Ke||(Ke=q),We&&We._setNext(q),We=q}})}return ae&&!Ke?X([ae],z,Z):Ke}o(X,"createTelemetryProxyChain");function Me(Q,z,Z){var ae=null,Ke=(0,C.mf)(Q[B.hL]),Fe=(0,C.mf)(Q[R.Jd]),We;Q?We=Q[R.pZ]+"-"+Q[B.yi]+"-"+F++:We="Unknown-0-"+F++;var Je={getPlugin:function(){return Q},getNext:function(){return ae},processTelemetry:xe,unload:He,update:Oe,_id:We,_setNext:function(re){ae=re}};function q(){var re;return Q&&(0,C.mf)(Q[Pe])&&(re=Q[Pe]()),re||(re=he(Je,z,Z)),re}o(q,"_getTelCtx");function E(re,L,Se,Re,Ee){var qe=!1,Tt=Q?Q[R.pZ]:Le,it=re[ke];return it||(it=re[ke]={}),re.setNext(ae),Q&&(0,U.Lm)(re[B.oV](),function(){return Tt+":"+Se},function(){it[We]=!0;try{var $e=ae?ae._id:B.qS;$e&&(it[$e]=!1),qe=L(re)}catch(pe){var $=ae?it[ae._id]:!0;$&&(qe=!0),(!ae||!$)&&(0,S.kP)(re[R.mc](),1,73,"Plugin ["+Tt+"] failed during "+Se+" - "+(0,M.eU)(pe)+", run flags: "+(0,M.eU)(it))}},Re,Ee),qe}o(E,"_processChain");function xe(re,L){L=L||q();function Se(Re){if(!Q||!Ke)return!1;var Ee=(0,J.OY)(Q);return Ee[R.fi]||Ee[B.mE]?!1:(Fe&&Q[R.Jd](ae),Q[B.hL](re,Re),!0)}o(Se,"_callProcessTelemetry"),E(L,Se,"processTelemetry",function(){return{item:re}},!re.sync)||L[R.uL](re)}o(xe,"_processTelemetry");function He(re,L){function Se(){var Re=!1;if(Q){var Ee=(0,J.OY)(Q),qe=Q[B.oV]||Ee[B.oV];Q&&(!qe||qe===re.core())&&!Ee[R.fi]&&(Ee[B.oV]=null,Ee[R.fi]=!0,Ee[R.yl]=!1,Q[R.fi]&&Q[R.fi](re,L)===!0&&(Re=!0))}return Re}o(Se,"_callTeardown"),E(re,Se,"unload",function(){},L[R.d])||re[R.uL](L)}o(He,"_unloadPlugin");function Oe(re,L){function Se(){var Re=!1;if(Q){var Ee=(0,J.OY)(Q),qe=Q[B.oV]||Ee[B.oV];Q&&(!qe||qe===re.core())&&!Ee[R.fi]&&Q[R.Tu]&&Q[R.Tu](re,L)===!0&&(Re=!0)}return Re}o(Se,"_callUpdate"),E(re,Se,"update",function(){},!1)||re[R.uL](L)}return o(Oe,"_updatePlugin"),(0,C.FL)(Je)}o(Me,"createTelemetryPluginProxy");var se=function(){function Q(z,Z,ae,Ke){var Fe=this,We=he(z,Z,ae,Ke);(0,C.Vb)(Fe,We,(0,C.FY)(We))}return o(Q,"ProcessTelemetryContext"),Q}()},878:(Rt,l,T)=>{"use strict";T.d(l,{az:()=>be,_l:()=>Ie,CN:()=>he,F6:()=>oe,pZ:()=>ze});var R=T(96),S=T(630),M=T(708),C=T(41),B=4294967296,U=4294967295,J=!1,Le=123456789,ke=987654321;function Pe(X){X<0&&(X>>>=0),Le=123456789+X&U,ke=987654321-X&U,J=!0}o(Pe,"_mwcSeed");function F(){try{var X=(0,M.m6)()&2147483647;Pe((Math.random()*B^X)+X)}catch(Me){}}o(F,"_autoSeedMwc");function be(X){return X>0?Math.floor(Ie()/U*(X+1))>>>0:0}o(be,"randomValue");function Ie(X){var Me=0,se=(0,S.MX)()||(0,S.gz)();return se&&se.getRandomValues&&(Me=se.getRandomValues(new Uint32Array(1))[0]&U),Me===0&&(0,S.w1)()&&(J||F(),Me=oe()&U),Me===0&&(Me=Math.floor(B*Math.random()|0)),X||(Me>>>=0),Me}o(Ie,"random32");function he(X){X?Pe(X):F()}o(he,"mwcRandomSeed");function oe(X){ke=36969*(ke&65535)+(ke>>16)&U,Le=18e3*(Le&65535)+(Le>>16)&U;var Me=(ke<<16)+(Le&65535)>>>0&U|0;return X||(Me>>>=0),Me}o(oe,"mwcRandom32");function ze(X){X===void 0&&(X=22);for(var Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",se=Ie()>>>0,Q=0,z=C.qS;z[R.R5]<X;)Q++,z+=Me.charAt(se&63),se>>>=6,Q===5&&(se=(Ie()<<2&4294967295|se&3)>>>0,Q=0);return z}o(ze,"newId")},833:(Rt,l,T)=>{"use strict";T.d(l,{OY:()=>J,bP:()=>Le,AA:()=>ke,Yn:()=>F});var R=T(96),S=T(883),M=T(708),C=T(41),B=T(206),U=(0,S.K)("plugin");function J(be){return U.get(be,"state",{},!0)}o(J,"_getPluginState");function Le(be,Ie){for(var he=[],oe=null,ze=be[R.W2](),X;ze;){var Me=ze[R.TO]();if(Me){oe&&(0,M.mf)(oe[R.Jd])&&(0,M.mf)(Me[C.hL])&&oe[R.Jd](Me);var se=!1;(0,M.mf)(Me[R.yl])?se=Me[R.yl]():(X=J(Me),se=X[R.yl]),se||he[R.MW](Me),oe=Me,ze=ze[R.W2]()}}(0,M.tO)(he,function(Q){var z=be[C.oV]();Q[R.VL](be.getCfg(),z,Ie,be[R.W2]()),X=J(Q),!Q[C.oV]&&!X[C.oV]&&(X[C.oV]=z),X[R.yl]=!0,delete X[R.fi]})}o(Le,"initializePlugins");function ke(be){return be.sort(function(Ie,he){var oe=0;if(he){var ze=(0,M.mf)(he[C.hL]);(0,M.mf)(Ie[C.hL])?oe=ze?Ie[C.yi]-he[C.yi]:1:ze&&(oe=-1)}else oe=Ie?1:-1;return oe})}o(ke,"sortPlugins");function Pe(be,Ie,he,oe){var ze=0;function X(){for(;ze<be[_DYN_LENGTH];){var Me=be[ze++];if(Me){var se=Me._doUnload||Me[_DYN__DO_TEARDOWN];if(isFunction(se)&&se[_DYN_CALL](Me,Ie,he,X)===!0)return!0}}}return o(X,"_doUnload"),X()}o(Pe,"unloadComponents");function F(be){var Ie={};return{getName:function(){return Ie[R.I]},setName:function(he){be&&be.setName(he),Ie[R.I]=he},getTraceId:function(){return Ie[R.nY]},setTraceId:function(he){be&&be.setTraceId(he),(0,B.jN)(he)&&(Ie[R.nY]=he)},getSpanId:function(){return Ie[R._d]},setSpanId:function(he){be&&be.setSpanId(he),(0,B.Lc)(he)&&(Ie[R._d]=he)},getTraceFlags:function(){return Ie[R.T0]},setTraceFlags:function(he){be&&be.setTraceFlags(he),Ie[R.T0]=he}}}o(F,"createDistributedTraceContext")},790:(Rt,l,T)=>{"use strict";T.d(l,{Y:()=>B});var R=T(96),S=T(18),M=T(630),C=T(708);function B(){var U=[];function J(ke){ke&&U[R.MW](ke)}o(J,"_addHandler");function Le(ke,Pe){(0,C.tO)(U,function(F){try{F(ke,Pe)}catch(be){(0,S.kP)(ke[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,M.eU)(be))}}),U=[]}return o(Le,"_runHandlers"),{add:J,run:Le}}o(B,"createUnloadHandlerContainer")},206:(Rt,l,T)=>{"use strict";T.d(l,{SU:()=>he,j_:()=>oe,jN:()=>ze,Lc:()=>X,J6:()=>Me,Pn:()=>se,aR:()=>Q,lq:()=>z});var R=T(96),S=T(843),M=T(630),C=T(708),B=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,U="00",J="ff",Le="00000000000000000000000000000000",ke="0000000000000000",Pe=1;function F(Z,ae,Ke){return Z&&Z[R.R5]===ae&&Z!==Ke?!!Z.match(/^[\da-f]*$/):!1}o(F,"_isValid");function be(Z,ae,Ke){return F(Z,ae)?Z:Ke}o(be,"_formatValue");function Ie(Z){(isNaN(Z)||Z<0||Z>255)&&(Z=1);for(var ae=Z.toString(16);ae[R.R5]<2;)ae="0"+ae;return ae}o(Ie,"_formatFlags");function he(Z,ae,Ke,Fe){var We;return We={},We[R.PA]=F(Fe,2,J)?Fe:U,We[R.nY]=ze(Z)?Z:(0,S.DO)(),We.spanId=X(ae)?ae:(0,S.DO)()[R.Jn](0,16),We.traceFlags=Ke>=0&&Ke<=255?Ke:1,We}o(he,"createTraceParent");function oe(Z){var ae;if(!Z||((0,C.kJ)(Z)&&(Z=Z[0]||""),!Z||!(0,C.HD)(Z)||Z[R.R5]>8192))return null;var Ke=B.exec((0,C.nd)(Z));return!Ke||Ke[1]===J||Ke[2]===Le||Ke[3]===ke?null:(ae={},ae[R.PA]=Ke[1],ae[R.nY]=Ke[2],ae[R._d]=Ke[3],ae[R.T0]=parseInt(Ke[4],16),ae)}o(oe,"parseTraceParent");function ze(Z){return F(Z,32,Le)}o(ze,"isValidTraceId");function X(Z){return F(Z,16,ke)}o(X,"isValidSpanId");function Me(Z){return!(!Z||!F(Z[R.PA],2,J)||!F(Z[R.nY],32,Le)||!F(Z[R._d],16,ke)||!F(Ie(Z[R.T0]),2))}o(Me,"isValidTraceParent");function se(Z){return Me(Z)?(Z[R.T0]&Pe)===Pe:!1}o(se,"isSampledFlag");function Q(Z){if(Z){var ae=Ie(Z[R.T0]);F(ae,2)||(ae="01");var Ke=Z[R.PA]||U;return Ke!=="00"&&Ke!=="ff"&&(Ke=U),"".concat(Ke,"-").concat(be(Z.traceId,32,Le),"-").concat(be(Z.spanId,16,ke),"-").concat(ae)}return""}o(Q,"formatTraceParent");function z(){var Z="traceparent",ae=oe((0,M.ed)(Z));return ae||(ae=oe((0,M.pI)(Z))),ae}o(z,"findW3cTraceParent")},96:(Rt,l,T)=>{"use strict";T.d(l,{VL:()=>R,I:()=>S,tb:()=>M,pZ:()=>C,MW:()=>B,yl:()=>U,TC:()=>J,p$:()=>Le,eZ:()=>ke,R5:()=>Pe,Z_:()=>F,uL:()=>be,SD:()=>Ie,g:()=>he,n7:()=>oe,LS:()=>ze,Fc:()=>X,TO:()=>Me,kL:()=>se,iC:()=>Q,cb:()=>z,fi:()=>Z,Gc:()=>ae,gU:()=>Ke,d:()=>Fe,F3:()=>We,Tu:()=>Je,W2:()=>q,mc:()=>E,Jd:()=>xe,zV:()=>He,Lk:()=>Oe,ou:()=>re,zc:()=>L,qV:()=>Se,w6:()=>Re,$h:()=>Ee,Jn:()=>qe,xv:()=>Tt,ZV:()=>it,i7:()=>$e,Fr:()=>$,jk:()=>pe,T1:()=>Y,_S:()=>ce,P6:()=>Ge,Kn:()=>at,dE:()=>ne,PL:()=>ge,T:()=>ee,wu:()=>W,Km:()=>ye,nY:()=>fe,_d:()=>vt,T0:()=>Ce,PA:()=>D});var R="initialize",S="name",M="getNotifyMgr",C="identifier",B="push",U="isInitialized",J="config",Le="instrumentationKey",ke="logger",Pe="length",F="time",be="processNext",Ie="getProcessTelContext",he="addNotificationListener",oe="removeNotificationListener",ze="stopPollingInternalLogs",X="onComplete",Me="getPlugin",se="flush",Q="_extensions",z="splice",Z="teardown",ae="messageId",Ke="message",Fe="isAsync",We="_doTeardown",Je="update",q="getNext",E="diagLog",xe="setNextPlugin",He="createNew",Oe="cookieCfg",re="indexOf",L="substring",Se="userAgent",Re="split",Ee="setEnabled",qe="substr",Tt="nodeType",it="apply",$e="replace",$="enableDebugExceptions",pe="logInternalMessage",Y="toLowerCase",ce="call",Ge="type",at="handler",ne="listeners",ge="isChildEvt",ee="getCtx",W="setCtx",ye="complete",fe="traceId",vt="spanId",Ce="traceFlags",D="version"},392:(Rt,l,T)=>{"use strict";T.d(l,{cb:()=>R,fK:()=>S,jA:()=>M,hB:()=>C,bO:()=>B,Pw:()=>J,V4:()=>Le,rl:()=>ke,yu:()=>Pe,RJ:()=>F,CY:()=>be});var R="function",S="object",M="undefined",C="prototype",B="hasOwnProperty",U="default",J=Object,Le=J[C],ke=J.assign,Pe=J.create,F=J.defineProperty,be=Le[B]},91:(Rt,l,T)=>{"use strict";T.d(l,{Rd:()=>M,ZU:()=>C,pu:()=>B});var R=T(392),S=null;function M(U){U===void 0&&(U=!0);var J=U===!1?null:S;return J||(typeof globalThis!==R.jA&&(J=globalThis),!J&&typeof self!==R.jA&&(J=self),!J&&typeof window!==R.jA&&(J=window),!J&&typeof T.g!==R.jA&&(J=T.g),S=J),J}o(M,"getGlobal");function C(U){throw new TypeError(U)}o(C,"throwTypeError");function B(U){var J=R.yu;if(J)return J(U);if(U==null)return{};var Le=typeof U;Le!==R.fK&&Le!==R.cb&&C("Object prototype may only be an Object:"+U);function ke(){}return o(ke,"tmpFunc"),ke[R.hB]=U,new ke}o(B,"objCreateFn")},88:(Rt,l,T)=>{"use strict";T.d(l,{uc:()=>be,ne:()=>he,$h:()=>Ke});var R=T(392),S=T(91),M=((0,S.Rd)()||{}).Symbol,C=((0,S.Rd)()||{}).Reflect,B=!!M,U=!!C,J="decorate",Le="metadata",ke="getOwnPropertySymbols",Pe="iterator",F=o(function(q){for(var E,xe=1,He=arguments.length;xe<He;xe++){E=arguments[xe];for(var Oe in E)R.V4[R.bO].call(E,Oe)&&(q[Oe]=E[Oe])}return q},"__objAssignFnImpl"),be=R.rl||F,Ie=o(function(q,E){return Ie=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,He){xe.__proto__=He}||function(xe,He){for(var Oe in He)He[R.bO](Oe)&&(xe[Oe]=He[Oe])},Ie(q,E)},"extendStaticsFn");function he(q,E){typeof E!==R.cb&&E!==null&&(0,S.ZU)("Class extends value "+String(E)+" is not a constructor or null"),Ie(q,E);function xe(){this.constructor=q}o(xe,"__"),q[R.hB]=E===null?(0,S.pu)(E):(xe[R.hB]=E[R.hB],new xe)}o(he,"__extendsFn");function oe(q,E){var xe={};for(var He in q)ObjHasOwnProperty.call(q,He)&&E.indexOf(He)<0&&(xe[He]=q[He]);if(q!=null&&typeof ObjClass[ke]===strShimFunction)for(var Oe=0,re=ObjClass[ke](q);Oe<re.length;Oe++)E.indexOf(re[Oe])<0&&ObjProto.propertyIsEnumerable.call(q,re[Oe])&&(xe[re[Oe]]=q[re[Oe]]);return xe}o(oe,"__restFn");function ze(q,E,xe,He){var Oe=arguments.length,re=Oe<3?E:He===null?He=ObjClass.getOwnPropertyDescriptor(E,xe):He,L;if(U&&typeof C[J]===strShimFunction)re=C[J](q,E,xe,He);else for(var Se=q.length-1;Se>=0;Se--)(L=q[Se])&&(re=(Oe<3?L(re):Oe>3?L(E,xe,re):L(E,xe))||re);return Oe>3&&re&&ObjDefineProperty(E,xe,re),re}o(ze,"__decorateFn");function X(q,E){return function(xe,He){E(xe,He,q)}}o(X,"__paramFn");function Me(q,E){if(U&&C[Le]===strShimFunction)return C[Le](q,E)}o(Me,"__metadataFn");function se(q,E){for(var xe in q)xe!==strDefault&&!ObjHasOwnProperty.call(E,xe)&&Q(E,q,xe)}o(se,"__exportStarFn");function Q(q,E,xe,He){He===void 0&&(He=xe),ObjCreate?ObjDefineProperty(q,He,{enumerable:!0,get:function(){return E[xe]}}):q[He]=E[xe]}o(Q,"__createBindingFn");function z(q){var E=typeof M===strShimFunction&&M[Pe],xe=E&&q[E],He=0;if(xe)return xe.call(q);if(q&&typeof q.length=="number")return{next:function(){return q&&He>=q.length&&(q=void 0),{value:q&&q[He++],done:!q}}};throwTypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}o(z,"__valuesFn");function Z(q,E){var xe=typeof M===strShimFunction&&q[M[Pe]];if(!xe)return q;var He=xe.call(q),Oe,re=[],L;try{for(;(E===void 0||E-- >0)&&!(Oe=He.next()).done;)re.push(Oe.value)}catch(Se){L={error:Se}}finally{try{Oe&&!Oe.done&&(xe=He.return)&&xe.call(He)}finally{if(L)throw L.error}}return re}o(Z,"__readFn");function ae(){for(var q=arguments,E=0,xe=0,He=q.length;xe<He;xe++)E+=q[xe].length;for(var Oe=Array(E),re=0,xe=0;xe<He;xe++)for(var L=q[xe],Se=0,Re=L.length;Se<Re;Se++,re++)Oe[re]=L[Se];return Oe}o(ae,"__spreadArraysFn");function Ke(q,E){for(var xe=0,He=E.length,Oe=q.length;xe<He;xe++,Oe++)q[Oe]=E[xe];return q}o(Ke,"__spreadArrayFn");function Fe(q,E){return ObjDefineProperty?ObjDefineProperty(q,"raw",{value:E}):q.raw=E,q}o(Fe,"__makeTemplateObjectFn");function We(q){if(q&&q.__esModule)return q;var E={};if(q!=null)for(var xe in q)xe!==strDefault&&Object.prototype.hasOwnProperty.call(q,xe)&&Q(E,q,xe);return ObjCreate?ObjDefineProperty(E,strDefault,{enumerable:!0,value:q}):E[strDefault]=q,E}o(We,"__importStarFn");function Je(q){return q&&q.__esModule?q:{strDefault:q}}o(Je,"__importDefaultFn")},783:(Rt,l,T)=>{"use strict";T.r(l),T.d(l,{AppInsightsCore:()=>_a.F,ApplicationInsights:()=>_r,CoreUtils:()=>nn.Tr,Sender:()=>la,SeverityLevel:()=>Qi,_InternalMessageId:()=>vo.v,arrForEach:()=>D.tO,isNullOrUndefined:()=>D.le,proxyFunctions:()=>D.Vb,throwError:()=>D._y});var R=T(679),S=T(88),M="AppInsightsPropertiesPlugin",C="AppInsightsChannelPlugin",B="ApplicationInsightsAnalytics",U="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",J="sampleRate",Le="ProcessLegacy",ke="http.method",Pe="https://dc.services.visualstudio.com",F="/v2/track",be="not_specified",Ie="iKey",he="split",oe="length",ze="toLowerCase",X="ingestionendpoint",Me="toString",se="removeItem",Q="name",z="message",Z="count",ae="preTriggerDate",Ke="disabled",Fe="date",We="getUTCDate",Je="maxTimesPerMonth",q="stringify",E="pathname",xe="correlationHeaderExcludePatterns",He="indexOf",Oe="extensionConfig",re="exceptions",L="parsedStack",Se="properties",Re="measurements",Ee="sizeInBytes",qe="typeName",Tt="severityLevel",it="problemGroup",$e="isManual",$="CreateFromInterface",pe="hasFullStack",Y="level",ce="method",Ge="assembly",at="fileName",ne="line",ge="duration",ee="receivedResponse",W="substring",ye="sanitizeKeyAndAddUniqueness",fe="sanitizeException",vt="sanitizeProperties",Ce="sanitizeMeasurements",D=T(708),I=T(18),Ne=T(630),St;function ht(m,f,y){var b=f[oe],N=kt(m,f);if(N[oe]!==b){for(var V=0,me=N;y[me]!==void 0;)V++,me=N[W](0,150-3)+Et(V);N=me}return N}o(ht,"dataSanitizeKeyAndAddUniqueness");function kt(m,f){var y;return f&&(f=(0,D.nd)(f[Me]()),f[oe]>150&&(y=f[W](0,150),(0,I.kP)(m,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:f},!0))),y||f}o(kt,"dataSanitizeKey");function st(m,f,y){y===void 0&&(y=1024);var b;return f&&(y=y||1024,f=(0,D.nd)(f),f.toString()[oe]>y&&(b=f[Me]()[W](0,y),(0,I.kP)(m,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:f},!0))),b||f}o(st,"dataSanitizeString");function At(m,f){return Ye(m,f,2048,66)}o(At,"dataSanitizeUrl");function Ct(m,f){var y;return f&&f[oe]>32768&&(y=f[W](0,32768),(0,I.kP)(m,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:f},!0)),y||f}o(Ct,"dataSanitizeMessage");function dn(m,f){var y;if(f){var b=""+f;b[oe]>32768&&(y=b[W](0,32768),(0,I.kP)(m,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:f},!0))}return y||f}o(dn,"dataSanitizeException");function pn(m,f){if(f){var y={};(0,D.rW)(f,function(b,N){if((0,D.Kn)(N)&&(0,Ne.nS)())try{N=(0,Ne.xA)()[q](N)}catch(V){(0,I.kP)(m,2,49,"custom property is not valid",{exception:V},!0)}N=st(m,N,8192),b=ht(m,b,y),y[b]=N}),f=y}return f}o(pn,"dataSanitizeProperties");function Dn(m,f){if(f){var y={};(0,D.rW)(f,function(b,N){b=ht(m,b,y),y[b]=N}),f=y}return f}o(Dn,"dataSanitizeMeasurements");function $n(m,f){return f&&Ye(m,f,128,69)[Me]()}o($n,"dataSanitizeId");function Ye(m,f,y,b){var N;return f&&(f=(0,D.nd)(f),f[oe]>y&&(N=f[W](0,y),(0,I.kP)(m,2,b,"input is too long, it has been truncated to "+y+" characters.",{data:f},!0))),N||f}o(Ye,"dataSanitizeInput");function Et(m){var f="00"+m;return f.substr(f[oe]-3)}o(Et,"dsPadNumber");var jt=(St={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},St[ye]=ht,St.sanitizeKey=kt,St.sanitizeString=st,St.sanitizeUrl=At,St.sanitizeMessage=Ct,St[fe]=dn,St[vt]=pn,St[Ce]=Dn,St.sanitizeId=$n,St.sanitizeInput=Ye,St.padNumber=Et,St.trim=D.nd,St),Mt=function(){function m(f,y,b,N){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var V=this;V.ver=2,V[Q]=st(f,y)||be,V[Se]=pn(f,b),V[Re]=Dn(f,N)}return o(m,"Event"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Event",m.dataType="EventData",m}(),en=function(){function m(f,y,b,N,V){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var me=this;me.ver=2,y=y||be,me[z]=Ct(f,y),me[Se]=pn(f,N),me[Re]=Dn(f,V),b&&(me[Tt]=b)}return o(m,"Trace"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Message",m.dataType="MessageData",m}(),rt="";function tn(m,f){return f===void 0&&(f=!1),m==null?f:m.toString()[ze]()==="true"}o(tn,"stringToBoolOrDefault");function sn(m){(isNaN(m)||m<0)&&(m=0),m=Math.round(m);var f=rt+m%1e3,y=rt+Math.floor(m/1e3)%60,b=rt+Math.floor(m/(1e3*60))%60,N=rt+Math.floor(m/(1e3*60*60))%24,V=Math.floor(m/(1e3*60*60*24));return f=f[oe]===1?"00"+f:f[oe]===2?"0"+f:f,y=y[oe]<2?"0"+y:y,b=b[oe]<2?"0"+b:b,N=N[oe]<2?"0"+N:N,(V>0?V+".":rt)+N+":"+b+":"+y+"."+f}o(sn,"msToTimeSpan");function ln(m,f){var y=null;return(0,D.tO)(m,function(b){if(b.identifier===f)return y=b,-1}),y}o(ln,"getExtensionByName");function Zt(m,f,y,b,N){return!N&&(0,D.HD)(m)&&(m==="Script error."||m==="Script error")}o(Zt,"isCrossOriginError");var _n=function(){function m(f,y,b,N,V,me,Te){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var gt=this;gt.ver=2,gt.id=$n(f,Te),gt.url=At(f,b),gt[Q]=st(f,y)||be,isNaN(N)||(gt[ge]=sn(N)),gt[Se]=pn(f,V),gt[Re]=Dn(f,me)}return o(m,"PageView"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",m.dataType="PageviewData",m}(),Fn=function(){function m(f,y,b,N,V,me,Te){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var gt=this;gt.ver=2,gt.url=At(f,b),gt[Q]=st(f,y)||be,gt[Se]=pn(f,V),gt[Re]=Dn(f,me),Te&&(gt.domProcessing=Te.domProcessing,gt[ge]=Te[ge],gt.networkConnect=Te.networkConnect,gt.perfTotal=Te.perfTotal,gt[ee]=Te[ee],gt.sentRequest=Te.sentRequest)}return o(m,"PageViewPerformance"),m.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",m.dataType="PageviewPerformanceData",m}(),ei="<no_method>",fi="error",xn="stack",mi="stackDetails",er="errorSrc",Wi="message",tr="description";function Ki(m,f){var y=m;return y&&!(0,D.HD)(y)&&(JSON&&JSON[q]?(y=JSON[q](m),f&&(!y||y==="{}")&&((0,D.mf)(m[Me])?y=m[Me]():y=""+m)):y=""+m+" - (Missing JSON.stringify)"),y||""}o(Ki,"_stringify");function Ei(m,f){var y=m;return m&&(y&&!(0,D.HD)(y)&&(y=m[Wi]||m[tr]||y),y&&!(0,D.HD)(y)&&(y=Ki(y,!0)),m.filename&&(y=y+" @"+(m.filename||"")+":"+(m.lineno||"?")+":"+(m.colno||"?"))),f&&f!=="String"&&f!=="Object"&&f!=="Error"&&(y||"")[He](f)===-1&&(y=f+": "+y),y||""}o(Ei,"_formatMessage");function k(m){try{if((0,D.Kn)(m))return"hasFullStack"in m&&"typeName"in m}catch(f){}return!1}o(k,"_isExceptionDetailsInternal");function Ue(m){try{if((0,D.Kn)(m))return"ver"in m&&"exceptions"in m&&"properties"in m}catch(f){}return!1}o(Ue,"_isExceptionInternal");function Xe(m){return m&&m.src&&(0,D.HD)(m.src)&&m.obj&&(0,D.kJ)(m.obj)}o(Xe,"_isStackDetails");function dt(m){var f=m||"";(0,D.HD)(f)||((0,D.HD)(f[xn])?f=f[xn]:f=""+f);var y=f[he](`
`);return{src:f,obj:y}}o(dt,"_convertStackObj");function ct(m){for(var f=[],y=m[he](`
`),b=0;b<y[oe];b++){var N=y[b];y[b+1]&&(N+="@"+y[b+1],b++),f.push(N)}return{src:m,obj:f}}o(ct,"_getOperaStack");function Lt(m){var f=null;if(m)try{if(m[xn])f=dt(m[xn]);else if(m[fi]&&m[fi][xn])f=dt(m[fi][xn]);else if(m.exception&&m.exception[xn])f=dt(m.exception[xn]);else if(Xe(m))f=m;else if(Xe(m[mi]))f=m[mi];else if(window&&window.opera&&m[Wi])f=ct(m[z]);else if(m.reason&&m.reason[xn])f=dt(m.reason[xn]);else if((0,D.HD)(m))f=dt(m);else{var y=m[Wi]||m[tr]||"";(0,D.HD)(m[er])&&(y&&(y+=`
`),y+=" from "+m[er]),y&&(f=dt(y))}}catch(b){f=dt(b)}return f||{src:"",obj:null}}o(Lt,"_getStackFromErrorObj");function Wn(m){var f="";return m&&(m.obj?(0,D.tO)(m.obj,function(y){f+=y+`
`}):f=m.src||""),f}o(Wn,"_formatStackTrace");function An(m){var f,y=m.obj;if(y&&y[oe]>0){f=[];var b=0,N=0;(0,D.tO)(y,function(fn){var gn=fn[Me]();if(Qt.regex.test(gn)){var ve=new Qt(gn,b++);N+=ve[Ee],f.push(ve)}});var V=32*1024;if(N>V)for(var me=0,Te=f[oe]-1,gt=0,ft=me,bt=Te;me<Te;){var xt=f[me][Ee],rn=f[Te][Ee];if(gt+=xt+rn,gt>V){var Ft=bt-ft+1;f.splice(ft,Ft);break}ft=me,bt=Te,me++,Te--}}return f}o(An,"_parseStack");function yt(m){var f="";if(m&&(f=m.typeName||m[Q]||"",!f))try{var y=/function (.{1,200})\(/,b=y.exec(m.constructor[Me]());f=b&&b[oe]>1?b[1]:""}catch(N){}return f}o(yt,"_getErrorType");function _t(m){if(m)try{if(!(0,D.HD)(m)){var f=yt(m),y=Ki(m,!1);return(!y||y==="{}")&&(m[fi]&&(m=m[fi],f=yt(m)),y=Ki(m,!0)),y[He](f)!==0&&f!=="String"?f+":"+y:y}}catch(b){}return""+(m||"")}o(_t,"_formatErrorCode");var Ot=function(){function m(f,y,b,N,V,me){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Te=this;Te.ver=2,Ue(y)?(Te[re]=y[re]||[],Te[Se]=y[Se],Te[Re]=y[Re],y[Tt]&&(Te[Tt]=y[Tt]),y.id&&(Te.id=y.id),y[it]&&(Te[it]=y[it]),(0,D.le)(y[$e])||(Te[$e]=y[$e])):(b||(b={}),Te[re]=[new ot(f,y,b)],Te[Se]=pn(f,b),Te[Re]=Dn(f,N),V&&(Te[Tt]=V),me&&(Te.id=me))}return o(m,"Exception"),m.CreateAutoException=function(f,y,b,N,V,me,Te,gt){var ft,bt=yt(V||me||f);return ft={},ft[z]=Ei(f,bt),ft.url=y,ft.lineNumber=b,ft.columnNumber=N,ft.error=_t(V||me||f),ft.evt=_t(me||f),ft[qe]=bt,ft.stackDetails=Lt(Te||V||me),ft.errorSrc=gt,ft},m.CreateFromInterface=function(f,y,b,N){var V=y[re]&&(0,D.Mr)(y[re],function(Te){return ot[$](f,Te)}),me=new m(f,(0,S.uc)((0,S.uc)({},y),{exceptions:V}),b,N);return me},m.prototype.toInterface=function(){var f,y=this,b=y.exceptions,N=y.properties,V=y.measurements,me=y.severityLevel,Te=y.problemGroup,gt=y.id,ft=y.isManual,bt=b instanceof Array&&(0,D.Mr)(b,function(xt){return xt.toInterface()})||void 0;return f={ver:"4.0"},f[re]=bt,f.severityLevel=me,f.properties=N,f.measurements=V,f.problemGroup=Te,f.id=gt,f.isManual=ft,f},m.CreateSimpleException=function(f,y,b,N,V,me){var Te;return{exceptions:[(Te={},Te[pe]=!0,Te.message=f,Te.stack=V,Te.typeName=y,Te)]}},m.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",m.dataType="ExceptionData",m.formatError=_t,m}(),ot=function(){function m(f,y,b){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var N=this;if(k(y))N[qe]=y[qe],N[z]=y[z],N[xn]=y[xn],N[L]=y[L]||[],N[pe]=y[pe];else{var V=y,me=V&&V.evt;(0,D.VZ)(V)||(V=V[fi]||me||V),N[qe]=st(f,yt(V))||be,N[z]=Ct(f,Ei(y||V,N[qe]))||be;var Te=y[mi]||Lt(y);N[L]=An(Te),N[xn]=dn(f,Wn(Te)),N.hasFullStack=(0,D.kJ)(N.parsedStack)&&N.parsedStack[oe]>0,b&&(b[qe]=b[qe]||N[qe])}}return o(m,"_ExceptionDetails"),m.prototype.toInterface=function(){var f,y=this,b=y[L]instanceof Array&&(0,D.Mr)(y[L],function(V){return V.toInterface()}),N=(f={id:y.id,outerId:y.outerId,typeName:y[qe],message:y[z],hasFullStack:y[pe],stack:y[xn]},f[L]=b||void 0,f);return N},m.CreateFromInterface=function(f,y){var b=y[L]instanceof Array&&(0,D.Mr)(y[L],function(V){return Qt[$](V)})||y[L],N=new m(f,(0,S.uc)((0,S.uc)({},y),{parsedStack:b}));return N},m}(),Qt=function(){function m(f,y){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var b=this;if(b[Ee]=0,typeof f=="string"){var N=f;b[Y]=y,b[ce]=ei,b[Ge]=(0,D.nd)(N),b[at]="",b[ne]=0;var V=N.match(m.regex);V&&V[oe]>=5&&(b[ce]=(0,D.nd)(V[2])||b[ce],b[at]=(0,D.nd)(V[4]),b[ne]=parseInt(V[5])||0)}else b[Y]=f[Y],b[ce]=f[ce],b[Ge]=f[Ge],b[at]=f[at],b[ne]=f[ne],b[Ee]=0;b.sizeInBytes+=b.method[oe],b.sizeInBytes+=b.fileName[oe],b.sizeInBytes+=b.assembly[oe],b[Ee]+=m.baseSize,b.sizeInBytes+=b.level.toString()[oe],b.sizeInBytes+=b.line.toString()[oe]}return o(m,"_StackFrame"),m.CreateFromInterface=function(f){return new m(f,null)},m.prototype.toInterface=function(){var f=this;return{level:f[Y],method:f[ce],assembly:f[Ge],fileName:f[at],line:f[ne]}},m.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,m.baseSize=58,m}(),Kt=function(){function m(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(m,"DataPoint"),m}(),pt=function(){function m(f,y,b,N,V,me,Te,gt,ft){this.aiDataContract={ver:1,metrics:1,properties:0};var bt=this;bt.ver=2;var xt=new Kt;xt[Z]=N>0?N:void 0,xt.max=isNaN(me)||me===null?void 0:me,xt.min=isNaN(V)||V===null?void 0:V,xt[Q]=st(f,y)||be,xt.value=b,xt.stdDev=isNaN(Te)||Te===null?void 0:Te,bt.metrics=[xt],bt[Se]=pn(f,gt),bt[Re]=Dn(f,ft)}return o(m,"Metric"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",m.dataType="MetricData",m}(),nn=T(843),Xt=T(242),Cn=T(878),yn=T(869);function Jn(m){var f=null;if((0,D.mf)(Event))f=new Event(m);else{var y=(0,Ne.Me)();y&&y.createEvent&&(f=y.createEvent("Event"),f.initEvent(m,!0,!0))}return f}o(Jn,"createDomEvent");var bn=T(873),Nn=(0,bn.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),zt=T(91),Pt=(0,bn.By)({LocalStorage:0,SessionStorage:1}),Gt=(0,bn.By)({AI:0,AI_AND_W3C:1,W3C:2}),an=void 0,Rn=void 0;function Jt(){return Ln()?on(Pt.LocalStorage):null}o(Jt,"_getLocalStorageObject");function on(m){try{if((0,D.le)((0,zt.Rd)()))return null;var f=new Date()[Me](),y=(0,Ne.a8)(m===Pt.LocalStorage?"localStorage":"sessionStorage");y.setItem(f,f);var b=y.getItem(f)!==f;if(y[se](f),!b)return y}catch(N){}return null}o(on,"_getVerifiedStorageObject");function wn(){return Tn()?on(Pt.SessionStorage):null}o(wn,"_getSessionStorageObject");function In(){an=!1,Rn=!1}o(In,"utlDisableStorage");function cn(){an=Ln(!0),Rn=Tn(!0)}o(cn,"utlEnableStorage");function Ln(m){return(m||an===void 0)&&(an=!!on(Pt.LocalStorage)),an}o(Ln,"utlCanUseLocalStorage");function ti(m,f){var y=Jt();if(y!==null)try{return y.getItem(f)}catch(b){an=!1,(0,I.kP)(m,2,1,"Browser failed read of local storage. "+(0,D.jj)(b),{exception:(0,Ne.eU)(b)})}return null}o(ti,"utlGetLocalStorage");function On(m,f,y){var b=Jt();if(b!==null)try{return b.setItem(f,y),!0}catch(N){an=!1,(0,I.kP)(m,2,3,"Browser failed write to local storage. "+(0,D.jj)(N),{exception:(0,Ne.eU)(N)})}return!1}o(On,"utlSetLocalStorage");function Vn(m,f){var y=Jt();if(y!==null)try{return y[se](f),!0}catch(b){an=!1,(0,I.kP)(m,2,5,"Browser failed removal of local storage item. "+(0,D.jj)(b),{exception:(0,Ne.eU)(b)})}return!1}o(Vn,"utlRemoveStorage");function Tn(m){return(m||Rn===void 0)&&(Rn=!!on(Pt.SessionStorage)),Rn}o(Tn,"utlCanUseSessionStorage");function Gn(){var m=[];return Tn()&&(0,D.rW)((0,Ne.a8)("sessionStorage"),function(f){m.push(f)}),m}o(Gn,"utlGetSessionStorageKeys");function Yt(m,f){var y=wn();if(y!==null)try{return y.getItem(f)}catch(b){Rn=!1,(0,I.kP)(m,2,2,"Browser failed read of session storage. "+(0,D.jj)(b),{exception:(0,Ne.eU)(b)})}return null}o(Yt,"utlGetSessionStorage");function Ut(m,f,y){var b=wn();if(b!==null)try{return b.setItem(f,y),!0}catch(N){Rn=!1,(0,I.kP)(m,2,4,"Browser failed write to session storage. "+(0,D.jj)(N),{exception:(0,Ne.eU)(N)})}return!1}o(Ut,"utlSetSessionStorage");function oi(m,f){var y=wn();if(y!==null)try{return y[se](f),!0}catch(b){Rn=!1,(0,I.kP)(m,2,6,"Browser failed removal of session storage item. "+(0,D.jj)(b),{exception:(0,Ne.eU)(b)})}return!1}o(oi,"utlRemoveSessionStorage");var ki=(0,Ne.Me)()||{},zn=0,si=[null,null,null,null,null];function ni(m){var f=zn,y=si,b=y[f];return ki.createElement?y[f]||(b=y[f]=ki.createElement("a")):b={host:Di(m,!0)},b.href=m,f++,f>=y[oe]&&(f=0),zn=f,b}o(ni,"urlParseUrl");function xi(m){var f,y=ni(m);return y&&(f=y.href),f}o(xi,"urlGetAbsoluteUrl");function jn(m){var f,y=ni(m);return y&&(f=y[E]),f}o(jn,"urlGetPathName");function Yn(m,f){return m?m.toUpperCase()+" "+f:f}o(Yn,"urlGetCompleteUrl");function Di(m,f){var y=Ai(m,f)||"";if(y){var b=y.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(b!=null&&b[oe]>3&&(0,D.HD)(b[2])&&b[2][oe]>0)return b[2]+(b[3]||"")}return y}o(Di,"urlParseHost");function Ai(m,f){var y=null;if(m){var b=m.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(b!=null&&b[oe]>2&&(0,D.HD)(b[2])&&b[2][oe]>0&&(y=b[2]||"",f&&b[oe]>2)){var N=(b[1]||"")[ze](),V=b[3]||"";(N==="http"&&V===":80"||N==="https"&&V===":443")&&(V=""),y+=V}}return y}o(Ai,"urlParseFullHost");var Si=[Pe+F,"https://breeze.aimon.applicationinsights.io"+F,"https://dc-int.services.visualstudio.com"+F];function Ii(m){return(0,D.UA)(Si,m[ze]())!==-1}o(Ii,"isInternalApplicationInsightsEndpoint");var Ri={NotSpecified:be,createDomEvent:Jn,disableStorage:In,isInternalApplicationInsightsEndpoint:Ii,canUseLocalStorage:Ln,getStorage:ti,setStorage:On,removeStorage:Vn,canUseSessionStorage:Tn,getSessionStorageKeys:Gn,getSessionStorage:Yt,setSessionStorage:Ut,removeSessionStorage:oi,disableCookies:nn.oF,canUseCookies:nn.vn,disallowsSameSiteNone:Xt.UY,setCookie:nn.d8,stringToBoolOrDefault:tn,getCookie:nn.ej,deleteCookie:nn.kT,trim:D.nd,newId:Cn.pZ,random32:function(){return(0,Cn._l)(!0)},generateW3CId:nn.DO,isArray:D.kJ,isError:D.VZ,isDate:D.J_,toISOStringForIE8:D.Y6,getIEVersion:Ne.sA,msToTimeSpan:sn,isCrossOriginError:Zt,dump:Ne.eU,getExceptionName:D.jj,addEventHandler:yn.pZ,IsBeaconApiSupported:Ne.MF,getExtension:ln},zi={parseUrl:ni,getAbsoluteUrl:xi,getPathName:jn,getCompleteUrl:Yn,parseHost:Di,parseFullHost:Ai},Un={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(m,f,y){if(!f||m&&m.disableCorrelationHeaders)return!1;if(m&&m[xe]){for(var b=0;b<m.correlationHeaderExcludePatterns[oe];b++)if(m[xe][b].test(f))return!1}var N=ni(f).host[ze]();if(N&&(N[He](":443")!==-1||N[He](":80")!==-1)&&(N=(Ai(f,!0)||"")[ze]()),(!m||!m.enableCorsCorrelation)&&N&&N!==y)return!1;var V=m&&m.correlationHeaderDomains;if(V){var me;if((0,D.tO)(V,function(ft){var bt=new RegExp(ft.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));me=me||bt.test(N)}),!me)return!1}var Te=m&&m.correlationHeaderExcludedDomains;if(!Te||Te[oe]===0)return!0;for(var b=0;b<Te[oe];b++){var gt=new RegExp(Te[b].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(gt.test(N))return!1}return N&&N[oe]>0},getCorrelationContext:function(m){if(m){var f=Un.getCorrelationContextValue(m,Nn[1]);if(f&&f!==Un.correlationIdPrefix)return f}},getCorrelationContextValue:function(m,f){if(m)for(var y=m[he](","),b=0;b<y[oe];++b){var N=y[b][he]("=");if(N[oe]===2&&N[0]===f)return N[1]}}};function Li(m,f,y,b){var N,V=b,me=b;if(f&&f[oe]>0){var Te=ni(f);if(N=Te.host,!V)if(Te[E]!=null){var gt=Te.pathname[oe]===0?"/":Te[E];gt.charAt(0)!=="/"&&(gt="/"+gt),me=Te[E],V=st(m,y?y+" "+gt:gt)}else V=st(m,f)}else N=b,V=b;return{target:N,name:V,data:me}}o(Li,"AjaxHelperParseDependencyPath");function gi(){var m=(0,Ne.r)();if(m&&m.now&&m.timing){var f=m.now()+m.timing.navigationStart;if(f>0)return f}return(0,D.m6)()}o(gi,"dateTimeUtilsNow");function un(m,f){var y=null;return m!==0&&f!==0&&!(0,D.le)(m)&&!(0,D.le)(f)&&(y=f-m),y}o(un,"dateTimeUtilsDuration");var Ji={Now:gi,GetDuration:un};function li(m,f){var y=m||{};return{getName:function(){return y[_DYN_NAME]},setName:function(b){f&&f.setName(b),y[_DYN_NAME]=b},getTraceId:function(){return y.traceID},setTraceId:function(b){f&&f.setTraceId(b),isValidTraceId(b)&&(y.traceID=b)},getSpanId:function(){return y.parentID},setSpanId:function(b){f&&f.setSpanId(b),isValidSpanId(b)&&(y.parentID=b)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(b){f&&f.setTraceFlags(b),y.traceFlags=b}}}o(li,"createDistributedTraceContextFromTrace");var ci=function(){function m(f,y,b,N,V,me,Te,gt,ft,bt,xt,rn){ft===void 0&&(ft="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Ft=this;Ft.ver=2,Ft.id=y,Ft[ge]=sn(V),Ft.success=me,Ft.resultCode=Te+"",Ft.type=st(f,ft);var fn=Li(f,b,gt,N);Ft.data=At(f,N)||fn.data,Ft.target=st(f,fn.target),bt&&(Ft.target="".concat(Ft.target," | ").concat(bt)),Ft[Q]=st(f,fn[Q]),Ft[Se]=pn(f,xt),Ft[Re]=Dn(f,rn)}return o(m,"RemoteDependencyData"),m.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",m.dataType="RemoteDependencyData",m}(),nr=T(883),Ni=T(63);function yi(m){var f="ai."+m+".";return function(y){return f+y}}o(yi,"_aiNameFunc");var Mn=yi("application"),kn=yi("device"),j=yi("location"),v=yi("operation"),_=yi("session"),H=yi("user"),we=yi("cloud"),ut=yi("internal"),et=function(m){(0,S.ne)(f,m);function f(){return m.call(this)||this}return o(f,"ContextTagKeys"),f}((0,D.hl)({applicationVersion:Mn("ver"),applicationBuild:Mn("build"),applicationTypeId:Mn("typeId"),applicationId:Mn("applicationId"),applicationLayer:Mn("layer"),deviceId:kn("id"),deviceIp:kn("ip"),deviceLanguage:kn("language"),deviceLocale:kn("locale"),deviceModel:kn("model"),deviceFriendlyName:kn("friendlyName"),deviceNetwork:kn("network"),deviceNetworkName:kn("networkName"),deviceOEMName:kn("oemName"),deviceOS:kn("os"),deviceOSVersion:kn("osVersion"),deviceRoleInstance:kn("roleInstance"),deviceRoleName:kn("roleName"),deviceScreenResolution:kn("screenResolution"),deviceType:kn("type"),deviceMachineName:kn("machineName"),deviceVMName:kn("vmName"),deviceBrowser:kn("browser"),deviceBrowserVersion:kn("browserVersion"),locationIp:j("ip"),locationCountry:j("country"),locationProvince:j("province"),locationCity:j("city"),operationId:v("id"),operationName:v("name"),operationParentId:v("parentId"),operationRootId:v("rootId"),operationSyntheticSource:v("syntheticSource"),operationCorrelationVector:v("correlationVector"),sessionId:_("id"),sessionIsFirst:_("isFirst"),sessionIsNew:_("isNew"),userAccountAcquisitionDate:H("accountAcquisitionDate"),userAccountId:H("accountId"),userAgent:H("userAgent"),userId:H("id"),userStoreRegion:H("storeRegion"),userAuthUserId:H("authUserId"),userAnonymousUserAcquisitionDate:H("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:H("authUserAcquisitionDate"),cloudName:we("name"),cloudRole:we("role"),cloudRoleVer:we("roleVer"),cloudRoleInstance:we("roleInstance"),cloudEnvironment:we("environment"),cloudLocation:we("location"),cloudDeploymentUnit:we("deploymentUnit"),internalNodeName:ut("nodeName"),internalSdkVersion:ut("sdkVersion"),internalAgentVersion:ut("agentVersion"),internalSnippet:ut("snippet"),internalSdkSrc:ut("sdkSrc")})),K={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},ie=new et,de=function(){function m(f,y,b){var N=this,V=this;V.ver=1,V.sampleRate=100,V.tags={},V[Q]=st(f,b)||be,V.data=y,V.time=(0,D.Y6)(new Date),V.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return N.sampleRate===100?4:1},tags:1,data:1}}return o(m,"Envelope"),m}(),Be=function(){function m(f,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=f,this.baseData=y}return o(m,"Data"),m}(),je="duration",Qe="tags",Bt="deviceType",Dt="data",Vt="name",qn="traceID",$t="length",ui="stringify",ii="measurements",di="dataType",Qn="envelopeType",cr="toString",zr="onLine",Jr="enqueue",ur="count",Oi="push",ir="emitLineDelimitedJson",Ar="clear",Rr="batchPayloads",Fi="markAsSent",Tr="clearSent",Ur="BUFFER_KEY",dr="SENT_BUFFER_KEY",Br="MAX_BUFFER_SIZE",hr="namePrefix",fr="maxBatchSizeInBytes",Mr="triggerSend",vi="diagLog",$i="onunloadDisableBeacon",hi="isBeaconApiDisabled",Pr="_sender",Pn="_senderConfig",gr="_buffer",pa="enableSessionStorageBuffer",ma="samplingPercentage",vr="instrumentationKey",pr="endpointUrl",ia="customHeaders",Vi="disableXhr",Vr="onunloadDisableFetch",jr="disableTelemetry",Hr="baseType",mr="sampleRate",rr="convertUndefined",Wr="_xhrReadyStateChange",Bn="_onError",ji="_onPartialSuccess",yr="_onSuccess",ar="itemsAccepted",Kr="itemsReceived",Yi="isRetryDisabled",Yr="setRequestHeader",qr="maxBatchInterval",ya="eventsSendRequest",go="disableInstrumentationKeyValidation",wa="getSamplingScore",Ha="getHashCodeScore",$r="baseType",Kn="baseData",Hn="properties",ra="true";function ri(m,f,y){return(0,D.sO)(m,f,y,D.fQ)}o(ri,"_setValueIf");function Wa(m,f,y){var b=y[Qe]=y[Qe]||{},N=f.ext=f.ext||{},V=f[Qe]=f[Qe]||[],me=N.user;me&&(ri(b,ie.userAuthUserId,me.authId),ri(b,ie.userId,me.id||me.localId));var Te=N.app;Te&&ri(b,ie.sessionId,Te.sesId);var gt=N.device;gt&&(ri(b,ie.deviceId,gt.id||gt.localId),ri(b,ie[Bt],gt.deviceClass),ri(b,ie.deviceIp,gt.ip),ri(b,ie.deviceModel,gt.model),ri(b,ie[Bt],gt[Bt]));var ft=f.ext.web;if(ft){ri(b,ie.deviceLanguage,ft.browserLang),ri(b,ie.deviceBrowserVersion,ft.browserVer),ri(b,ie.deviceBrowser,ft.browser);var bt=y[Dt]=y[Dt]||{},xt=bt[Kn]=bt[Kn]||{},rn=xt[Hn]=xt[Hn]||{};ri(rn,"domain",ft.domain),ri(rn,"isManual",ft.isManual?ra:null),ri(rn,"screenRes",ft.screenRes),ri(rn,"userConsent",ft.userConsent?ra:null)}var Ft=N.os;Ft&&ri(b,ie.deviceOS,Ft[Vt]);var fn=N.trace;fn&&(ri(b,ie.operationParentId,fn.parentID),ri(b,ie.operationName,st(m,fn[Vt])),ri(b,ie.operationId,fn[qn]));for(var gn={},ve=V[$t]-1;ve>=0;ve--){var Zn=V[ve];(0,D.rW)(Zn,function(Bi,Lr){gn[Bi]=Lr}),V.splice(ve,1)}(0,D.rW)(V,function(Bi,Lr){gn[Bi]=Lr});var Gi=(0,S.uc)((0,S.uc)({},b),gn);Gi[ie.internalSdkVersion]||(Gi[ie.internalSdkVersion]="javascript:".concat(Ka.Version)),y[Qe]=(0,D.Ax)(Gi)}o(Wa,"_extractPartAExtensions");function or(m,f,y){(0,D.le)(m)||(0,D.rW)(m,function(b,N){(0,D.hj)(N)?y[b]=N:(0,D.HD)(N)?f[b]=N:(0,Ne.nS)()&&(f[b]=(0,Ne.xA)()[ui](N))})}o(or,"_extractPropsAndMeasurements");function wr(m,f){(0,D.le)(m)||(0,D.rW)(m,function(y,b){m[y]=b||f})}o(wr,"_convertPropsUndefinedToCustomDefinedValue");function Sr(m,f,y,b){var N=new de(m,b,f);ri(N,"sampleRate",y[J]),(y[Kn]||{}).startTime&&(N.time=(0,D.Y6)(y[Kn].startTime)),N.iKey=y.iKey;var V=y.iKey.replace(/-/g,"");return N[Vt]=N[Vt].replace("{0}",V),Wa(m,y,N),y[Qe]=y[Qe]||[],(0,D.Ax)(N)}o(Sr,"_createEnvelope");function Cr(m,f){(0,D.le)(f[Kn])&&(0,I.kP)(m,1,46,"telemetryItem.baseData cannot be null.")}o(Cr,"EnvelopeCreatorInit");var Ka={Version:"2.8.9"};function aa(m,f,y){Cr(m,f);var b=f[Kn][ii]||{},N=f[Kn][Hn]||{};or(f[Dt],N,b),(0,D.le)(y)||wr(N,y);var V=f[Kn];if((0,D.le)(V))return(0,I.jV)(m,"Invalid input for dependency data"),null;var me=V[Hn]&&V[Hn][ke]?V[Hn][ke]:"GET",Te=new ci(m,V.id,V.target,V[Vt],V[je],V.success,V.responseCode,me,V.type,V.correlationContext,N,b),gt=new Be(ci[di],Te);return Sr(m,ci[Qn],f,gt)}o(aa,"DependencyEnvelopeCreator");function Sa(m,f,y){Cr(m,f);var b={},N={};f[$r]!==Mt[di]&&(b.baseTypeSource=f[$r]),f[$r]===Mt[di]?(b=f[Kn][Hn]||{},N=f[Kn][ii]||{}):f[Kn]&&or(f[Kn],b,N),or(f[Dt],b,N),(0,D.le)(y)||wr(b,y);var V=f[Kn][Vt],me=new Mt(m,V,b,N),Te=new Be(Mt[di],me);return Sr(m,Mt[Qn],f,Te)}o(Sa,"EventEnvelopeCreator");function $a(m,f,y){Cr(m,f);var b=f[Kn][ii]||{},N=f[Kn][Hn]||{};or(f[Dt],N,b),(0,D.le)(y)||wr(N,y);var V=f[Kn],me=Ot.CreateFromInterface(m,V,N,b),Te=new Be(Ot[di],me);return Sr(m,Ot[Qn],f,Te)}o($a,"ExceptionEnvelopeCreator");function Ga(m,f,y){Cr(m,f);var b=f[Kn],N=b[Hn]||{},V=b[ii]||{};or(f[Dt],N,V),(0,D.le)(y)||wr(N,y);var me=new pt(m,b[Vt],b.average,b.sampleCount,b.min,b.max,b.stdDev,N,V),Te=new Be(pt[di],me);return Sr(m,pt[Qn],f,Te)}o(Ga,"MetricEnvelopeCreator");function Qr(m,f,y){Cr(m,f);var b,N=f[Kn];!(0,D.le)(N)&&!(0,D.le)(N[Hn])&&!(0,D.le)(N[Hn][je])?(b=N[Hn][je],delete N[Hn][je]):!(0,D.le)(f[Dt])&&!(0,D.le)(f[Dt][je])&&(b=f[Dt][je],delete f[Dt][je]);var V=f[Kn],me;((f.ext||{}).trace||{})[qn]&&(me=f.ext.trace[qn]);var Te=V.id||me,gt=V[Vt],ft=V.uri,bt=V[Hn]||{},xt=V[ii]||{};if((0,D.le)(V.refUri)||(bt.refUri=V.refUri),(0,D.le)(V.pageType)||(bt.pageType=V.pageType),(0,D.le)(V.isLoggedIn)||(bt.isLoggedIn=V.isLoggedIn[cr]()),!(0,D.le)(V[Hn])){var rn=V[Hn];(0,D.rW)(rn,function(gn,ve){bt[gn]=ve})}or(f[Dt],bt,xt),(0,D.le)(y)||wr(bt,y);var Ft=new _n(m,gt,ft,b,bt,xt,Te),fn=new Be(_n[di],Ft);return Sr(m,_n[Qn],f,fn)}o(Qr,"PageViewEnvelopeCreator");function za(m,f,y){Cr(m,f);var b=f[Kn],N=b[Vt],V=b.uri||b.url,me=b[Hn]||{},Te=b[ii]||{};or(f[Dt],me,Te),(0,D.le)(y)||wr(me,y);var gt=new Fn(m,N,V,void 0,me,Te,b),ft=new Be(Fn[di],gt);return Sr(m,Fn[Qn],f,ft)}o(za,"PageViewPerformanceEnvelopeCreator");function Ca(m,f,y){Cr(m,f);var b=f[Kn].message,N=f[Kn].severityLevel,V=f[Kn][Hn]||{},me=f[Kn][ii]||{};or(f[Dt],V,me),(0,D.le)(y)||wr(V,y);var Te=new en(m,b,N,V,me),gt=new Be(en[di],Te);return Sr(m,en[Qn],f,gt)}o(Ca,"TraceEnvelopeCreator");function oa(m,f){(0,yn.QY)(m,null,null,f)}o(oa,"_disableEvents");function Ja(m){var f=(0,Ne.Me)(),y=(0,Ne.jW)(),b=!1,N=!0,V=(0,yn.jU)((0,nr.J)("OfflineListener"),m);try{if(Te((0,Ne.Jj)())&&(b=!0),f){var me=f.body||f;me.ononline&&Te(me)&&(b=!0)}b&&y&&!(0,D.le)(y[zr])&&(N=y[zr])}catch(rn){b=!1}function Te(rn){var Ft=!1;return rn&&(Ft=(0,yn.XO)(rn,"online",gt,V),Ft&&(0,yn.XO)(rn,"offline",ft,V)),Ft}o(Te,"_enableEvents");function gt(){N=!0}o(gt,"_setOnline");function ft(){N=!1}o(ft,"_setOffline");function bt(){var rn=!0;return b?rn=N:y&&!(0,D.le)(y[zr])&&(rn=y[zr]),rn}o(bt,"_isOnline");function xt(){var rn=(0,Ne.Jj)();if(rn&&b){if(oa(rn,V),f){var Ft=f.body||f;(0,D.o8)(Ft.ononline)||oa(Ft,V)}b=!1}}return o(xt,"_unload"),{isOnline:bt,isListening:function(){return b},unload:xt}}o(Ja,"createOfflineListener");var ba=function(){function m(f,y){var b=[],N=!1;this._get=function(){return b},this._set=function(V){return b=V,b},(0,R.Z)(m,this,function(V){V[Jr]=function(me){if(V[ur]()>=y.eventsLimitInMem()){N||((0,I.kP)(f,2,105,"Maximum in-memory buffer size reached: "+V[ur](),!0),N=!0);return}b[Oi](me)},V[ur]=function(){return b[$t]},V.size=function(){for(var me=b[$t],Te=0;Te<b[$t];Te++)me+=b[Te][$t];return y[ir]()||(me+=2),me},V[Ar]=function(){b=[],N=!1},V.getItems=function(){return b.slice(0)},V[Rr]=function(me){if(me&&me[$t]>0){var Te=y[ir]()?me.join(`
`):"["+me.join(",")+"]";return Te}return null}})}return o(m,"BaseSendBuffer"),m.__ieDyn=1,m}(),qi=function(m){(0,S.ne)(f,m);function f(y,b){var N=m.call(this,y,b)||this;return(0,R.Z)(f,N,function(V,me){V[Fi]=function(Te){me[Ar]()},V[Tr]=function(Te){}}),N}return o(f,"ArraySendBuffer"),f.__ieDyn=1,f}(ba),Va=function(m){(0,S.ne)(f,m);function f(y,b){var N=m.call(this,y,b)||this,V=!1;return(0,R.Z)(f,N,function(me,Te){var gt=rn(f[Ur]),ft=rn(f[dr]),bt=me._set(gt.concat(ft));bt[$t]>f[Br]&&(bt[$t]=f[Br]),Ft(f[dr],[]),Ft(f[Ur],bt),me[Jr]=function(fn){if(me[ur]()>=f[Br]){V||((0,I.kP)(y,2,67,"Maximum buffer size reached: "+me[ur](),!0),V=!0);return}Te[Jr](fn),Ft(f[Ur],me._get())},me[Ar]=function(){Te[Ar](),Ft(f[Ur],me._get()),Ft(f[dr],[]),V=!1},me[Fi]=function(fn){Ft(f[Ur],me._set(xt(fn,me._get())));var gn=rn(f[dr]);gn instanceof Array&&fn instanceof Array&&(gn=gn.concat(fn),gn[$t]>f[Br]&&((0,I.kP)(y,1,67,"Sent buffer reached its maximum size: "+gn[$t],!0),gn[$t]=f[Br]),Ft(f[dr],gn))},me[Tr]=function(fn){var gn=rn(f[dr]);gn=xt(fn,gn),Ft(f[dr],gn)};function xt(fn,gn){var ve=[];return(0,D.tO)(gn,function(Zn){!(0,D.mf)(Zn)&&(0,D.UA)(fn,Zn)===-1&&ve[Oi](Zn)}),ve}o(xt,"_removePayloadsFromBuffer");function rn(fn){var gn=fn;try{gn=b[hr]&&b[hr]()?b[hr]()+"_"+gn:gn;var ve=Yt(y,gn);if(ve){var Zn=(0,Ne.xA)().parse(ve);if((0,D.HD)(Zn)&&(Zn=(0,Ne.xA)().parse(Zn)),Zn&&(0,D.kJ)(Zn))return Zn}}catch(Gi){(0,I.kP)(y,1,42," storage key: "+gn+", "+(0,D.jj)(Gi),{exception:(0,Ne.eU)(Gi)})}return[]}o(rn,"_getBuffer");function Ft(fn,gn){var ve=fn;try{ve=b[hr]&&b[hr]()?b[hr]()+"_"+ve:ve;var Zn=JSON[ui](gn);Ut(y,ve,Zn)}catch(Gi){Ut(y,ve,JSON[ui]([])),(0,I.kP)(y,2,41," storage key: "+ve+", "+(0,D.jj)(Gi)+". Buffer cleared",{exception:(0,Ne.eU)(Gi)})}}o(Ft,"_setBuffer")}),N}return o(f,"SessionStorageSendBuffer"),f.BUFFER_KEY="AI_buffer",f.SENT_BUFFER_KEY="AI_sentBuffer",f.MAX_BUFFER_SIZE=2e3,f}(ba),ja=function(){function m(f){(0,R.Z)(m,this,function(y){y.serialize=function(me){var Te=b(me,"root");try{return(0,Ne.xA)()[ui](Te)}catch(gt){(0,I.kP)(f,1,48,gt&&(0,D.mf)(gt[cr])?gt[cr]():"Error serializing object",null,!0)}};function b(me,Te){var gt="__aiCircularRefCheck",ft={};if(!me)return(0,I.kP)(f,1,48,"cannot serialize object because it is null or undefined",{name:Te},!0),ft;if(me[gt])return(0,I.kP)(f,2,50,"Circular reference detected while serializing object",{name:Te},!0),ft;if(!me.aiDataContract){if(Te==="measurements")ft=V(me,"number",Te);else if(Te==="properties")ft=V(me,"string",Te);else if(Te==="tags")ft=V(me,"string",Te);else if((0,D.kJ)(me))ft=N(me,Te);else{(0,I.kP)(f,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Te},!0);try{(0,Ne.xA)()[ui](me),ft=me}catch(bt){(0,I.kP)(f,1,48,bt&&(0,D.mf)(bt[cr])?bt[cr]():"Error serializing object",null,!0)}}return ft}return me[gt]=!0,(0,D.rW)(me.aiDataContract,function(bt,xt){var rn=(0,D.mf)(xt)?xt()&1:xt&1,Ft=(0,D.mf)(xt)?xt()&4:xt&4,fn=xt&2,gn=me[bt]!==void 0,ve=(0,D.Kn)(me[bt])&&me[bt]!==null;if(rn&&!gn&&!fn)(0,I.kP)(f,1,24,"Missing required field specification. The field is required but not present on source",{field:bt,name:Te});else if(!Ft){var Zn=void 0;ve?fn?Zn=N(me[bt],bt):Zn=b(me[bt],bt):Zn=me[bt],Zn!==void 0&&(ft[bt]=Zn)}}),delete me[gt],ft}o(b,"_serializeObject");function N(me,Te){var gt;if(me)if(!(0,D.kJ)(me))(0,I.kP)(f,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Te},!0);else{gt=[];for(var ft=0;ft<me[$t];ft++){var bt=me[ft],xt=b(bt,Te+"["+ft+"]");gt[Oi](xt)}}return gt}o(N,"_serializeArray");function V(me,Te,gt){var ft;return me&&(ft={},(0,D.rW)(me,function(bt,xt){if(Te==="string")xt===void 0?ft[bt]="undefined":xt===null?ft[bt]="null":xt[cr]?ft[bt]=xt[cr]():ft[bt]="invalid field: toString() is not defined.";else if(Te==="number")if(xt===void 0)ft[bt]="undefined";else if(xt===null)ft[bt]="null";else{var rn=parseFloat(xt);isNaN(rn)?ft[bt]="NaN":ft[bt]=rn}else ft[bt]="invalid field: "+gt+" is of unknown type.",(0,I.kP)(f,1,ft[bt],null,!0)})),ft}o(V,"_serializeStringMap")})}return o(m,"Serializer"),m.__ieDyn=1,m}(),Ya=8,qa=function(){function m(){}return o(m,"HashCodeScoreGenerator"),m.prototype.getHashCodeScore=function(f){var y=this.getHashCode(f)/m.INT_MAX_VALUE;return y*100},m.prototype.getHashCode=function(f){if(f==="")return 0;for(;f[$t]<Ya;)f=f.concat(f);for(var y=5381,b=0;b<f[$t];++b)y=(y<<5)+y+f.charCodeAt(b),y=y&y;return Math.abs(y)},m.INT_MAX_VALUE=2147483647,m}(),Qa=function(){function m(){var f=this,y=new qa,b=new et;f[wa]=function(N){var V=0;return N[Qe]&&N[Qe][b.userId]?V=y.getHashCodeScore(N[Qe][b.userId]):N.ext&&N.ext.user&&N.ext.user.id?V=y[Ha](N.ext.user.id):N[Qe]&&N[Qe][b.operationId]?V=y.getHashCodeScore(N[Qe][b.operationId]):N.ext&&N.ext.telemetryTrace&&N.ext.telemetryTrace[qn]?V=y.getHashCodeScore(N.ext.telemetryTrace[qn]):V=Math.random()*100,V}}return o(m,"SamplingScoreGenerator"),m}(),Za=function(){function m(f,y){this.INT_MAX_VALUE=2147483647;var b=y||(0,I.vH)(null);(f>100||f<0)&&(b.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:f},!0),f=100),this[mr]=f,this.samplingScoreGenerator=new Qa}return o(m,"Sample"),m.prototype.isSampledIn=function(f){var y=this[mr],b=!1;return y==null||y>=100||f.baseType===pt[di]?!0:(b=this.samplingScoreGenerator[wa](f)<y,b)},m}(),br,Xa=65e3;function sa(m){try{return m.responseText}catch(f){}return null}o(sa,"_getResponseText");function De(){var m,f,y;return m={endpointUrl:function(){return Pe+F}},m[ir]=function(){return!1},m[qr]=function(){return 15e3},m[fr]=function(){return 102400},m[jr]=function(){return!1},m[pa]=function(){return!0},m[Yi]=function(){return!1},m[hi]=function(){return!0},m[Vi]=function(){return!1},m[Vr]=function(){return!1},m[$i]=function(){return!1},m[vr]=function(){return f},m[hr]=function(){return f},m[ma]=function(){return 100},m[ia]=function(){return y},m[rr]=function(){return f},m.eventsLimitInMem=function(){return 1e4},m}o(De,"_getDefaultAppInsightsChannelConfig");var Zr=(br={},br[Mt.dataType]=Sa,br[en.dataType]=Ca,br[_n.dataType]=Qr,br[Fn.dataType]=za,br[Ot.dataType]=$a,br[pt.dataType]=Ga,br[ci.dataType]=aa,br),la=function(m){(0,S.ne)(f,m);function f(){var y=m.call(this)||this;y.priority=1001,y.identifier=C,y._senderConfig=De();var b,N,V,me,Te,gt,ft,bt,xt=0,rn,Ft,fn,gn;return(0,R.Z)(f,y,function(ve,Zn){Pa(),ve.pause=function(){kr(),me=!0},ve.resume=function(){me&&(me=!1,N=null,ve._buffer.size()>ve._senderConfig[fr]()&&ve[Mr](!0,null,10),Xr())},ve.flush=function(le,lt,mt){if(le===void 0&&(le=!0),!me){kr();try{ve[Mr](le,null,mt||1)}catch(Wt){(0,I.kP)(ve[vi](),1,22,"flush failed, telemetry will not be collected: "+(0,D.jj)(Wt),{exception:(0,Ne.eU)(Wt)})}}},ve.onunloadFlush=function(){if(!me)if((ve._senderConfig[$i]()===!1||ve[Pn][hi]()===!1)&&(0,Ne.MF)())try{ve[Mr](!0,eo,2)}catch(le){(0,I.kP)(ve[vi](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,D.jj)(le),{exception:(0,Ne.eU)(le)})}else ve.flush()},ve.addHeader=function(le,lt){bt[le]=lt},ve.initialize=function(le,lt,mt,Wt){ve.isInitialized()&&(0,I.kP)(ve[vi](),1,28,"Sender is already initialized"),Zn.initialize(le,lt,mt,Wt);var mn=ve._getTelCtx(),Sn=ve.identifier;gt=new ja(lt.logger),b=0,N=null,V=0,ve[Pr]=null,ft=0;var En=ve[vi]();gn=(0,yn.jU)((0,nr.J)("Sender"),lt.evtNamespace&&lt.evtNamespace()),fn=Ja(gn);var Ci=De();(0,D.rW)(Ci,function(_i,Fr){ve[Pn][_i]=function(){var ai=mn.getConfig(Sn,_i,Fr());return!ai&&_i==="endpointUrl"&&(ai=Fr()),ai}}),ve._buffer=ve[Pn][pa]()&&Tn()?new Va(En,ve[Pn]):new qi(En,ve[Pn]),ve._sample=new Za(ve[Pn][ma](),En),Ho(le)||(0,I.kP)(En,1,100,"Invalid Instrumentation key "+le[vr]),!Ii(ve._senderConfig.endpointUrl())&&ve._senderConfig.customHeaders()&&ve._senderConfig.customHeaders()[$t]>0&&(0,D.tO)(ve[Pn][ia](),function(_i){y.addHeader(_i.header,_i.value)});var pi=ve[Pn],bi=null;!pi[Vi]()&&(0,Ne.cp)()?bi=Zi:!pi[Vi]()&&(0,Ne.Z3)()&&(bi=ca),!bi&&(0,Ne.JO)()&&(bi=Mi),rn=bi||ca,!pi[hi]()&&(0,Ne.MF)()&&(bi=Ti),ve[Pr]=bi||ca,!pi[Vr]()&&(0,Ne.JO)(!0)?Ft=po:(0,Ne.MF)()?Ft=Ti:!pi[Vi]()&&(0,Ne.cp)()?Ft=Zi:!pi[Vi]()&&(0,Ne.Z3)()?Ft=ca:Ft=rn},ve.processTelemetry=function(le,lt){lt=ve._getTelCtx(lt);var mt=lt[vi]();try{if(ve[Pn][jr]())return;if(!le){(0,I.kP)(mt,1,7,"Cannot send empty telemetry");return}if(le.baseData&&!le[Hr]){(0,I.kP)(mt,1,70,"Cannot send telemetry without baseData and baseType");return}if(le[Hr]||(le[Hr]="EventData"),!ve[Pr]){(0,I.kP)(mt,1,28,"Sender was not initialized");return}if(Gi(le))le[J]=ve._sample[mr];else{(0,I.kP)(mt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ve._sample[mr]});return}var Wt=ve[Pn][rr]()||void 0,mn=le.iKey||ve[Pn][vr](),Sn=f.constructEnvelope(le,mn,mt,Wt);if(!Sn){(0,I.kP)(mt,1,47,"Unable to create an AppInsights envelope");return}var En=!1;if(le[Qe]&&le[Qe][Le]&&((0,D.tO)(le[Qe][Le],function(_i){try{_i&&_i(Sn)===!1&&(En=!0,(0,I.jV)(mt,"Telemetry processor check returns false"))}catch(Fr){(0,I.kP)(mt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,D.jj)(Fr),{exception:(0,Ne.eU)(Fr)},!0)}}),delete le[Qe][Le]),En)return;var Ci=gt.serialize(Sn),pi=ve[gr],bi=pi.size();bi+Ci[$t]>ve[Pn][fr]()&&ve[Mr](!0,null,10),pi[Jr](Ci),Xr()}catch(_i){(0,I.kP)(mt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,D.jj)(_i),{exception:(0,Ne.eU)(_i)})}ve.processNext(le,lt)},ve[Wr]=function(le,lt,mt){le.readyState===4&&Bi(le.status,lt,le.responseURL,mt,ua(le),sa(le)||le.response)},ve[Mr]=function(le,lt,mt){if(le===void 0&&(le=!0),!me)try{var Wt=ve[gr];if(ve[Pn][jr]())Wt[Ar]();else{if(Wt[ur]()>0){var mn=Wt.getItems();yo(mt||0,le),lt?lt.call(y,mn,le):ve[Pr](mn,le)}V=+new Date}kr()}catch(En){var Sn=(0,Ne.sA)();(!Sn||Sn>9)&&(0,I.kP)(ve[vi](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,D.jj)(En),{exception:(0,Ne.eU)(En)})}},ve._doTeardown=function(le,lt){ve.onunloadFlush(),fn.unload(),Pa()},ve[Bn]=function(le,lt,mt){(0,I.kP)(ve[vi](),2,26,"Failed to send telemetry.",{message:lt}),ve._buffer[Tr](le)},ve[ji]=function(le,lt){for(var mt=[],Wt=[],mn=lt.errors.reverse(),Sn=0,En=mn;Sn<En.length;Sn++){var Ci=En[Sn],pi=le.splice(Ci.index,1)[0];Ma(Ci.statusCode)?Wt[Oi](pi):mt[Oi](pi)}le[$t]>0&&ve[yr](le,lt[ar]),mt[$t]>0&&ve[Bn](mt,ua(null,["partial success",lt[ar],"of",lt.itemsReceived].join(" "))),Wt[$t]>0&&(Ra(Wt),(0,I.kP)(ve[vi](),2,40,"Partial success. Delivered: "+le[$t]+", Failed: "+mt[$t]+". Will retry to send "+Wt[$t]+" our of "+lt[Kr]+" items"))},ve[yr]=function(le,lt){ve._buffer[Tr](le)},ve._xdrOnLoad=function(le,lt){var mt=sa(le);if(le&&(mt+""=="200"||mt===""))b=0,ve[yr](lt,0);else{var Wt=Aa(mt);Wt&&Wt.itemsReceived&&Wt.itemsReceived>Wt[ar]&&!ve[Pn][Yi]()?ve[ji](lt,Wt):ve[Bn](lt,to(le))}};function Gi(le){return ve._sample.isSampledIn(le)}o(Gi,"_isSampledIn");function Bi(le,lt,mt,Wt,mn,Sn){var En=null;if(ve._appId||(En=Aa(Sn),En&&En.appId&&(ve._appId=En.appId)),(le<200||le>=300)&&le!==0){if((le===301||le===307||le===308)&&!Lr(mt)){ve[Bn](lt,mn);return}!ve[Pn][Yi]()&&Ma(le)?(Ra(lt),(0,I.kP)(ve[vi](),2,40,". Response code "+le+". Will retry to send "+lt[$t]+" items.")):ve[Bn](lt,mn)}else if(fn&&!fn.isOnline()){if(!ve[Pn][Yi]()){var Ci=10;Ra(lt,Ci),(0,I.kP)(ve[vi](),2,40,". Offline - Response Code: ".concat(le,". Offline status: ").concat(!fn.isOnline(),". Will retry to send ").concat(lt.length," items."))}}else Lr(mt),le===206?(En||(En=Aa(Sn)),En&&!ve[Pn][Yi]()?ve[ji](lt,En):ve[Bn](lt,mn)):(b=0,ve[yr](lt,Wt))}o(Bi,"_checkResponsStatus");function Lr(le){return ft>=10?!1:!(0,D.le)(le)&&le!==""&&le!==ve[Pn][pr]()?(ve[Pn][pr]=function(){return le},++ft,!0):!1}o(Lr,"_checkAndUpdateEndPointUrl");function eo(le,lt){Ft?Ft(le,!1):Ti(le,lt)}o(eo,"_doUnloadSend");function Ea(le){var lt=(0,Ne.jW)(),mt=ve[gr],Wt=ve[Pn][pr](),mn=ve._buffer[Rr](le),Sn=new Blob([mn],{type:"text/plain;charset=UTF-8"}),En=lt.sendBeacon(Wt,Sn);return En&&(mt[Fi](le),ve._onSuccess(le,le[$t])),En}o(Ea,"_doBeaconSend");function Ti(le,lt){if((0,D.kJ)(le)&&le[$t]>0&&!Ea(le)){for(var mt=[],Wt=0;Wt<le[$t];Wt++){var mn=le[Wt];Ea([mn])||mt[Oi](mn)}mt[$t]>0&&(rn&&rn(mt,!0),(0,I.kP)(ve[vi](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(Ti,"_beaconSender");function ca(le,lt){var mt=new XMLHttpRequest,Wt=ve[Pn][pr]();try{mt[U]=!0}catch(Sn){}mt.open("POST",Wt,lt),mt[Yr]("Content-type","application/json"),Ii(Wt)&&mt[Yr](Nn[6],Nn[7]),(0,D.tO)((0,D.FY)(bt),function(Sn){mt[Yr](Sn,bt[Sn])}),mt.onreadystatechange=function(){return ve._xhrReadyStateChange(mt,le,le[$t])},mt.onerror=function(Sn){return ve[Bn](le,ua(mt),Sn)};var mn=ve._buffer[Rr](le);mt.send(mn),ve._buffer[Fi](le)}o(ca,"_xhrSender");function po(le,lt){if((0,D.kJ)(le)){for(var mt=le[$t],Wt=0;Wt<le[$t];Wt++)mt+=le[Wt][$t];xt+mt<=Xa?Da(le,!1):(0,Ne.MF)()?Ti(le,lt):(rn&&rn(le,!0),(0,I.kP)(ve[vi](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(po,"_fetchKeepAliveSender");function Mi(le,lt){Da(le,!0)}o(Mi,"_fetchSender");function Da(le,lt){var mt,Wt=ve[Pn][pr](),mn=ve._buffer[Rr](le),Sn=new Blob([mn],{type:"application/json"}),En=new Headers,Ci=mn[$t],pi=!1,bi=!1;Ii(Wt)&&En.append(Nn[6],Nn[7]),(0,D.tO)((0,D.FY)(bt),function(ai){En.append(ai,bt[ai])});var _i=(mt={method:"POST",headers:En,body:Sn},mt[U]=!0,mt);lt||(_i.keepalive=!0,pi=!0,xt+=Ci);var Fr=new Request(Wt,_i);try{Fr[U]=!0}catch(ai){}ve._buffer[Fi](le);try{fetch(Fr).then(function(ai){lt||(xt-=Ci,Ci=0),bi||(bi=!0,ai.ok?ai.text().then(function(sr){Bi(ai.status,le,ai.url,le[$t],ai.statusText,sr)}):ve[Bn](le,ai.statusText))}).catch(function(ai){lt||(xt-=Ci,Ci=0),bi||(bi=!0,ve[Bn](le,ai.message))})}catch(ai){bi||ve[Bn](le,(0,Ne.eU)(ai))}pi&&!bi&&(bi=!0,ve._onSuccess(le,le[$t]))}o(Da,"_doFetchSender");function Aa(le){try{if(le&&le!==""){var lt=(0,Ne.xA)().parse(le);if(lt&&lt.itemsReceived&&lt.itemsReceived>=lt[ar]&&lt.itemsReceived-lt.itemsAccepted===lt.errors[$t])return lt}}catch(mt){(0,I.kP)(ve[vi](),1,43,"Cannot parse the response. "+(0,D.jj)(mt),{response:le})}return null}o(Aa,"_parseResponse");function Ra(le,lt){if(lt===void 0&&(lt=1),!(!le||le[$t]===0)){var mt=ve[gr];mt[Tr](le),b++;for(var Wt=0,mn=le;Wt<mn.length;Wt++){var Sn=mn[Wt];mt[Jr](Sn)}Ta(lt),Xr()}}o(Ra,"_resendPayload");function Ta(le){var lt=10,mt;if(b<=1)mt=lt;else{var Wt=(Math.pow(2,b)-1)/2,mn=Math.floor(Math.random()*Wt*lt)+1;mn=le*mn,mt=Math.max(Math.min(mn,3600),lt)}var Sn=(0,D.m6)()+mt*1e3;N=Sn}o(Ta,"_setRetryTime");function Xr(){if(!Te&&!me){var le=N?Math.max(0,N-(0,D.m6)()):0,lt=Math.max(ve[Pn][qr](),le);Te=setTimeout(function(){Te=null,ve[Mr](!0,null,1)},lt)}}o(Xr,"_setupTimer");function kr(){clearTimeout(Te),Te=null,N=null}o(kr,"_clearScheduledTimer");function Ma(le){return le===401||le===403||le===408||le===429||le===500||le===502||le===503||le===504}o(Ma,"_isRetriable");function ua(le,lt){return le?"XMLHttpRequest,Status:"+le.status+",Response:"+sa(le)||0||0:lt}o(ua,"_formatErrorMessageXhr");function Zi(le,lt){var mt=ve[gr],Wt=(0,Ne.Jj)(),mn=new XDomainRequest;mn.onload=function(){return ve._xdrOnLoad(mn,le)},mn.onerror=function(pi){return ve[Bn](le,to(mn),pi)};var Sn=Wt&&Wt.location&&Wt.location.protocol||"";if(ve[Pn][pr]().lastIndexOf(Sn,0)!==0){(0,I.kP)(ve[vi](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),mt[Ar]();return}var En=ve[Pn][pr]().replace(/^(https?:)/,"");mn.open("POST",En);var Ci=mt[Rr](le);mn.send(Ci),mt[Fi](le)}o(Zi,"_xdrSender");function to(le,lt){return le?"XDomainRequest,Response:"+sa(le)||0:lt}o(to,"_formatErrorMessageXdr");function mo(){var le="getNotifyMgr";return ve.core[le]?ve.core[le]():ve.core._notificationManager}o(mo,"_getNotifyMgr");function yo(le,lt){var mt=mo();if(mt&&mt[ya])try{mt[ya](le,lt)}catch(Wt){(0,I.kP)(ve[vi](),1,74,"send request notification failed: "+(0,D.jj)(Wt),{exception:(0,Ne.eU)(Wt)})}}o(yo,"_notifySendRequest");function Ho(le){var lt=(0,D.le)(le[go])?!1:le[go];if(lt)return!0;var mt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Wt=new RegExp(mt);return Wt.test(le[vr])}o(Ho,"_validateInstrumentationKey");function Pa(){ve[Pr]=null,ve[gr]=null,ve._appId=null,ve._sample=null,bt={},fn=null,b=0,N=null,V=null,me=!1,Te=null,gt=null,ft=0,xt=0,rn=null,Ft=null,gn=null}o(Pa,"_initDefaults")}),y}return o(f,"Sender"),f.constructEnvelope=function(y,b,N,V){var me;b!==y.iKey&&!(0,D.le)(b)?me=(0,S.uc)((0,S.uc)({},y),{iKey:b}):me=y;var Te=Zr[me.baseType]||Sa;return Te(N,me,V)},f}(Ni.i),_a=T(121),Ui="initialize",Ir="diagnosticLogInterval",vo=T(310),Qi=(0,bn.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),_r=function(){function m(f){var y=new _a.F;((0,D.le)(f)||(0,D.le)(f.instrumentationKey))&&(0,D._y)("Invalid input configuration"),(0,R.Z)(m,this,function(b){b.config=f,N(),b[Ui]=N,b.getSKUDefaults=function(){b.config[Ir]=b.config[Ir]&&b.config[Ir]>0?b.config[Ir]:1e4},b.getSKUDefaults(),(0,D.Vb)(b,y,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function N(){var V=[],me=new la;V.push(me),y[Ui](b.config,V),me[Ui](b.config,y,V),y.pollInternalLogs()}o(N,"_initialize")})}return o(m,"ApplicationInsights"),m.__ieDyn=1,m}()},679:(Rt,l,T)=>{"use strict";T.d(l,{Z:()=>$e});/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,S="undefined",M="constructor",C="prototype",B="function",U="_dynInstFuncs",J="_isDynProxy",Le="_dynClass",ke="_dynCls$",Pe="_dynInstChk",F=Pe,be="_dfOpts",Ie="_unknown_",he="__proto__",oe="_dyn"+he,ze="__dynProto$Gbl",X="_dynInstProto",Me="useBaseInst",se="setInstFuncs",Q=Object,z=Q.getPrototypeOf,Z=Q.getOwnPropertyNames;function ae(){var $;return typeof globalThis!==S&&($=globalThis),!$&&typeof self!==S&&($=self),!$&&typeof window!==S&&($=window),!$&&typeof T.g!==S&&($=T.g),$||{}}o(ae,"_getGlobal");var Ke=ae(),Fe=Ke[ze]||(Ke[ze]={o:(R={},R[se]=!0,R[Me]=!0,R),n:1e3});function We($,pe){return $&&Q[C].hasOwnProperty.call($,pe)}o(We,"_hasOwnProperty");function Je($){return $&&($===Q[C]||$===Array[C])}o(Je,"_isObjectOrArrayPrototype");function q($){return Je($)||$===Function[C]}o(q,"_isObjectArrayOrFunctionPrototype");function E($){var pe;if($){if(z)return z($);var Y=$[he]||$[C]||($[M]?$[M][C]:null);pe=$[oe]||Y,We($,oe)||(delete $[X],pe=$[oe]=$[X]||$[oe],$[X]=Y)}return pe}o(E,"_getObjProto");function xe($,pe){var Y=[];if(Z)Y=Z($);else for(var ce in $)typeof ce=="string"&&We($,ce)&&Y.push(ce);if(Y&&Y.length>0)for(var Ge=0;Ge<Y.length;Ge++)pe(Y[Ge])}o(xe,"_forEachProp");function He($,pe,Y){return pe!==M&&typeof $[pe]===B&&(Y||We($,pe))}o(He,"_isDynamicCandidate");function Oe($){throw new TypeError("DynamicProto: "+$)}o(Oe,"_throwTypeError");function re($){var pe={};return xe($,function(Y){!pe[Y]&&He($,Y,!1)&&(pe[Y]=$[Y])}),pe}o(re,"_getInstanceFuncs");function L($,pe){for(var Y=$.length-1;Y>=0;Y--)if($[Y]===pe)return!0;return!1}o(L,"_hasVisited");function Se($,pe,Y,ce){function Ge(ee,W,ye){var fe=W[ye];if(fe[J]&&ce){var vt=ee[U]||{};vt[F]!==!1&&(fe=(vt[W[Le]]||{})[ye]||fe)}return function(){return fe.apply(ee,arguments)}}o(Ge,"_instFuncProxy");var at={};xe(Y,function(ee){at[ee]=Ge(pe,Y,ee)});for(var ne=E($),ge=[];ne&&!q(ne)&&!L(ge,ne);)xe(ne,function(ee){!at[ee]&&He(ne,ee,!z)&&(at[ee]=Ge(pe,ne,ee))}),ge.push(ne),ne=E(ne);return at}o(Se,"_getBaseFuncs");function Re($,pe,Y,ce){var Ge=null;if($&&We(Y,Le)){var at=$[U]||{};if(Ge=(at[Y[Le]]||{})[pe],Ge||Oe("Missing ["+pe+"] "+B),!Ge[Pe]&&at[F]!==!1){for(var ne=!We($,pe),ge=E($),ee=[];ne&&ge&&!q(ge)&&!L(ee,ge);){var W=ge[pe];if(W){ne=W===ce;break}ee.push(ge),ge=E(ge)}try{ne&&($[pe]=Ge),Ge[Pe]=1}catch(ye){at[F]=!1}}}return Ge}o(Re,"_getInstFunc");function Ee($,pe,Y){var ce=pe[$];return ce===Y&&(ce=E(pe)[$]),typeof ce!==B&&Oe("["+$+"] is not a "+B),ce}o(Ee,"_getProtoFunc");function qe($,pe,Y,ce,Ge){function at(ee,W){var ye=o(function(){var fe=Re(this,W,ee,ye)||Ee(W,ee,ye);return fe.apply(this,arguments)},"dynProtoProxy");return ye[J]=1,ye}if(o(at,"_createDynamicPrototype"),!Je($)){var ne=Y[U]=Y[U]||{},ge=ne[pe]=ne[pe]||{};ne[F]!==!1&&(ne[F]=!!Ge),xe(Y,function(ee){He(Y,ee,!1)&&Y[ee]!==ce[ee]&&(ge[ee]=Y[ee],delete Y[ee],(!We($,ee)||$[ee]&&!$[ee][J])&&($[ee]=at($,ee)))})}}o(qe,"_populatePrototype");function Tt($,pe){if(z){for(var Y=[],ce=E(pe);ce&&!q(ce)&&!L(Y,ce);){if(ce===$)return!0;Y.push(ce),ce=E(ce)}return!1}return!0}o(Tt,"_checkPrototype");function it($,pe){return We($,C)?$.name||pe||Ie:(($||{})[M]||{}).name||pe||Ie}o(it,"_getObjName");function $e($,pe,Y,ce){We($,C)||Oe("theClass is an invalid class definition.");var Ge=$[C];Tt(Ge,pe)||Oe("["+it($)+"] not in hierarchy of ["+it(pe)+"]");var at=null;We(Ge,Le)?at=Ge[Le]:(at=ke+it($,"_")+"$"+Fe.n,Fe.n++,Ge[Le]=at);var ne=$e[be],ge=!!ne[Me];ge&&ce&&ce[Me]!==void 0&&(ge=!!ce[Me]);var ee=re(pe),W=Se(Ge,pe,ee,ge);Y(pe,W);var ye=!!z&&!!ne[se];ye&&ce&&(ye=!!ce[se]),qe(Ge,at,pe,ee,ye!==!1)}o($e,"dynamicProto"),$e[be]=Fe.o},179:(Rt,l,T)=>{Rt=T.nmd(Rt);var R=200,S="__lodash_hash_undefined__",M=1,C=2,B=9007199254740991,U="[object Arguments]",J="[object Array]",Le="[object AsyncFunction]",ke="[object Boolean]",Pe="[object Date]",F="[object Error]",be="[object Function]",Ie="[object GeneratorFunction]",he="[object Map]",oe="[object Number]",ze="[object Null]",X="[object Object]",Me="[object Promise]",se="[object Proxy]",Q="[object RegExp]",z="[object Set]",Z="[object String]",ae="[object Symbol]",Ke="[object Undefined]",Fe="[object WeakMap]",We="[object ArrayBuffer]",Je="[object DataView]",q="[object Float32Array]",E="[object Float64Array]",xe="[object Int8Array]",He="[object Int16Array]",Oe="[object Int32Array]",re="[object Uint8Array]",L="[object Uint8ClampedArray]",Se="[object Uint16Array]",Re="[object Uint32Array]",Ee=/[\\^$.*+?()[\]{}|]/g,qe=/^\[object .+?Constructor\]$/,Tt=/^(?:0|[1-9]\d*)$/,it={};it[q]=it[E]=it[xe]=it[He]=it[Oe]=it[re]=it[L]=it[Se]=it[Re]=!0,it[U]=it[J]=it[We]=it[ke]=it[Je]=it[Pe]=it[F]=it[be]=it[he]=it[oe]=it[X]=it[Q]=it[z]=it[Z]=it[Fe]=!1;var $e=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,$=typeof self=="object"&&self&&self.Object===Object&&self,pe=$e||$||Function("return this")(),Y=l&&!l.nodeType&&l,ce=Y&&!0&&Rt&&!Rt.nodeType&&Rt,Ge=ce&&ce.exports===Y,at=Ge&&$e.process,ne=function(){try{return at&&at.binding&&at.binding("util")}catch(v){}}(),ge=ne&&ne.isTypedArray;function ee(v,_){for(var H=-1,we=v==null?0:v.length,ut=0,et=[];++H<we;){var K=v[H];_(K,H,v)&&(et[ut++]=K)}return et}o(ee,"arrayFilter");function W(v,_){for(var H=-1,we=_.length,ut=v.length;++H<we;)v[ut+H]=_[H];return v}o(W,"arrayPush");function ye(v,_){for(var H=-1,we=v==null?0:v.length;++H<we;)if(_(v[H],H,v))return!0;return!1}o(ye,"arraySome");function fe(v,_){for(var H=-1,we=Array(v);++H<v;)we[H]=_(H);return we}o(fe,"baseTimes");function vt(v){return function(_){return v(_)}}o(vt,"baseUnary");function Ce(v,_){return v.has(_)}o(Ce,"cacheHas");function D(v,_){return v==null?void 0:v[_]}o(D,"getValue");function I(v){var _=-1,H=Array(v.size);return v.forEach(function(we,ut){H[++_]=[ut,we]}),H}o(I,"mapToArray");function Ne(v,_){return function(H){return v(_(H))}}o(Ne,"overArg");function St(v){var _=-1,H=Array(v.size);return v.forEach(function(we){H[++_]=we}),H}o(St,"setToArray");var ht=Array.prototype,kt=Function.prototype,st=Object.prototype,At=pe["__core-js_shared__"],Ct=kt.toString,dn=st.hasOwnProperty,pn=function(){var v=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Dn=st.toString,$n=RegExp("^"+Ct.call(dn).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Ge?pe.Buffer:void 0,Et=pe.Symbol,jt=pe.Uint8Array,Mt=st.propertyIsEnumerable,en=ht.splice,rt=Et?Et.toStringTag:void 0,tn=Object.getOwnPropertySymbols,sn=Ye?Ye.isBuffer:void 0,ln=Ne(Object.keys,Object),Zt=si(pe,"DataView"),_n=si(pe,"Map"),Fn=si(pe,"Promise"),ei=si(pe,"Set"),fi=si(pe,"WeakMap"),xn=si(Object,"create"),mi=Ri(Zt),er=Ri(_n),Wi=Ri(Fn),tr=Ri(ei),Ki=Ri(fi),Ei=Et?Et.prototype:void 0,k=Ei?Ei.valueOf:void 0;function Ue(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var we=v[_];this.set(we[0],we[1])}}o(Ue,"Hash");function Xe(){this.__data__=xn?xn(null):{},this.size=0}o(Xe,"hashClear");function dt(v){var _=this.has(v)&&delete this.__data__[v];return this.size-=_?1:0,_}o(dt,"hashDelete");function ct(v){var _=this.__data__;if(xn){var H=_[v];return H===S?void 0:H}return dn.call(_,v)?_[v]:void 0}o(ct,"hashGet");function Lt(v){var _=this.__data__;return xn?_[v]!==void 0:dn.call(_,v)}o(Lt,"hashHas");function Wn(v,_){var H=this.__data__;return this.size+=this.has(v)?0:1,H[v]=xn&&_===void 0?S:_,this}o(Wn,"hashSet"),Ue.prototype.clear=Xe,Ue.prototype.delete=dt,Ue.prototype.get=ct,Ue.prototype.has=Lt,Ue.prototype.set=Wn;function An(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var we=v[_];this.set(we[0],we[1])}}o(An,"ListCache");function yt(){this.__data__=[],this.size=0}o(yt,"listCacheClear");function _t(v){var _=this.__data__,H=wn(_,v);if(H<0)return!1;var we=_.length-1;return H==we?_.pop():en.call(_,H,1),--this.size,!0}o(_t,"listCacheDelete");function Ot(v){var _=this.__data__,H=wn(_,v);return H<0?void 0:_[H][1]}o(Ot,"listCacheGet");function ot(v){return wn(this.__data__,v)>-1}o(ot,"listCacheHas");function Qt(v,_){var H=this.__data__,we=wn(H,v);return we<0?(++this.size,H.push([v,_])):H[we][1]=_,this}o(Qt,"listCacheSet"),An.prototype.clear=yt,An.prototype.delete=_t,An.prototype.get=Ot,An.prototype.has=ot,An.prototype.set=Qt;function Kt(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var we=v[_];this.set(we[0],we[1])}}o(Kt,"MapCache");function pt(){this.size=0,this.__data__={hash:new Ue,map:new(_n||An),string:new Ue}}o(pt,"mapCacheClear");function nn(v){var _=zn(this,v).delete(v);return this.size-=_?1:0,_}o(nn,"mapCacheDelete");function Xt(v){return zn(this,v).get(v)}o(Xt,"mapCacheGet");function Cn(v){return zn(this,v).has(v)}o(Cn,"mapCacheHas");function yn(v,_){var H=zn(this,v),we=H.size;return H.set(v,_),this.size+=H.size==we?0:1,this}o(yn,"mapCacheSet"),Kt.prototype.clear=pt,Kt.prototype.delete=nn,Kt.prototype.get=Xt,Kt.prototype.has=Cn,Kt.prototype.set=yn;function Jn(v){var _=-1,H=v==null?0:v.length;for(this.__data__=new Kt;++_<H;)this.add(v[_])}o(Jn,"SetCache");function bn(v){return this.__data__.set(v,S),this}o(bn,"setCacheAdd");function Nn(v){return this.__data__.has(v)}o(Nn,"setCacheHas"),Jn.prototype.add=Jn.prototype.push=bn,Jn.prototype.has=Nn;function zt(v){var _=this.__data__=new An(v);this.size=_.size}o(zt,"Stack");function Pt(){this.__data__=new An,this.size=0}o(Pt,"stackClear");function Gt(v){var _=this.__data__,H=_.delete(v);return this.size=_.size,H}o(Gt,"stackDelete");function an(v){return this.__data__.get(v)}o(an,"stackGet");function Rn(v){return this.__data__.has(v)}o(Rn,"stackHas");function Jt(v,_){var H=this.__data__;if(H instanceof An){var we=H.__data__;if(!_n||we.length<R-1)return we.push([v,_]),this.size=++H.size,this;H=this.__data__=new Kt(we)}return H.set(v,_),this.size=H.size,this}o(Jt,"stackSet"),zt.prototype.clear=Pt,zt.prototype.delete=Gt,zt.prototype.get=an,zt.prototype.has=Rn,zt.prototype.set=Jt;function on(v,_){var H=Li(v),we=!H&&Un(v),ut=!H&&!we&&un(v),et=!H&&!we&&!ut&&yi(v),K=H||we||ut||et,ie=K?fe(v.length,String):[],de=ie.length;for(var Be in v)(_||dn.call(v,Be))&&!(K&&(Be=="length"||ut&&(Be=="offset"||Be=="parent")||et&&(Be=="buffer"||Be=="byteLength"||Be=="byteOffset")||Yn(Be,de)))&&ie.push(Be);return ie}o(on,"arrayLikeKeys");function wn(v,_){for(var H=v.length;H--;)if(zi(v[H][0],_))return H;return-1}o(wn,"assocIndexOf");function In(v,_,H){var we=_(v);return Li(v)?we:W(we,H(v))}o(In,"baseGetAllKeys");function cn(v){return v==null?v===void 0?Ke:ze:rt&&rt in Object(v)?ni(v):Ii(v)}o(cn,"baseGetTag");function Ln(v){return Ni(v)&&cn(v)==U}o(Ln,"baseIsArguments");function ti(v,_,H,we,ut){return v===_?!0:v==null||_==null||!Ni(v)&&!Ni(_)?v!==v&&_!==_:On(v,_,H,we,ti,ut)}o(ti,"baseIsEqual");function On(v,_,H,we,ut,et){var K=Li(v),ie=Li(_),de=K?J:jn(v),Be=ie?J:jn(_);de=de==U?X:de,Be=Be==U?X:Be;var je=de==X,Qe=Be==X,Bt=de==Be;if(Bt&&un(v)){if(!un(_))return!1;K=!0,je=!1}if(Bt&&!je)return et||(et=new zt),K||yi(v)?Yt(v,_,H,we,ut,et):Ut(v,_,de,H,we,ut,et);if(!(H&M)){var Dt=je&&dn.call(v,"__wrapped__"),Vt=Qe&&dn.call(_,"__wrapped__");if(Dt||Vt){var qn=Dt?v.value():v,$t=Vt?_.value():_;return et||(et=new zt),ut(qn,$t,H,we,et)}}return Bt?(et||(et=new zt),oi(v,_,H,we,ut,et)):!1}o(On,"baseIsEqualDeep");function Vn(v){if(!nr(v)||Ai(v))return!1;var _=li(v)?$n:qe;return _.test(Ri(v))}o(Vn,"baseIsNative");function Tn(v){return Ni(v)&&ci(v.length)&&!!it[cn(v)]}o(Tn,"baseIsTypedArray");function Gn(v){if(!Si(v))return ln(v);var _=[];for(var H in Object(v))dn.call(v,H)&&H!="constructor"&&_.push(H);return _}o(Gn,"baseKeys");function Yt(v,_,H,we,ut,et){var K=H&M,ie=v.length,de=_.length;if(ie!=de&&!(K&&de>ie))return!1;var Be=et.get(v);if(Be&&et.get(_))return Be==_;var je=-1,Qe=!0,Bt=H&C?new Jn:void 0;for(et.set(v,_),et.set(_,v);++je<ie;){var Dt=v[je],Vt=_[je];if(we)var qn=K?we(Vt,Dt,je,_,v,et):we(Dt,Vt,je,v,_,et);if(qn!==void 0){if(qn)continue;Qe=!1;break}if(Bt){if(!ye(_,function($t,ui){if(!Ce(Bt,ui)&&(Dt===$t||ut(Dt,$t,H,we,et)))return Bt.push(ui)})){Qe=!1;break}}else if(!(Dt===Vt||ut(Dt,Vt,H,we,et))){Qe=!1;break}}return et.delete(v),et.delete(_),Qe}o(Yt,"equalArrays");function Ut(v,_,H,we,ut,et,K){switch(H){case Je:if(v.byteLength!=_.byteLength||v.byteOffset!=_.byteOffset)return!1;v=v.buffer,_=_.buffer;case We:return!(v.byteLength!=_.byteLength||!et(new jt(v),new jt(_)));case ke:case Pe:case oe:return zi(+v,+_);case F:return v.name==_.name&&v.message==_.message;case Q:case Z:return v==_+"";case he:var ie=I;case z:var de=we&M;if(ie||(ie=St),v.size!=_.size&&!de)return!1;var Be=K.get(v);if(Be)return Be==_;we|=C,K.set(v,_);var je=Yt(ie(v),ie(_),we,ut,et,K);return K.delete(v),je;case ae:if(k)return k.call(v)==k.call(_)}return!1}o(Ut,"equalByTag");function oi(v,_,H,we,ut,et){var K=H&M,ie=ki(v),de=ie.length,Be=ki(_),je=Be.length;if(de!=je&&!K)return!1;for(var Qe=de;Qe--;){var Bt=ie[Qe];if(!(K?Bt in _:dn.call(_,Bt)))return!1}var Dt=et.get(v);if(Dt&&et.get(_))return Dt==_;var Vt=!0;et.set(v,_),et.set(_,v);for(var qn=K;++Qe<de;){Bt=ie[Qe];var $t=v[Bt],ui=_[Bt];if(we)var ii=K?we(ui,$t,Bt,_,v,et):we($t,ui,Bt,v,_,et);if(!(ii===void 0?$t===ui||ut($t,ui,H,we,et):ii)){Vt=!1;break}qn||(qn=Bt=="constructor")}if(Vt&&!qn){var di=v.constructor,Qn=_.constructor;di!=Qn&&"constructor"in v&&"constructor"in _&&!(typeof di=="function"&&di instanceof di&&typeof Qn=="function"&&Qn instanceof Qn)&&(Vt=!1)}return et.delete(v),et.delete(_),Vt}o(oi,"equalObjects");function ki(v){return In(v,Mn,xi)}o(ki,"getAllKeys");function zn(v,_){var H=v.__data__;return Di(_)?H[typeof _=="string"?"string":"hash"]:H.map}o(zn,"getMapData");function si(v,_){var H=D(v,_);return Vn(H)?H:void 0}o(si,"getNative");function ni(v){var _=dn.call(v,rt),H=v[rt];try{v[rt]=void 0;var we=!0}catch(et){}var ut=Dn.call(v);return we&&(_?v[rt]=H:delete v[rt]),ut}o(ni,"getRawTag");var xi=tn?function(v){return v==null?[]:(v=Object(v),ee(tn(v),function(_){return Mt.call(v,_)}))}:kn,jn=cn;(Zt&&jn(new Zt(new ArrayBuffer(1)))!=Je||_n&&jn(new _n)!=he||Fn&&jn(Fn.resolve())!=Me||ei&&jn(new ei)!=z||fi&&jn(new fi)!=Fe)&&(jn=o(function(v){var _=cn(v),H=_==X?v.constructor:void 0,we=H?Ri(H):"";if(we)switch(we){case mi:return Je;case er:return he;case Wi:return Me;case tr:return z;case Ki:return Fe}return _},"getTag"));function Yn(v,_){return _=_==null?B:_,!!_&&(typeof v=="number"||Tt.test(v))&&v>-1&&v%1==0&&v<_}o(Yn,"isIndex");function Di(v){var _=typeof v;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?v!=="__proto__":v===null}o(Di,"isKeyable");function Ai(v){return!!pn&&pn in v}o(Ai,"isMasked");function Si(v){var _=v&&v.constructor,H=typeof _=="function"&&_.prototype||st;return v===H}o(Si,"isPrototype");function Ii(v){return Dn.call(v)}o(Ii,"objectToString");function Ri(v){if(v!=null){try{return Ct.call(v)}catch(_){}try{return v+""}catch(_){}}return""}o(Ri,"toSource");function zi(v,_){return v===_||v!==v&&_!==_}o(zi,"eq");var Un=Ln(function(){return arguments}())?Ln:function(v){return Ni(v)&&dn.call(v,"callee")&&!Mt.call(v,"callee")},Li=Array.isArray;function gi(v){return v!=null&&ci(v.length)&&!li(v)}o(gi,"isArrayLike");var un=sn||j;function Ji(v,_){return ti(v,_)}o(Ji,"isEqual");function li(v){if(!nr(v))return!1;var _=cn(v);return _==be||_==Ie||_==Le||_==se}o(li,"isFunction");function ci(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=B}o(ci,"isLength");function nr(v){var _=typeof v;return v!=null&&(_=="object"||_=="function")}o(nr,"isObject");function Ni(v){return v!=null&&typeof v=="object"}o(Ni,"isObjectLike");var yi=ge?vt(ge):Tn;function Mn(v){return gi(v)?on(v):Gn(v)}o(Mn,"keys");function kn(){return[]}o(kn,"stubArray");function j(){return!1}o(j,"stubFalse"),Rt.exports=Ji},724:()=>{}},Ba={};function Xn(Rt){var l=Ba[Rt];if(l!==void 0)return l.exports;var T=Ba[Rt]={id:Rt,loaded:!1,exports:{}};return ho[Rt](T,T.exports,Xn),T.loaded=!0,T.exports}o(Xn,"__webpack_require__"),(()=>{Xn.n=Rt=>{var l=Rt&&Rt.__esModule?()=>Rt.default:()=>Rt;return Xn.d(l,{a:l}),l}})(),(()=>{Xn.d=(Rt,l)=>{for(var T in l)Xn.o(l,T)&&!Xn.o(Rt,T)&&Object.defineProperty(Rt,T,{enumerable:!0,get:l[T]})}})(),(()=>{Xn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(Rt){if(typeof window=="object")return window}}()})(),(()=>{Xn.o=(Rt,l)=>Object.prototype.hasOwnProperty.call(Rt,l)})(),(()=>{Xn.r=Rt=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Rt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Rt,"__esModule",{value:!0})}})(),(()=>{Xn.nmd=Rt=>(Rt.paths=[],Rt.children||(Rt.children=[]),Rt)})();var fo={};(()=>{"use strict";Xn.r(fo),Xn.d(fo,{StateKeys:()=>na,activate:()=>Il,ensureProvidersRegistered:()=>wi,getOpenActionsService:()=>lo,getState:()=>Ds,isPreRelease:()=>Pl,updateState:()=>ko});var Rt={};Xn.r(Rt),Xn.d(Rt,{max:()=>el,min:()=>Xs});const l=require("vscode"),T=new TextDecoder,R=new TextEncoder,S=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function M(t){const e=R.encode(t),n=new Array(e.length);for(let i=0;i<e.length;++i)n[i]=S[e[i]];return n.join("")}o(M,"encodeUtf8Hex");function C(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(i=>parseInt(i,16)));return T.decode(n)}o(C,"decodeUtf8Hex");const B=/^[0-9a-f]{40}$/i;function U(t){return t!==void 0&&B.test(t)}o(U,"isSha");const J=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function Le(t){return J.test(t)}o(Le,"isValidBranchName");function ke(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(ke,"shortenRef");const Pe=47;function F(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(F,"asKey");function be(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o(be,"asFileKey");function Ie(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(Ie,"asFileStorageKey");function he(t){const e=t.path;let n=0,i=-1,r=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===Pe){if(!r){n=a+1;break}}else i===-1&&(r=!1,i=a+1);return i===-1?"":e.slice(n,i)}o(he,"basename");function oe(t){const e=t.path;if(e.length===1)return"/";let n,i=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===Pe){if(!r){i=a;break}}else r=!1;return i===-1?"/":e.slice(0,i)}o(oe,"dirname");function ze(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(ze,"getParent");function X(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(X,"joinRelativePath");function Me(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),se(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):se(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(Me,"isChild");function se(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),e.length===1||t.path.startsWith(e.endsWith("/")?e:`${e}/`)):e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(se,"isDescendent");function Q(t){return t&&typeof t=="object"&&"scheme"in t}o(Q,"isSerializedUri");var z;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:h}=d,g=h.indexOf(t.authoritySeparator);return g!==-1?h.substr(0,g):h}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function i(d,h){const g=new Map,p=l.workspace.textDocuments;if(p.length===0)return g;for(const w of p)w.uri.scheme===d&&h.some(O=>se(w.uri,O))&&g.set(F(w.uri),w.uri);return g}o(i,"getOpenUris"),t.getOpenUris=i;function r(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(r,"getVirtualUri"),t.getVirtualUri=r;function a(d,h){const[g,p]=d.authority.split(t.authoritySeparator);let w;if(p)try{const O=JSON.parse(C(p));w=h?h(O):O}catch{}return{scheme:g,metadata:w}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,h){const g=h?`${t.authoritySeparator}${M(JSON.stringify(h))}`:"";return`${d}${g}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,h;return(h=(d=l.workspace.workspaceFolders)==null?void 0:d.every(g=>g.uri.scheme===t.scheme))!=null?h:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(z||(z={}));var Z;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(Z||(Z={}));var ae;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(ae||(ae={}));var Ke;(function(t){function e(n){return n!==void 0&&n.type===Je.Active}o(e,"isActive"),t.isActive=e})(Ke||(Ke={}));var Fe;(function(t){function e(n){const i=z.decodeAuthority(n).metadata;if(!(i===void 0||i.idx===void 0)){if(i.idx==="latest")return{type:We.Latest};if(U(i.idx))return{type:We.SHA,sha:i.idx}}}o(e,"decode"),t.decode=e})(Fe||(Fe={}));var We;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(We||(We={}));var Je;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Je||(Je={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Je||(Je={}));var q;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(q||(q={}));var E;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(E||(E={}));var xe;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(xe||(xe={}));var He;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(He||(He={}));var Oe;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(Oe||(Oe={}));var re;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(re||(re={}));var L;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(L||(L={}));var Se;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Se||(Se={}));var Re;(function(t){t.Browse="browse",t.Edit="edit"})(Re||(Re={}));var Ee;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(Ee||(Ee={}));class qe extends Error{constructor(e,n,i){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=i}static CommitFailedError(){return new qe("Failed to create and push commit",Ee.CommitFailedError)}static DetachedHEADError(e){return new qe(e,Ee.DetachedHEADError)}static CommitToProtectedBranchError(e){return new qe(e,Ee.CommitToProtectedBranchError)}static InvalidBranchNameError(e,n=!1){const i=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new qe(i,Ee.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new qe(e,Ee.InvalidCredentialsError,n)}static MergeConflictError(e){return new qe(e,Ee.MergeConflictError)}static NothingToCommitError(e){return new qe(e,Ee.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new qe(n,Ee.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new qe(e,Ee.SyncConflictsError)}static UnresolvedConflictsError(){return new qe("You have unresolved merge conflicts.",Ee.UnresolvedConflictsError)}static InvalidRepositoryError(){return new qe("The current repository is invalid",Ee.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:Ee.Unknown}}o(qe,"VirtualProviderError");const Tt=6;var it;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(it||(it={}));var $e;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})($e||($e={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}($e||($e={}));var $;(function(t){t.Browse="browse",t.Edit="edit"})($||($={})),function(t){function e(i){return i===t.Browse||i===t.Edit?i:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(i){return i===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}($||($={}));var pe;(function(t){function e(n,i){return n.display===i.display&&n.index===i.index}o(e,"equals"),t.equals=e})(pe||(pe={}));var Y;(function(t){const e=new Map([[L.Branch,$e.None],[L.RemoteBranch,$e.None],[L.PullRequestBranch,$e.Match],[L.PullRequestRemoteBranch,$e.Match],[L.Commit,$e.Match],[L.Tag,$e.Match]]),n=new Map([[L.Branch,$.Edit],[L.RemoteBranch,$.Edit],[L.PullRequestBranch,$.Browse],[L.PullRequestRemoteBranch,$.Browse],[L.Commit,$.Browse],[L.Tag,$.Browse]]);function i(a){var s,c;return{display:(s=n.get(a))!=null?s:$.Edit,index:(c=e.get(a))!=null?c:$e.None}}o(i,"getDefault"),t.getDefault=i;function r(a){switch(a){case L.Branch:case L.RemoteBranch:return{display:$.Browse,index:$e.Latest};case L.PullRequestBranch:case L.PullRequestRemoteBranch:return{display:$.Browse,index:$e.Match};case L.Commit:case L.Tag:return{display:$.Browse,index:$e.Match};default:return{display:$.Edit,index:$e.None}}}o(r,"getIndexDefault"),t.getIndexDefault=r})(Y||(Y={}));const ce=null;var Ge=Xn(179),at=Xn.n(Ge);const ne="modes",ge="indexMemento";class ee{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){W.configPrefix=e,W.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(W.onConfigurationChanged,W))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(ne),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(ne,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(ge),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,i){const r=this.inspect(e,n);return r===void 0&&i!==void 0?i:(r==null?void 0:r.workspaceFolderValue)!==void 0?r.workspaceFolderValue:(r==null?void 0:r.workspaceValue)!==void 0?r.workspaceValue:r==null?void 0:r.globalValue}get(e,n,i){return i===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,i)}getMode(e,n,i){var r;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:$.sanitize(s.display),index:$e.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===L.Branch||n===L.RemoteBranch)switch((r=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:r.get("branch")){case"none":return{display:$.Edit,index:$e.None};case"latest":return{display:$.Browse,index:$e.Latest};case"tipPlusLatest":return{display:$.Edit,index:$e.TipPlusLatest}}if(!i)return Y.getDefault(n)}setMode(e,n){const i=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(i,n),Promise.resolve()):(this.modes[i]=n,this._state.update(ne,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(ge,this.indexMemento))}getAny(e,n,i){return i===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,i)}changed(e,n,i){var r;return(r=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,i))!=null?r:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,i){const r=W.inspect(e);if(r===void 0)return!1;let a=!1;return r.globalValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.globalValue):r.globalValue,l.ConfigurationTarget.Global),a=!0),r.workspaceValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceValue):r.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),r.workspaceFolderValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceFolderValue):r.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&i.fallbackValue!==void 0&&(await this.update(n,i.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,i){const r=W.inspect(e);if(r===void 0)return;const a=W.inspect(n);r.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.globalValue):r.globalValue,l.ConfigurationTarget.Global),r.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceValue):r.workspaceValue,l.ConfigurationTarget.Workspace),r.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceFolderValue):r.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,i){return l.workspace.getConfiguration(this.configPrefix).update(e,n,i)}updateAny(e,n,i,r){return l.workspace.getConfiguration(void 0,i===l.ConfigurationTarget.Global?void 0:r).update(e,n,i)}updateEffective(e,n){const i=W.inspect(e);return i.workspaceFolderValue!==void 0?n===i.workspaceFolderValue?Promise.resolve(void 0):W.update(e,n,l.ConfigurationTarget.WorkspaceFolder):i.workspaceValue!==void 0?n===i.workspaceValue?Promise.resolve(void 0):W.update(e,n,l.ConfigurationTarget.Workspace):i.globalValue===n||i.globalValue===void 0&&n===i.defaultValue?Promise.resolve(void 0):W.update(e,at()(n,i.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(ee,"Configuration");const W=new ee,ye="";var fe;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(fe||(fe={}));var vt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(vt||(vt={}));const Ce="[RemoteHub]",D=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===fe.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:l.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case fe.Off:return 0;case fe.Error:return 1;case fe.Warn:return 2;case fe.Info:return 3;case fe.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){D.isDebugging&&console.log(this.timestamp,Ce,t!=null?t:ye,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ye}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!D.isDebugging)){if(e===void 0){const i=t instanceof Error?t.stack:void 0;if(i){const r=/.*\s*?at\s(.+?)\s/.exec(i);r!==null&&(e=r[1])}}D.isDebugging&&console.error(this.timestamp,Ce,e!=null?e:ye,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:ye}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){D.isDebugging&&console.log(this.timestamp,Ce,t!=null?t:ye,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ye}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){D.isDebugging&&console.warn(this.timestamp,Ce,t!=null?t:ye,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:ye}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,i;let r;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;r=(e=t.prototype.constructor.name)!=null?e:ye}else r=(i=(n=t.constructor)==null?void 0:n.name)!=null?i:ye;const a=r.indexOf("_");return a===-1?r:r.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,ye)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!D.isDebugging)return ye;const n=e.map(i=>this.toLoggable(i)).join(", ");return n.length!==0?` \u2014 ${n}`:ye}},"_Logger");let I=D;I.level=0,I._logLevel=fe.Off;const Ne=new TextDecoder,St=new TextEncoder;async function ht(t){const e=typeof t=="string"?St.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const i=new dn;i.update(e),n=i.digest()}return globalThis.btoa(encodeURIComponent(Ne.decode(n)))}o(ht,"sha1");var kt;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(kt||(kt={}));function st(t,e,n=32){const i=n-e,r=~((1<<i)-1);return(t<<e|(r&t)>>>i)>>>0}o(st,"leftRotate");function At(t,e=0,n=t.byteLength,i=0){for(let r=0;r<n;r++)t[e+r]=i}o(At,"fill");const Ct=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,i=0;const r=t.byteLength;for(;i<r;){const a=Math.min(64-n,r-i);for(let s=0;s<a;s++)e[n++]=t[i++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,At(this._buff,this._buffLen),this._buffLen>56&&(this._step(),At(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=Ct._bigBlock32,e=this._buffDV;for(let h=0;h<64;h+=4)t.setUint32(h,e.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,st(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,r=this._h2,a=this._h3,s=this._h4,c,u,d;for(let h=0;h<80;h++)h<20?(c=i&r|~i&a,u=1518500249):h<40?(c=i^r^a,u=1859775393):h<60?(c=i&r|i&a|r&a,u=2400959708):(c=i^r^a,u=3395469782),d=st(n,5)+c+s+u+t.getUint32(h*4,!1)&4294967295,s=a,a=r,r=st(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let dn=Ct;dn._bigBlock32=new DataView(new ArrayBuffer(320));function pn(t){const e=globalThis.atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}o(pn,"fromBase64");const{fromCharCode:Dn}=String;function $n(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:i}=t;n<i;n++)e+=Dn(t[n])}return globalThis.btoa(e)}o($n,"toBase64");function Ye(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(Ye,"indexOfDifference");let Et;var jt;(function(t){function e(n){const i=en(n);return Et=l.env.uiKind===l.UIKind.Web,I.warn(`Running on the ${Et?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${i}; storageUri=${n.globalStorageUri.toString(!0)}`),i}o(e,"configure"),t.configure=e})(jt||(jt={}));const Mt=/\/workspaceStorage\/(?<id>[^/]+)/i;function en(t){var e;if(t.storageUri===void 0)return"";const n=Mt.exec(t.storageUri.path);let i;if((e=n==null?void 0:n.groups)==null?void 0:e.id)i=n.groups.id;else{i=t.storageUri.path;const r=Ye(t.globalStorageUri.path,i),a=`/${t.extension.id}`;i.endsWith(a)?i=i.slice(r,-a.length):i=i.substr(r)}return/-[0-9]$/.test(i)?i.slice(0,-2):i}o(en,"getWorkspaceId");var rt;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(rt||(rt={}));const tn=new Map;function sn(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):tn.get(t)}o(sn,"getContext");function ln(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(ln,"isSupportedContextKey");async function Zt(t,e){tn.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Zt,"setContext");const _n=o(async(t,e,n)=>{const i=await Promise.resolve().then(Xn.bind(Xn,326)),r=await Promise.resolve().then(Xn.bind(Xn,865)),a=new i.AppInsightsCore,s=new r.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const h={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=h}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(h=>{var g,p;!d||(h.ext=(g=h.ext)!=null?g:{},h.ext.utc=(p=h.ext.utc)!=null?p:{},h.ext.utc.flags=8462029)}),a},"getAICore"),Fn=o(async(t,e,n)=>{const i=await _n(t,e,n);return{logEvent:(a,s)=>{try{i==null||i.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{i==null||i.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var ei;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(ei||(ei={}));class fi{constructor(e,n,i){this.osShim=i,this._instantiationStatus=ei.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this.ignoreBuiltInCommonProperties=!1,this._clientFactory=n,this._key=e}get additionalCommonProperties(){return{"common.os":this.osShim.platform,"common.nodeArch":this.osShim.architecture,"common.platformversion":(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.2-preview"}}logEvent(e,n){if(!this._telemetryClient){this._instantiationStatus!==ei.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}logException(e,n){if(!this._telemetryClient){this._instantiationStatus!==ei.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.logEvent(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.logException(e,n)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===ei.NOT_INSTANTIATED&&(this._instantiationStatus=ei.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=ei.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=ei.INSTANTIATED}))}}o(fi,"BaseTelemetryAppender");class xn{constructor(e,n){this.telemetryAppender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetryAppender),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetryAppender.instantiateAppender()}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,i,r){r?this.telemetryAppender.logEvent(e,{properties:n,measurements:i}):this.telemetryLogger.logUsage(e,{properties:n,measurements:i})}sendTelemetryEvent(e,n,i){this.internalSendTelemetryEvent(e,n,i,!1)}sendDangerousTelemetryEvent(e,n,i){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,n,i,!0)}internalSendTelemetryErrorEvent(e,n,i,r){r?this.telemetryAppender.logEvent(e,{properties:n,measurements:i}):this.telemetryLogger.logError(e,{properties:n,measurements:i})}sendTelemetryErrorEvent(e,n,i){this.internalSendTelemetryErrorEvent(e,n,i,!1)}sendDangerousTelemetryErrorEvent(e,n,i){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,n,i,!0)}internalSendTelemetryException(e,n,i,r){r?this.telemetryAppender.logException(e,{properties:n,measurements:i}):this.telemetryLogger.logError(e,{properties:n,measurements:i})}sendTelemetryException(e,n,i){this.internalSendTelemetryException(e,n,i,!1)}sendDangerousTelemetryException(e,n,i){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,n,i,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(xn,"BaseTelemetryReporter");class mi{static applyReplacements(e,n){for(const i of Object.keys(e))for(const r of n)r.lookup.test(i)&&(r.replacementString!==void 0?e[i]=r.replacementString:delete e[i])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(){return mi._instance||(mi._instance=new mi),mi._instance}}o(mi,"TelemetryUtil");const er=o(async(t,e)=>{let n;try{const r=await Promise.resolve().then(Xn.bind(Xn,783));n=new r.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),n.initialize()}catch(r){return Promise.reject(r)}return{logEvent:(r,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&mi.applyReplacements(s,e),n==null||n.track({name:r,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");class Wi extends xn{constructor(e,n){let i=o(a=>er(a,n),"clientFactory");mi.shouldUseOneDataSystemSDK(e)&&(i=o(a=>Fn(a,l),"clientFactory"));const r=new fi(e,i,{release:navigator.appVersion,platform:"web",architecture:"web"});if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(r,l)}}o(Wi,"TelemetryReporter");const tr="Type of classified event does not match event properties",Ki=o(class{constructor(t){this.context=t,this.sharedProperties={},Ki._instance=this,this.reporter=new Wi(Ki.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==tr&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(I.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{I.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let Ei=Ki;Ei.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function k(t){const e=performance.now()*.001;let n=Math.floor(e),i=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],i=i-t[1],i<0&&(n--,i+=1e9)),[n,i]}o(k,"hrtime");let Ue=0;function Xe(){return Ue===Number.MAX_SAFE_INTEGER&&(Ue=0),++Ue}o(Xe,"getNextInstanceId");const dt=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Xe().toString().padStart(5)}] `;var i,r,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(i=e==null?void 0:e.log)!=null?i:{},this.logLevel=(r=e==null?void 0:e.logLevel)!=null?r:fe.Info,this.time=k(),d){if(!I.enabled(this.logLevel))return;n.length?Lt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):Lt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:k(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=k()}stop(t){this.restart(t)}logCore(t,e,n){var i,r,a,s,c,u,d;if(!I.enabled(this.logLevel))return;let h="";if(this.step){const[O,A]=k(this.step.time),G=O*1e3+Math.floor(A/1e6);h=`${this.step.label?`${this.step.label} took `:""}${G} ms`}if(!n){Lt(this.logLevel,`${this.instance}${(i=e==null?void 0:e.prefix)!=null?i:""}${t}${(r=e==null?void 0:e.message)!=null?r:""}${h?` ${h}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[g,p]=k(this.time),w=g*1e3+Math.floor(p/1e6);Lt(w>500?fe.Warn:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${w} ms${h?` (${h})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var i;(i=dt.watches.get(t))==null||i.log(),dt.watches.set(t,new dt(t,e,...n))}static log(t,e){var n;(n=dt.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=dt.watches.get(t))==null||n.stop(e),dt.watches.delete(t)}},"_Stopwatch");let ct=dt;ct.watches=new Map;function Lt(t,e,...n){switch(t){case fe.Warn:I.warn(e,...n);break;case fe.Info:I.log(e,...n);break;default:I.debug(e,...n);break}}o(Lt,"log");class Wn{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const i of n.added)this.repositoryOpened(i);for(const i of n.removed)this.repositoryClosed(i)}),W.onDidChange(n=>{for(const i of this.services.values()){const r=i.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",r.uri)&&i.service.updateIndexMode().catch(a=>{I.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=F(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const i of this.providers){const r=await i.createNavigationService(this.providerService,e);if(r!==void 0){const a=r();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=F(e.uri);this.handledRepositories.delete(n);const i=this.services.get(n);i!==void 0&&(i.service.dispose(),this.services.delete(F(e.uri)))}}o(Wn,"CodeNavigationServices");const An=globalThis.fetch;async function yt(t,e,n){const i=new AbortController;n.onCancellationRequested(()=>i.abort());try{return await globalThis.fetch(t,{...e,signal:i.signal})}catch(r){throw n.isCancellationRequested?new CancellationError:r}}o(yt,"fetchWithCancellation");async function _t(t,e,n,i,r){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;i.onCancellationRequested(()=>a.cancel());try{const s=await yt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let h=3;for(;;){let{done:g,value:p}=await d.read();if(g){const O=c.reduce((te,x)=>te+x.length,0),A=new Uint8Array(O);let G=0;for(const te of c)A.set(te,G),G+=te.length;return A}p&&(c.push(p),u+=p.length);const w=Math.floor(u/(1024*1024));if(h<w){h=w;const O={message:w+" MB"};r.report(O)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw i.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(_t,"fetchUInt8ArrayWithMaxSizeAndCancellation");const Ot=globalThis.crypto;function ot(){return Ot.randomUUID()}o(ot,"uuid");/*! (c) Andrea Giammarchi - ISC */var Qt={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Qt.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,i){"use strict";var r=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},h={append:function(x,ue){O(this._ungap,x,ue)},delete:function(x){delete this._ungap[x]},get:function(x){return this.has(x)?this._ungap[x][0]:null},getAll:function(x){return this.has(x)?this._ungap[x].slice(0):[]},has:function(x){return x in this._ungap},set:function(x,ue){this._ungap[x]=[n(ue)]},forEach:function(x,ue){var _e=this;for(var Ae in _e._ungap)_e._ungap[Ae].forEach(Ve,Ae);function Ve(wt){x.call(ue,wt,n(Ae),_e)}o(Ve,"invoke")},toJSON:function(){return{}},toString:function(){var x=[];for(var ue in this._ungap)for(var _e=G(ue),Ae=0,Ve=this._ungap[ue];Ae<Ve.length;Ae++)x.push(_e+"="+G(Ve[Ae]));return x.join("&")}};for(var g in h)a(p.prototype,g,{configurable:!0,writable:!0,value:h[g]});Qt.URLSearchParams=p;function p(x){var ue=r(null);switch(a(this,"_ungap",{value:ue}),!0){case!x:break;case typeof x=="string":x.charAt(0)==="?"&&(x=x.slice(1));for(var _e=x.split("&"),Ae=0,Ve=_e.length;Ae<Ve;Ae++){var wt=_e[Ae],tt=wt.indexOf("=");-1<tt?O(ue,A(wt.slice(0,tt)),A(wt.slice(tt+1))):wt.length&&O(ue,A(wt),"")}break;case i(x):for(var Ae=0,Ve=x.length;Ae<Ve;Ae++){var wt=x[Ae];O(ue,wt[0],wt[1])}break;case"forEach"in x:x.forEach(w,ue);break;default:for(var Nt in x)O(ue,Nt,x[Nt])}}o(p,"URLSearchParams");function w(x,ue){O(this,ue,x)}o(w,"addEach");function O(x,ue,_e){var Ae=i(_e)?_e.join(","):_e;ue in x?x[ue].push(Ae):x[ue]=[Ae]}o(O,"appendTo");function A(x){return decodeURIComponent(x.replace(c,"%25").replace(u," "))}o(A,"decode");function G(x){return encodeURIComponent(x).replace(s,te)}o(G,"encode");function te(x){return d[x]}o(te,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(i){}"forEach"in t||(t.forEach=o(function(r,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){r.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(r,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(r,a){this.push(r)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(r,a){this.push([a,r])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var r=this.entries(),a=r.next(),s=a.done,c=[],u=Object.create(null),d,h,g;!s;)g=a.value,h=g[0],c.push(h),h in u||(u[h]=[]),u[h].push(g[1]),a=r.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)h=c[d],this.append(h,u[h].shift())},"sort"));function n(i,r){var a=[];return i.forEach(r,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(i){var r=i.defineProperty,a=i.getOwnPropertyDescriptor,s=o(function(g){function p(A,G){t.append.call(this,A,G),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}o(p,"append");function w(A){t.delete.call(this,A),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}o(w,"del");function O(A,G){t.set.call(this,A,G),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}return o(O,"set"),function(A,G){return A.append=p,A.delete=w,A.set=O,r(A,"_usp",{configurable:!0,writable:!0,value:G})}},"createSearchParamsPollute"),c=o(function(g){return function(p,w){return r(p,"_searchParams",{configurable:!0,writable:!0,value:g(w,p)}),w}},"createSearchParamsCreate"),u=o(function(g){var p=g.append;g.append=t.append,URLSearchParams.call(g,g._usp.search.slice(1)),g.append=p},"updateSearchParams"),d=o(function(g,p){if(!(g instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),h=o(function(g){var p=g.prototype,w=a(p,"searchParams"),O=a(p,"href"),A=a(p,"search"),G;!w&&A&&A.set&&(G=c(s(A)),i.defineProperties(p,{href:{get:function(){return O.get.call(this)},set:function(te){var x=this._searchParams;O.set.call(this,te),x&&u(x)}},search:{get:function(){return A.get.call(this)},set:function(te){var x=this._searchParams;A.set.call(this,te),x&&u(x)}},searchParams:{get:function(){return d(this,g),this._searchParams||G(this,new URLSearchParams(this.search.slice(1)))},set:function(te){d(this,g),G(this,te)}}}))},"upgradeClass");try{h(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&h(URL)}catch(g){}}(Object)})(Qt.URLSearchParams.prototype,Object);const Kt=Qt.URLSearchParams,pt=60,nn=pt*60,Xt=nn*24,Cn=Xt*7,yn=Xt*30,Jn=Xt*365;function bn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",bn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let i;return n<pt?(i=n,(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",i):l.l10n.t("{0} second ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",i):l.l10n.t("{0} seconds ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",i):l.l10n.t("{0} second",i):(e==null?void 0:e.short)?l.l10n.t("{0} secs",i):l.l10n.t("{0} seconds",i)):n<nn?(i=Math.floor(n/pt),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",i):l.l10n.t("{0} minute ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",i):l.l10n.t("{0} minutes ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",i):l.l10n.t("{0} minute",i):(e==null?void 0:e.short)?l.l10n.t("{0} mins",i):l.l10n.t("{0} minutes",i)):n<Xt?(i=Math.floor(n/nn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",i):l.l10n.t("{0} hour ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",i):l.l10n.t("{0} hours ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",i):l.l10n.t("{0} hour",i):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",i):l.l10n.t("{0} hours",i)):n<Cn?(i=Math.floor(n/Xt),(e==null?void 0:e.ago)?i===1?l.l10n.t("{0} day ago",i):l.l10n.t("{0} days ago",i):i===1?l.l10n.t("{0} day",i):l.l10n.t("{0} days",i)):n<yn?(i=Math.floor(n/Cn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",i):l.l10n.t("{0} week ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",i):l.l10n.t("{0} weeks ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",i):l.l10n.t("{0} week",i):(e==null?void 0:e.short)?l.l10n.t("{0} wks",i):l.l10n.t("{0} weeks",i)):n<Jn?(i=Math.floor(n/yn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",i):l.l10n.t("{0} month ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",i):l.l10n.t("{0} months ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",i):l.l10n.t("{0} month",i):(e==null?void 0:e.short)?l.l10n.t("{0} mos",i):l.l10n.t("{0} months",i)):(i=Math.floor(n/Jn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",i):l.l10n.t("{0} year ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",i):l.l10n.t("{0} years ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",i):l.l10n.t("{0} year",i):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",i):l.l10n.t("{0} years",i))}o(bn,"fromNow");var Nn,zt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(zt||(zt={}));class Pt{constructor(){this[Nn]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=zt.None){const i=this._map.get(e);if(!!i)return n!==zt.None&&this.touch(i,n),i.value}set(e,n,i=zt.None){let r=this._map.get(e);if(r)r.value=n,i!==zt.None&&this.touch(r,i);else{switch(r={key:e,value:n,next:void 0,previous:void 0},i){case zt.None:this.addItemLast(r);break;case zt.First:this.addItemFirst(r);break;case zt.Last:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const i=this._state;let r=this._head;for(;r;){if(n?e.bind(n)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}values(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}entries(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}[(Nn=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,i=e.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==zt.First&&n!==zt.Last)){if(n===zt.First){if(e===this._head)return;const i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===zt.Last){if(e===this._tail)return;const i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,i)=>{e.push([i,n])}),e}fromJSON(e){this.clear();for(const[n,i]of e)this.set(n,i)}}o(Pt,"LinkedMap");class Gt extends Pt{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=zt.AsNew){return super.get(e,n)}peek(e){return super.get(e,zt.None)}set(e,n){return super.set(e,n,zt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(Gt,"LRUCache");function an(t,e){return t.reduce((i,r)=>{const a=e(r),s=i.get(a);return s===void 0?i.set(a,[r]):s.push(r),i},new Map)}o(an,"groupBy");function Rn(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Rn,"isBinary");function Jt(t,e,n=i=>i){return[...t.reduce((r,a)=>{const s=e(a),c=r.get(s);if(c===void 0)r.set(s,a);else{const u=n(c,a);u!==void 0&&r.set(s,u)}return r},new Map).values()]}o(Jt,"uniqueBy");function on(t,e){switch(t){case ae.Branch:case ae.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case ae.Tag:return"$(tag)";case ae.Commit:return"$(git-commit)"}}o(on,"headTypeToCodicon");function wn(t){switch(t){case Je.Active:return"$(layers-active)";case Je.Match:return"$(layers-dot)";case Je.Indexed:return"$(layers)"}}o(wn,"indexTypeToCodicon");function In(t,e){switch(t){case ae.Branch:case ae.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case ae.Tag:return new l.ThemeIcon("tag");case ae.Commit:return new l.ThemeIcon("git-commit")}}o(In,"headTypeToThemeIcon");function*cn(t,e){for(const n of t)yield*e(n)}o(cn,"flatMap");function*Ln(t,e){for(const n of t)e(n)&&(yield n)}o(Ln,"filter");function*ti(t,e){for(const n of t){const i=e(n);i!=null&&(yield i)}}o(ti,"filterMap");function On(t,e){for(const n of t)if(e(n))return n}o(On,"find");function Vn(t,e){let n="";const i=t[Symbol.iterator]();let r=i.next();if(r.done)return n;for(;;){const a=r.value.toString();if(r=i.next(),r.done){n+=a;break}n+=a,n+=e}return n}o(Vn,"join");function*Tn(t,e){for(const n of t)yield e(n)}o(Tn,"map");function Gn(t,e){for(const n of t)if(e(n))return!0;return!1}o(Gn,"some");function*Yt(...t){for(const e of t)for(const n of e)yield n}o(Yt,"union");function*Ut(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(Ut,"unique");const oi="";function ki(...t){if(t.length===1){const e=t[0];return e===void 0?oi:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(ki,"defaultResolver");function zn(t){return(e,n,i)=>{let r;if(typeof i.value=="function"?r=i.value:typeof i.get=="function"&&(r=i.get),r===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;i.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:ki)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>r.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(zn,"serialize");let si=0;function ni(){return si===Number.MAX_SAFE_INTEGER&&(si=0),String(++si)}o(ni,"getNextLockId");class xi{constructor(){this.id=ni()}async synchronize(e){let n;const i=this.promise;this.promise=new Promise(r=>n=r),await i;try{return await e()}finally{n()}}}o(xi,"Lock");class jn{constructor(e){this.lock=new xi,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let i;const r=new ct(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:fe.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>i=s),this.readers.add(a)}),r.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{r.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),i()}}async synchronizeWrite(e,n){let i;const r=new ct(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:fe.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>i=a)}),r.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{r.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),i(),this.writer=void 0}}}o(jn,"ReaderWriterLock");class Yn{constructor(){this.locks=new Map}async synchronizeRead(e,n,i){let r=this.locks.get(e);return r===void 0&&(r=new jn(String(e)),this.locks.set(e,r)),r.synchronizeRead(n,i)}async synchronizeWrite(e,n,i){let r=this.locks.get(e);return r===void 0&&(r=new jn(String(e)),this.locks.set(e,r)),r.synchronizeWrite(n,i)}}o(Yn,"KeyedReaderWriterLock");const Di=o(class{constructor(t,e,n,i,r){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=i,this.context=r,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new jn("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),W.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!W.changed(t,"experimental.syncRecentList"))return;const e=W.get("experimental.syncRecentList")===!0?[Di.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=Jt(t.map(n=>n.rootUri),n=>F(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((i,r)=>r.timestamp-i.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=F(t);e=e.filter(i=>F(i.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Di.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${F(t.uri)}`,i=e.get(n);if(i===void 0)return;const r=this.changeStore.getScopedChangeStore(i),a=await r.getChanges(i.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await r.discardAll(i.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Di.storageKey,this.toStorage(e))}catch(s){throw I.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:i,pullRequest:r},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${F(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:i.type,name:i.name},idx:(a==null?void 0:a.type)&&Je.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:r?{id:r.id}:void 0,changes:Ri(s),timestamp:Date.now()})}try{await this.storageService.store(Di.storageKey,this.toStorage(e))}catch(n){throw I.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?l.Uri.from(i):i);return new Map(e.workspaceRepositories)}catch(e){return I.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Di.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let Ai=Di;Ai.storageKey="workspaceRepositories",Ai.storageSchemaVersion=1;function Si(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(Si,"hasChanges");function Ii(t){return Si(t.changes)}o(Ii,"hasUncommittedChanges");function Ri(t){let e=0,n=0,i=0;for(const r of t)switch(r.type){case E.Created:e++;break;case E.Changed:n++;break;case E.Deleted:i++;break}return e||n||i?{added:e,changed:n,deleted:i,timestamp:Date.now()}:void 0}o(Ri,"toChangesSummary");function zi(t,{compact:e=!0,preamble:n,separator:i=", ",short:r=!1,single:a=!1}={}){if(!Si(t))return l.l10n.t("Everything up to date");const{added:s,changed:c,deleted:u}=t;if(a){const h=s+c+u;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let d=`${n!=null?n:""}`;return(s||!e)&&(d+=r?`+${s}`:s===1?l.l10n.t("{0} file added",s):l.l10n.t("{0} files added",s),(c||u||!e)&&(d+=i)),(c||!e)&&(d+=r?`~${c}`:c===1?l.l10n.t("{0} file changed",c):l.l10n.t("{0} files changed",c),(u||!e)&&(d+=i)),(u||!e)&&(d+=r?`-${u}`:u===1?l.l10n.t("{0} file deleted",u):l.l10n.t("{0} files deleted",u)),d}o(zi,"formatChangesSummary");class Un extends Error{constructor(e){var n;const i=typeof e=="string"?e:Qe.getProviderId(e);super(`No provider registered with ${i}`);this.id=i,(n=Error.captureStackTrace)==null||n.call(Error,this,Un)}}o(Un,"ProviderNotFoundError");class Li{constructor(e,n,i,r,a){this.providerService=e,this.uri=n,this.id=i,this.name=r,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(Li,"VirtualRepository");var gi;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(gi||(gi={}));var un;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(un||(un={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(un||(un={}));var Ji;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(Ji||(Ji={}));var li;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(li||(li={}));var ci;(function(t){function e(n){const i=z.decodeAuthority(n).metadata;if(!(i===void 0||i.idx===void 0)){if(i.idx==="latest")return{type:1};if(U(i.idx))return{type:2,sha:i.idx}}}o(e,"decode"),t.decode=e})(ci||(ci={}));function nr(t){return t!==void 0&&typeof t.then=="function"}o(nr,"isPromise");const Ni="";function yi(...t){if(t.length===1){const e=t[0];return e===void 0?Ni:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(yi,"gate_defaultResolver");function Mn(t){return(e,n,i)=>{let r;if(typeof i.value=="function"?r=i.value:typeof i.get=="function"&&(r=i.get),r===void 0)throw new Error("Not supported");const a=`$gate$${n}`;i.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:yi)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=r.apply(this,s),d==null||!nr(d))return d;this[c]=u=d.then(h=>(this[c]=void 0,h)).catch(h=>{throw this[c]=void 0,h})}catch(h){throw this[c]=void 0,h}}return u}}}o(Mn,"gate");var kn=Object.defineProperty,j=Object.getOwnPropertyDescriptor,v=o((t,e,n,i)=>{for(var r=i>1?void 0:i?j(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&kn(e,n,r),r},"__decorateClass");class _{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),i=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(i,n)===n&&e()}async showProviderNotFoundMessage(e){const n=H.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const i=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},i)!==i)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(_,"Messages"),v([Mn(()=>"")],_.prototype,"showRepositoryNotValidMessage",1),v([Mn(()=>"")],_.prototype,"showGitHubStatus500Message",1),v([Mn(()=>"")],_.prototype,"showStatus401Message",1),v([Mn(()=>"")],_.prototype,"showStatus403Message",1),v([Mn()],_.prototype,"showProviderNotFoundMessage",1);const H=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),we=new _;async function ut(t,e,n){var i,r,a,s,c;if(Ei.instance.publicLog2("openWorkspace",{location:e.location}),e.location===xe.AddToWorkspace){const d=(r=(i=l.workspace.workspaceFolders)==null?void 0:i.length)!=null?r:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===xe.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const h={title:l.l10n.t("Continue")},g={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(Et?l.l10n.t(`You have uncommitted changes.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,d.map(w=>w.name).join(", ")):l.l10n.t(`You have uncommitted changes.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,d.map(w=>w.name).join(", ")),{modal:!0},h,g)!==h){Ei.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===xe.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=lo())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=lo())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),Ei.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===xe.NewWindow,forceLocalWindow:u})}o(ut,"openWorkspace");var et=Xn(724),K=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,de=o((t,e,n,i)=>{for(var r=i>1?void 0:i?ie(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&K(e,n,r),r},"providers_decorateClass");const Be="remoteHub.metadata.migration.invalidTagSha",je=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(F(t.uri));!e||(I.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=F(t.uri);if(t.uri.scheme!==je.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:i,name:r}=this.getVirtualUriMetadata(t.uri),a=new Li(this,t.uri,i,r,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=F(e.uri);if(e.uri.scheme!==je.scheme||!this._repositories.has(n))continue;const i=this._repositories.get(n);this._repositories.delete(n),i&&(this._onDidChangeRepositories.fire({added:[],removed:[i]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Zt(rt.HasVirtualFolders,this._repositories.size!==0),Zt(rt.VirtualFolderProviders,Vn(Ut(Tn(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Tn(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,i,r,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:i,storage:r,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const h=l.Disposable.from(d.metadataStore.onDidChange(g=>this.onMetadataChanged(g)),d.changeStore.onDidChange(g=>this._onDidChangeChangeStore.fire(g)),d.workspaceRepositories.onDidChange(async()=>{const g=await this.workspaceRepositoriesGetRepositories();Zt(rt.HasRecentRepositories,g.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const g=[];for(const[p,w]of[...this._repositories])(w==null?void 0:w.provider.id)===t&&(this._repositories.delete(p),g.push(w));this._onDidChangeRepositories.fire({added:[],removed:g}),this._onDidChangeProviders.fire({added:[],removed:[d]}),h.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Tn(this.getRepositories(n.id),r=>r.uri));const i=this._indexProviders.get(n.id);i!==void 0&&e.push(i)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const i=l.workspace.getWorkspaceFolder(t);if(!i||i.uri.scheme!==je.scheme)return;const r=(n=this._repositories.get(F(i.uri)))!=null?n:this.addRepository(i);if(!(e!==void 0&&(r==null?void 0:r.provider.id)!==e))return r!=null?r:void 0}getRepositories(t){return Ln(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:je.getProviderId(t),i=this._providers.get(n);return e!==void 0&&(i==null?void 0:i.id)!==e?!1:i!==void 0}getProvider(t){const e=typeof t=="string"?t:je.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Un(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Un(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Un(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Un(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Un(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Un(t)}async getRecentRemoteSourceProviders(){return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),getRemoteSources:async()=>{const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return Promise.all(t.sort((e,n)=>n.timestamp-e.timestamp).map(async e=>({providerId:e.provider.id,name:e.name,icon:"repo",description:bn(e.timestamp,{ago:!0}),detail:`${e.provider.name}${e.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${e.pullRequest.id}`:""}${z.isCanonicalUri(e.uri)?"":`\xA0\xA0\u2022\xA0\xA0${on(e.ref.type)} ${e.ref.name}`}\xA0\xA0\u2022\xA0\xA0${zi(e.changes)}${e.idx?`\xA0\xA0\u2022\xA0\xA0${wn(e.idx.type)}`:""}`,url:(await this.getBestRemoteUri(e.uri)).toString()})))}}}getRemoteSourceProviders(t){const e=o(n=>n.provider.getRemoteSourceProviders().map(r=>{var a;return{...r,getRecentRemoteSources:(a=r.getRecentRemoteSources)!=null?a:async()=>{var s;const c=(s=await n.workspaceRepositories.getRemoteWorkspaceSourceProvider(n.id))!=null?s:[];return Promise.all(c.map(async u=>({providerId:u.provider.id,name:u.name,icon:"repo",timestamp:u.timestamp,description:bn(u.timestamp,{ago:!0}),detail:`${u.provider.name}${u.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${u.pullRequest.id}`:""}${z.isCanonicalUri(u.uri)?"":`\xA0\xA0\u2022\xA0\xA0${on(u.ref.type)} ${u.ref.name}`}\xA0\xA0\u2022\xA0\xA0${zi(u.changes)}${u.idx?`\xA0\xA0\u2022\xA0\xA0${wn(u.idx.type)}`:""}`,url:(await this.getBestRemoteUri(u.uri)).toString()})))}}}),"createRemoteSourceProviders");if(t){const n=this.getProvider(t);return n?e(n):[]}return[...cn(this._providers.values(),n=>{var i;return(i=e(n))!=null?i:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const i of(t=l.workspace.workspaceFolders)!=null?t:[])if(i.uri.scheme===z.scheme&&await this.getChangeStore(i.uri).hasChanges(i.uri)){const r=(e=this.getRepository(i.uri))==null?void 0:e.provider;if(!r)continue;n.set(r.id,r)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Un(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),i=n==null?void 0:n.provider.canOpenRemoteUrl(t);return i!==void 0?{provider:n,urlType:i}:void 0}for(const n of this._providers.values()){const i=n.provider.canOpenRemoteUrl(t);if(i!==void 0)return{provider:n,urlType:i}}}async createWorkspaceForRemoteUrl(t,e,n=xe.CurrentWindow){var i;const r=this.canOpenRemoteUrl(t,e);return(i=r==null?void 0:r.provider)==null?void 0:i.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return ut(this,t,e)}createProviderUri(t,e,n){return z.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(je.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return z.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let i=`${n.path}/`;i.endsWith("/")&&(i=i.slice(0,-1));const r=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===je.scheme?z.getVirtualUri(r):r}createRelativeVirtualUri(t,e){return z.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(je.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e){const{provider:n,repo:i,ref:r}=this.getVirtualUriMetadata(t);if(e===gi.Repository)return this.getRemoteUri(n.id,{repo:i});if(e===gi.PullRequest||e===void 0&&(r==null?void 0:r.type)===He.PullRequest){if((r==null?void 0:r.type)===He.PullRequest)return this.getRemoteUri(n.id,{repo:i,pullRequest:{id:r.id}});const{pullRequest:a}=await this.getMetadata(t);if(e===gi.PullRequest&&a)return this.getRemoteUri(n.id,{repo:i,pullRequest:{id:a.id}})}if(e===gi.Branch||e===void 0&&(r==null?void 0:r.type)===He.Branch){if((r==null?void 0:r.type)===He.Branch)return this.getRemoteUri(n.id,{repo:i,branch:r.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===ae.Branch||a.type===ae.RemoteBranch&&e===gi.Branch)return this.getRemoteUri(n.id,{repo:i,branch:a.branch.name})}if(e===gi.Tag||e===void 0&&(r==null?void 0:r.type)===He.Tag){if((r==null?void 0:r.type)===He.Tag)return this.getRemoteUri(n.id,{repo:i,tag:r.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===ae.Tag)return this.getRemoteUri(n.id,{repo:i,tag:a.detached.name})}if(e===gi.Commit||e===void 0&&((r==null?void 0:r.type)===He.Commit||(r==null?void 0:r.type)===He.Tree&&U(r.id))){if((r==null?void 0:r.type)===He.Commit||(r==null?void 0:r.type)===He.Tree&&U(r.id))return this.getRemoteUri(n.id,{repo:i,sha:r.id});const{HEAD:a}=await this.getMetadata(t);if(e===gi.Commit||a.type===ae.Commit)return this.getRemoteUri(n.id,{repo:i,sha:a.sha})}if(e===void 0&&(r==null?void 0:r.type)===He.Tree&&!U(r.id))return this.getRemoteUri(n.id,{repo:i,branch:r.id});if(e===void 0)return this.getRemoteUri(n.id,{repo:i})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(je.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){var n,i;return(i=(n=this.getRepositoryProvider(t)).getRemoteUri)==null?void 0:i.call(n,e)}getProviderRootUri(t){return t=z.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=z.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=z.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const i=n.indexOf(je.authoritySeparator);return i!==-1&&(n=n.substr(0,i)),e.with({authority:n})}getVirtualRootUri(t){return z.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(z.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var i,r;const a=this.getChangeStore(t);return(r=(i=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:r.call(i,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let i;return(e==null?void 0:e.staged)?(i=await n.getStagedChanges(t),i.length===0&&e.staged==="auto"&&(i=await n.getChanges(t))):i=await n.getChanges(t),i.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case E.Created:case E.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await ht(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case E.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return W.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=F(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:i,cachedMetadata:r}=await this.getMetadataStore(t).get(t);const a=(r==null?void 0:r.HEAD.type)===ae.Tag;if(r!==void 0&&(!a||this.workspaceState.get(Be)))return r;const s=this.getProvider(t);if(!s)throw new Un(t);const c=ci.decode(t);(c==null?void 0:c.type)===li.SHA&&(i=c.sha);try{n=s.provider.createMetadata(t,i),this.pendingMetadataRequests.set(e,n);const u=await n;return await this.updateMetadataCore(t,u,{silent:!0}),a&&await this.workspaceState.update(Be,!0),u}catch(u){throw qe.asVirtualProviderErrorCode(u)===Ee.InvalidRepositoryError&&we.showRepositoryNotValidMessage(),u}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new ct(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(z.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(z.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t){var e;const{HEAD:n}=await this.getMetadata(t.uri);if(((e=n.branch)==null?void 0:e.remote)!==void 0){const r=this.getRemoteUri(t.provider.id,{repo:n.branch.remote.repo});return{uri:r==null?void 0:r.toString(!0),ref:n.branch.name,name:n.branch.remote.name}}const i=this.getRemoteUri(t.provider.id,{repo:t.id});return{uri:i==null?void 0:i.toString(!0),ref:n.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");if(Et){let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;return n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),l.Uri.parse(r)}const i=o(async r=>{try{await r.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(a){I.error(a,"Unable to clone repository");const s=l.l10n.t("Could not clone your repository as Git is not installed."),c=l.l10n.t("Download Git");await l.window.showErrorMessage(s,{modal:!0},c)===c&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const r=l.extensions.getExtension("vscode.git");if(r)await i(r);else throw new Error("Git extension not found")}else{const r=l.extensions.onDidChange(async()=>{const s=l.extensions.getExtension("vscode.git");s&&(await i(s),r.dispose())});await l.workspace.requestWorkspaceTrust()||r.dispose()}}createBranch(t,e,n,i){return this.getRepositoryProvider(t).createBranch(t,e,n,i)}createAndPushCommit(t,e,n,i,r,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,i,r,a)}createPullRequest(t,e,n,i,r,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,i,r,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,i;return(i=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?i:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSnapshots(t,e){var n,i;return(i=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?i:Promise.resolve([])}async getTarGz(t,e,n){var i,r;return(r=(i=this.getRepositoryProvider(t)).getTarGz)==null?void 0:r.call(i,t,e,n)}async loadWorkspaceContents(t){return await wi(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(F(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const i=this.getProvider(t),r=this.getIndexProvider(t);if(i===void 0)throw new Un(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&r&&(a=await r.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw qe.UnresolvedConflictsError();return await i.provider.sync(t,u,{conflictResolution:Oe.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,i){return this.getChangeStore(t).resolveDiffCommand(t,e,n,i)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,i){return this.getChangeStore(t).writeFile(t,e,n,i)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return an(t.sort((e,n)=>n.timestamp-e.timestamp),e=>F(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(i=>i.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,i){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,i)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(je.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(je.authoritySeparator)===-1}},"_VirtualProviderService");let Qe=je;Qe.scheme="vscode-vfs",Qe.authoritySeparator="+",Qe.baseVirtualWorkspaceUri=l.Uri.parse(`${je.scheme}://`),de([zn()],Qe.prototype,"getMetadataCore",1);function Bt(t,e,n){let i=!1;async function r(){var s;if(await wi(t,void 0),!i){const u=t.getRemoteSourceProviders(),d=await((s=l.extensions.getExtension("vscode.git-base"))==null?void 0:s.activate()),h=d==null?void 0:d.getAPI(1);if(!h)return;u.map(g=>h.registerRemoteSourceProvider(g)),i=!0}const c=await l.commands.executeCommand("git-base.api.getRemoteSources",{title:l.l10n.t("Open Remote Repository"),placeholder:l.l10n.t("Enter a remote url, or select a remote provider"),showRecentSources:!0,providerLabel:u=>{var d;return(d=u.label)!=null?d:l.l10n.t("Open Repository from {0}",u.name)},urlLabel:u=>{const d=t.canOpenRemoteUrl(u);if(d){const{provider:h,urlType:g}=d;switch(g){case re.Branch:return l.l10n.t("Open Branch from {0} Repository",h.name);case re.Tag:return l.l10n.t("Open Tag from {0} Repository",h.name);case re.Commit:return l.l10n.t("Open Commit from {0} Repository",h.name);case re.File:return l.l10n.t("Open File from {0} Repository",h.name);case re.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",h.name);default:return l.l10n.t("Open {0} Repository",h.name)}}return l.l10n.t("Enter a Remote Url")}});if(!c){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{const d=l.workspace.getConfiguration("window").get("openFoldersInNewWindow")==="on"?xe.NewWindow:xe.CurrentWindow,h=await t.createWorkspaceForRemoteUrl(c,void 0,d);if(!h){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});const g=l.l10n.t("Install");await l.window.showInformationMessage(l.l10n.t("Extension 'GitHub Repositories' is not installed or enabled. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},g)===g&&(await l.commands.executeCommand("workbench.extensions.installExtension","github.remotehub"),await l.commands.executeCommand("workbench.action.reloadWindow"))}if(!h)return;await ut(t,h)}catch(u){if(n.sendException(u),qe.asVirtualProviderErrorCode(u)===Ee.InvalidCredentialsError){const{action:d}=u;if(d){we.showStatus401Message(()=>d());return}}I.error(u)}}o(r,"openRepository");async function a(s,c,u){if(u==null?void 0:u.workspaceFolder){const h=t.getRepository(u.workspaceFolder,c);if(h!==void 0)return h}const d=c?t.repositories.filter(h=>h.provider.id===c):t.repositories;if(d.length!==0){if(d.length>1){const h=await l.window.showQuickPick(d.map(g=>({label:g.name,description:g.provider.name,repository:g})),{placeHolder:s});return h?h.repository:void 0}return d[0]}}return o(a,"getRepository"),[l.commands.registerCommand("remoteHub.openRepository",()=>(n.publicLog2("command.openRepository"),r())),l.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(n.publicLog2("command.continueOn.openRepository"),r())),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async s=>{if(!Et)return;const c=await a(l.l10n.t("Choose which repository to open on the desktop"),void 0,s);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(u.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async s=>{const c=await a(l.l10n.t("Choose which repository to clone"),void 0,s);if(c!==void 0){if(n.publicLog2("command.clone"),s===void 0&&await t.changeStoreHasChanges(c.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const u={title:l.l10n.t("Continue")},d={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},u,d)!==u){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(c)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Et)return;const s=await a(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${u}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async s=>{if(Et)return;const c=await a(l.l10n.t("Choose which repository to open on the web"),void 0,s);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u===void 0)return;const d=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",h=u.with({authority:`${d}/${u.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(h)}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async()=>{const s=await a(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri,gi.Commit);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});await l.env.clipboard.writeText(d.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await a(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=$t();if(!c)return;const u=t.getRemoteUri(s.provider.id,{repo:s.id,path:t.getRelativeFilePath(c.uri),sha:(await t.getMetadata(s.uri)).HEAD.sha});if(u===void 0)return;const d=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",h=c.type===qn.File?`${ui(c.range)}`:`${ii(c.cellIndex,c.range)}`,g=u.with({authority:`${d}/${u.authority}`,fragment:h});await l.env.clipboard.writeText(g.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await a(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.enableDebugLogging",()=>W.updateEffective("logLevel",fe.Debug)),l.commands.registerCommand("remoteHub.disableDebugLogging",()=>W.updateEffective("logLevel",fe.Warn)),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Zt(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Et?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(Bt,"registerCommands");function Dt(t){return t}o(Dt,"command");async function Vt(t,e){return l.commands.executeCommand(t,e)}o(Vt,"executeCommand");var qn;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(qn||(qn={}));function $t(){var t,e;let n,i;if(l.window.activeTextEditor){if(n=l.window.activeTextEditor.document.uri,n.scheme==="vscode-notebook-cell"&&((t=l.window.activeNotebookEditor)==null?void 0:t.notebook.uri.fsPath)===n.fsPath){const r=l.window.activeNotebookEditor.notebook.getCells().find(c=>c.document.uri.fragment===(n==null?void 0:n.fragment)),a=(e=r==null?void 0:r.index)!=null?e:l.window.activeNotebookEditor.selection.start,s=r!==void 0?l.window.activeTextEditor.selection:void 0;return{type:2,uri:n,cellIndex:a,range:s}}return i=l.window.activeTextEditor.selection,{type:1,uri:n,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o($t,"getFileAndPosition");function ui(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}o(ui,"rangeString");function ii(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}o(ii,"notebookCellRangeString");function di(t,e,n){return new Fi(new ur(t),new ur(e)).ComputeDiff(n).changes}o(di,"stringDiff");class Qn{constructor(e,n,i,r){this.originalStart=e,this.originalLength=n,this.modifiedStart=i,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Qn,"DiffChange");var cr;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(cr||(cr={}));function zr(t,e){return(e<<5)-e+t|0}o(zr,"numberHash");function Jr(t,e){e=zr(149417,e);for(let n=0,i=t.length;n<i;n++)e=zr(t.charCodeAt(n),e);return e}o(Jr,"stringHash");class ur{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}}o(ur,"StringDiffSequence");class Oi{static Assert(e,n){if(!e)throw new Error(n)}}o(Oi,"Debug");class ir{static Copy(e,n,i,r,a){for(let s=0;s<a;s++)i[r+s]=e[n+s]}static Copy2(e,n,i,r,a){for(let s=0;s<a;s++)i[r+s]=e[n+s]}}o(ir,"MyArray");var Ar;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(Ar||(Ar={}));class Rr{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Qn(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(Rr,"DiffChangeHelper");class Fi{constructor(e,n,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=n;const[r,a,s]=Fi._getElements(e),[c,u,d]=Fi._getElements(n);this._hasStrings=s&&d,this._originalStringElements=r,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Fi._isStringArray(n)){const i=new Int32Array(n.length);for(let r=0,a=n.length;r<a;r++)i[r]=Jr(n[r],0);return[n,i,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const i=Fi._getStrictElement(this._originalSequence,e),r=Fi._getStrictElement(this._modifiedSequence,n);return i===r}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,i,r,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,i,r,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,i,r,a){for(a[0]=!1;e<=n&&i<=r&&this.ElementsAreEqual(e,i);)e++,i++;for(;n>=e&&r>=i&&this.ElementsAreEqual(n,r);)n--,r--;if(e>n||i>r){let g;return i<=r?(Oi.Assert(e===n+1,"originalStart should only be one more than originalEnd"),g=[new Qn(e,0,i,r-i+1)]):e<=n?(Oi.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),g=[new Qn(e,n-e+1,i,0)]):(Oi.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Oi.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),g=[]),g}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,i,r,s,c,a),d=s[0],h=c[0];if(u!==null)return u;if(!a[0]){const g=this.ComputeDiffRecursive(e,d,i,h,a);let p=[];return a[0]?p=[new Qn(d+1,n-(d+1)+1,h+1,r-(h+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,h+1,r,a),this.ConcatenateChanges(g,p)}return[new Qn(e,n-e+1,i,r-i+1)]}WALKTRACE(e,n,i,r,a,s,c,u,d,h,g,p,w,O,A,G,te,x){let ue=null,_e=null,Ae=new Rr,Ve=n,wt=i,tt=w[0]-G[0]-r,Nt=-1073741824,qt=this.m_forwardHistory.length-1;do{const Ht=tt+e;Ht===Ve||Ht<wt&&d[Ht-1]<d[Ht+1]?(g=d[Ht+1],O=g-tt-r,g<Nt&&Ae.MarkNextChange(),Nt=g,Ae.AddModifiedElement(g+1,O),tt=Ht+1-e):(g=d[Ht-1]+1,O=g-tt-r,g<Nt&&Ae.MarkNextChange(),Nt=g-1,Ae.AddOriginalElement(g,O+1),tt=Ht-1-e),qt>=0&&(d=this.m_forwardHistory[qt],e=d[0],Ve=1,wt=d.length-1)}while(--qt>=-1);if(ue=Ae.getReverseChanges(),x[0]){let Ht=w[0]+1,It=G[0]+1;if(ue!==null&&ue.length>0){const vn=ue[ue.length-1];Ht=Math.max(Ht,vn.getOriginalEnd()),It=Math.max(It,vn.getModifiedEnd())}_e=[new Qn(Ht,p-Ht+1,It,A-It+1)]}else{Ae=new Rr,Ve=s,wt=c,tt=w[0]-G[0]-u,Nt=1073741824,qt=te?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Ht=tt+a;Ht===Ve||Ht<wt&&h[Ht-1]>=h[Ht+1]?(g=h[Ht+1]-1,O=g-tt-u,g>Nt&&Ae.MarkNextChange(),Nt=g+1,Ae.AddOriginalElement(g+1,O+1),tt=Ht+1-a):(g=h[Ht-1],O=g-tt-u,g>Nt&&Ae.MarkNextChange(),Nt=g,Ae.AddModifiedElement(g+1,O+1),tt=Ht-1-a),qt>=0&&(h=this.m_reverseHistory[qt],a=h[0],Ve=1,wt=h.length-1)}while(--qt>=-1);_e=Ae.getChanges()}return this.ConcatenateChanges(ue,_e)}ComputeRecursionPoint(e,n,i,r,a,s,c){let u=0,d=0,h=0,g=0,p=0,w=0;e--,i--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const O=n-e+(r-i),A=O+1,G=new Int32Array(A),te=new Int32Array(A),x=r-i,ue=n-e,_e=e-i,Ae=n-r,wt=(ue-x)%2==0;G[x]=e,te[ue]=n,c[0]=!1;for(let tt=1;tt<=O/2+1;tt++){let Nt=0,qt=0;h=this.ClipDiagonalBound(x-tt,tt,x,A),g=this.ClipDiagonalBound(x+tt,tt,x,A);for(let It=h;It<=g;It+=2){It===h||It<g&&G[It-1]<G[It+1]?u=G[It+1]:u=G[It-1]+1,d=u-(It-x)-_e;const vn=u;for(;u<n&&d<r&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(G[It]=u,u+d>Nt+qt&&(Nt=u,qt=d),!wt&&Math.abs(It-ue)<=tt-1&&u>=te[It])return a[0]=u,s[0]=d,vn<=te[It]&&1447>0&&tt<=1447+1?this.WALKTRACE(x,h,g,_e,ue,p,w,Ae,G,te,u,n,a,d,r,s,wt,c):null}const Ht=(Nt-e+(qt-i)-tt)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Nt,Ht))return c[0]=!0,a[0]=Nt,s[0]=qt,Ht>0&&1447>0&&tt<=1447+1?this.WALKTRACE(x,h,g,_e,ue,p,w,Ae,G,te,u,n,a,d,r,s,wt,c):(e++,i++,[new Qn(e,n-e+1,i,r-i+1)]);p=this.ClipDiagonalBound(ue-tt,tt,ue,A),w=this.ClipDiagonalBound(ue+tt,tt,ue,A);for(let It=p;It<=w;It+=2){It===p||It<w&&te[It-1]>=te[It+1]?u=te[It+1]-1:u=te[It-1],d=u-(It-ue)-Ae;const vn=u;for(;u>e&&d>i&&this.ElementsAreEqual(u,d);)u--,d--;if(te[It]=u,wt&&Math.abs(It-x)<=tt&&u<=G[It])return a[0]=u,s[0]=d,vn>=G[It]&&1447>0&&tt<=1447+1?this.WALKTRACE(x,h,g,_e,ue,p,w,Ae,G,te,u,n,a,d,r,s,wt,c):null}if(tt<=1447){let It=new Int32Array(g-h+2);It[0]=x-h+1,ir.Copy2(G,h,It,1,g-h+1),this.m_forwardHistory.push(It),It=new Int32Array(w-p+2),It[0]=ue-p+1,ir.Copy2(te,p,It,1,w-p+1),this.m_reverseHistory.push(It)}}return this.WALKTRACE(x,h,g,_e,ue,p,w,Ae,G,te,u,n,a,d,r,s,wt,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const i=e[n],r=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=i.originalLength>0,c=i.modifiedLength>0;for(;i.originalStart+i.originalLength<r&&i.modifiedStart+i.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!c||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const d=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!d)break;i.originalStart++,i.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const i=e[n];let r=0,a=0;if(n>0){const g=e[n-1];r=g.originalStart+g.originalLength,a=g.modifiedStart+g.modifiedLength}const s=i.originalLength>0,c=i.modifiedLength>0;let u=0,d=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let g=1;;g++){const p=i.originalStart-g,w=i.modifiedStart-g;if(p<r||w<a||s&&!this.OriginalElementsAreEqual(p,p+i.originalLength)||c&&!this.ModifiedElementsAreEqual(w,w+i.modifiedLength))break;const A=(p===r&&w===a?5:0)+this._boundaryScore(p,i.originalLength,w,i.modifiedLength);A>d&&(d=A,u=g)}i.originalStart-=u,i.modifiedStart-=u;const h=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],h)){e[n-1]=h[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,i=e.length;n<i;n++){const r=e[n-1],a=e[n],s=a.originalStart-r.originalStart-r.originalLength,c=r.originalStart,u=a.originalStart+a.originalLength,d=u-c,h=r.modifiedStart,g=a.modifiedStart+a.modifiedLength,p=g-h;if(s<5&&d<20&&p<20){const w=this._findBetterContiguousSequence(c,d,h,p,s);if(w){const[O,A]=w;(O!==r.originalStart+r.originalLength||A!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=O-r.originalStart,r.modifiedLength=A-r.modifiedStart,a.originalStart=O+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=g-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,i,r,a){if(n<a||r<a)return null;const s=e+n-a+1,c=i+r-a+1;let u=0,d=0,h=0;for(let g=e;g<s;g++)for(let p=i;p<c;p++){const w=this._contiguousSequenceScore(g,p,a);w>0&&w>u&&(u=w,d=g,h=p)}return u>0?[d,h]:null}_contiguousSequenceScore(e,n,i){let r=0;for(let a=0;a<i;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;r+=this._originalStringElements[e+a].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const i=e+n;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const i=e+n;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,n,i,r){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(i,r)?1:0;return a+s}ConcatenateChanges(e,n){let i=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],i)){const r=new Array(e.length+n.length-1);return ir.Copy(e,0,r,0,e.length-1),r[e.length-1]=i[0],ir.Copy(n,1,r,e.length,n.length-1),r}else{const r=new Array(e.length+n.length);return ir.Copy(e,0,r,0,e.length),ir.Copy(n,0,r,e.length,n.length),r}}ChangesOverlap(e,n,i){if(Oi.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Oi.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const r=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),i[0]=new Qn(r,a,s,c),!0}else return i[0]=null,!1}ClipDiagonalBound(e,n,i,r){if(e>=0&&e<r)return e;const a=i,s=r-i-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?r-1:r-2}}}o(Fi,"LcsDiff");var Tr;(function(t){function e(i,r){return i instanceof fr?r:new l.Position(r.line,r.character)}o(e,"makePosition"),t.makePosition=e;function n(i,r){return i instanceof fr?r:new l.Range(r.start.line,r.start.character,r.end.line,r.end.character)}o(n,"makeRange"),t.makeRange=n})(Tr||(Tr={}));var Ur;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Ur||(Ur={}));const dr=o(class{constructor(t,e,n,i){this.diffCache=new Gt(32),this.indexDocumentCache=new Gt(32),this.codeDocumentCache=new Gt(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=i,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const r=await this.getIndexDocument(e);return r===void 0?!0:this.getDiff(1,r,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const r=(await this.changes).get(n.toString());if(r===E.Created||r===E.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),h=this.getWordAtOffset(a.lineAt(d.line).text,d.character),g=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(h===void 0||g===void 0||h!==g))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const r=(await this.changes).get(n.toString());if(r===E.Created||r===E.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const h=a.offsetAt(e.end);let g=h;for(const G of c){if(g<G.originalStart)break;const te=G.modifiedLength-G.originalLength;if(G.originalStart<=u){if(u<G.originalStart+G.originalLength)return;d+=te}else if(h<G.originalStart+G.originalLength)return;if(G.originalStart<=h){if(h<G.originalStart+G.originalLength)return;g+=te}}const p=s.positionAt(d),w=s.positionAt(g),O=a.getText(e),A=s.getText(Tr.makeRange(s,{start:p,end:w}));if(O===A)return new l.Range(p.line,p.character,w.line,w.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let i=t.get(e.toString());if(i!==null)return i!==void 0||(i=this._getDocument(e,n),t.set(e.toString(),i),i.then(r=>{r===void 0&&t.set(e.toString(),null)},void 0)),i}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(i=>new fr(t,Number.MAX_VALUE,dr.textDecoder.decode(i)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const i=`${t}${e.uri.toString()}`;let r=this.diffCache.get(i);return r!==void 0&&r.original===e.version&&r.modified===n.version||(r={original:e.version,modified:n.version,changes:di(e.getText(),n.getText(),!0)},this.diffCache.set(i,r)),r.changes}getWordAtOffset(t,e){let n="findStart",i=0,r=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":i=a+1;break;case"findEnd":r=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(i,r):void 0}},"_DiffMapper");let Br=dr;Br.textDecoder=new TextDecoder("utf8");var hr;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(hr||(hr={}));class fr{static computeLineOffsets(e,n,i=0){const r=n?[i]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,r.push(i+a+1))}return r}constructor(e,n,i){this._content=i,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=fr.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const i=n[e],r=n[e+1];if(r===void 0)return{lineNumber:e,text:this._content.substring(i)};const a=this._content.substring(i,r);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let i=0,r=n.length;if(r===0)return{line:0,character:e};for(;i<r;){const s=Math.floor((i+r)/2);n[s]>e?r=s:i=s+1}const a=i-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)}get lineCount(){return this.getLineOffsets().length}}o(fr,"TextDocument");var Mr;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Mr||(Mr={}));var vi;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(vi||(vi={}));var $i;(function(t){function e(i,r){return i===Number.MAX_VALUE&&(i=vi.MAX_VALUE),r===Number.MAX_VALUE&&(r=vi.MAX_VALUE),{line:i,character:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.objectLiteral(r)&&De.uinteger(r.line)&&De.uinteger(r.character)}o(n,"is"),t.is=n})($i||($i={}));var hi;(function(t){function e(i,r,a,s){if(De.uinteger(i)&&De.uinteger(r)&&De.uinteger(a)&&De.uinteger(s))return{start:$i.create(i,r),end:$i.create(a,s)};if($i.is(i)&&$i.is(r))return{start:i,end:r};throw new Error("Range#create called with invalid arguments["+i+", "+r+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(i){var r=i;return De.objectLiteral(r)&&$i.is(r.start)&&$i.is(r.end)}o(n,"is"),t.is=n})(hi||(hi={}));var Pr;(function(t){function e(i,r){return{uri:i,range:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&hi.is(r.range)&&(De.string(r.uri)||De.undefined(r.uri))}o(n,"is"),t.is=n})(Pr||(Pr={}));var Pn;(function(t){function e(i,r,a,s){return{targetUri:i,targetRange:r,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&hi.is(r.targetRange)&&De.string(r.targetUri)&&(hi.is(r.targetSelectionRange)||De.undefined(r.targetSelectionRange))&&(hi.is(r.originSelectionRange)||De.undefined(r.originSelectionRange))}o(n,"is"),t.is=n})(Pn||(Pn={}));var gr;(function(t){function e(i,r,a,s){return{red:i,green:r,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(i){var r=i;return De.numberRange(r.red,0,1)&&De.numberRange(r.green,0,1)&&De.numberRange(r.blue,0,1)&&De.numberRange(r.alpha,0,1)}o(n,"is"),t.is=n})(gr||(gr={}));var pa;(function(t){function e(i,r){return{range:i,color:r}}o(e,"create"),t.create=e;function n(i){var r=i;return hi.is(r.range)&&gr.is(r.color)}o(n,"is"),t.is=n})(pa||(pa={}));var ma;(function(t){function e(i,r,a){return{label:i,textEdit:r,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(i){var r=i;return De.string(r.label)&&(De.undefined(r.textEdit)||rr.is(r))&&(De.undefined(r.additionalTextEdits)||De.typedArray(r.additionalTextEdits,rr.is))}o(n,"is"),t.is=n})(ma||(ma={}));var vr;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(vr||(vr={}));var pr;(function(t){function e(i,r,a,s,c){var u={startLine:i,endLine:r};return De.defined(a)&&(u.startCharacter=a),De.defined(s)&&(u.endCharacter=s),De.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(i){var r=i;return De.uinteger(r.startLine)&&De.uinteger(r.startLine)&&(De.undefined(r.startCharacter)||De.uinteger(r.startCharacter))&&(De.undefined(r.endCharacter)||De.uinteger(r.endCharacter))&&(De.undefined(r.kind)||De.string(r.kind))}o(n,"is"),t.is=n})(pr||(pr={}));var ia;(function(t){function e(i,r){return{location:i,message:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&Pr.is(r.location)&&De.string(r.message)}o(n,"is"),t.is=n})(ia||(ia={}));var Vi;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Vi||(Vi={}));var Vr;(function(t){t.Unnecessary=1,t.Deprecated=2})(Vr||(Vr={}));var jr;(function(t){function e(n){var i=n;return i!=null&&De.string(i.href)}o(e,"is"),t.is=e})(jr||(jr={}));var Hr;(function(t){function e(i,r,a,s,c,u){var d={range:i,message:r};return De.defined(a)&&(d.severity=a),De.defined(s)&&(d.code=s),De.defined(c)&&(d.source=c),De.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(i){var r,a=i;return De.defined(a)&&hi.is(a.range)&&De.string(a.message)&&(De.number(a.severity)||De.undefined(a.severity))&&(De.integer(a.code)||De.string(a.code)||De.undefined(a.code))&&(De.undefined(a.codeDescription)||De.string((r=a.codeDescription)===null||r===void 0?void 0:r.href))&&(De.string(a.source)||De.undefined(a.source))&&(De.undefined(a.relatedInformation)||De.typedArray(a.relatedInformation,ia.is))}o(n,"is"),t.is=n})(Hr||(Hr={}));var mr;(function(t){function e(i,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:i,command:r};return De.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.string(r.title)&&De.string(r.command)}o(n,"is"),t.is=n})(mr||(mr={}));var rr;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function i(a){return{range:a,newText:""}}o(i,"del"),t.del=i;function r(a){var s=a;return De.objectLiteral(s)&&De.string(s.newText)&&hi.is(s.range)}o(r,"is"),t.is=r})(rr||(rr={}));var Wr;(function(t){function e(i,r,a){var s={label:i};return r!==void 0&&(s.needsConfirmation=r),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r!==void 0&&De.objectLiteral(r)&&De.string(r.label)&&(De.boolean(r.needsConfirmation)||r.needsConfirmation===void 0)&&(De.string(r.description)||r.description===void 0)}o(n,"is"),t.is=n})(Wr||(Wr={}));var Bn;(function(t){function e(n){var i=n;return typeof i=="string"}o(e,"is"),t.is=e})(Bn||(Bn={}));var ji;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function i(a,s){return{range:a,newText:"",annotationId:s}}o(i,"del"),t.del=i;function r(a){var s=a;return rr.is(s)&&(Wr.is(s.annotationId)||Bn.is(s.annotationId))}o(r,"is"),t.is=r})(ji||(ji={}));var yr;(function(t){function e(i,r){return{textDocument:i,edits:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&$r.is(r.textDocument)&&Array.isArray(r.edits)}o(n,"is"),t.is=n})(yr||(yr={}));var ar;(function(t){function e(i,r,a){var s={kind:"create",uri:i};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="create"&&De.string(r.uri)&&(r.options===void 0||(r.options.overwrite===void 0||De.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||De.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Bn.is(r.annotationId))}o(n,"is"),t.is=n})(ar||(ar={}));var Kr;(function(t){function e(i,r,a,s){var c={kind:"rename",oldUri:i,newUri:r};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="rename"&&De.string(r.oldUri)&&De.string(r.newUri)&&(r.options===void 0||(r.options.overwrite===void 0||De.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||De.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Bn.is(r.annotationId))}o(n,"is"),t.is=n})(Kr||(Kr={}));var Yi;(function(t){function e(i,r,a){var s={kind:"delete",uri:i};return r!==void 0&&(r.recursive!==void 0||r.ignoreIfNotExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="delete"&&De.string(r.uri)&&(r.options===void 0||(r.options.recursive===void 0||De.boolean(r.options.recursive))&&(r.options.ignoreIfNotExists===void 0||De.boolean(r.options.ignoreIfNotExists)))&&(r.annotationId===void 0||Bn.is(r.annotationId))}o(n,"is"),t.is=n})(Yi||(Yi={}));var Yr;(function(t){function e(n){var i=n;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(r){return De.string(r.kind)?ar.is(r)||Kr.is(r)||Yi.is(r):yr.is(r)}))}o(e,"is"),t.is=e})(Yr||(Yr={}));var qr=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,i){var r,a;if(i===void 0?r=rr.insert(e,n):Bn.is(i)?(a=i,r=ji.insert(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=ji.insert(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.replace=function(e,n,i){var r,a;if(i===void 0?r=rr.replace(e,n):Bn.is(i)?(a=i,r=ji.replace(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=ji.replace(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.delete=function(e,n){var i,r;if(n===void 0?i=rr.del(e):Bn.is(n)?(r=n,i=ji.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=ji.del(e,r)),this.edits.push(i),r!==void 0)return r},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),ya=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var i;if(Bn.is(e)?i=e:(i=this.nextId(),n=e),this._annotations[i]!==void 0)throw new Error("Id "+i+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+i);return this._annotations[i]=n,this._size++,i},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),go=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new ya(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(i){if(yr.is(i)){var r=new qr(i.edits,n._changeAnnotations);n._textEditChanges[i.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(function(i){var r=new qr(e.changes[i]);n._textEditChanges[i]=r})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if($r.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},i=this._textEditChanges[n.uri];if(!i){var r=[],a={textDocument:n,edits:r};this._workspaceEdit.documentChanges.push(a),i=new qr(r,this._changeAnnotations),this._textEditChanges[n.uri]=i}return i}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[e];if(!i){var r=[];this._workspaceEdit.changes[e]=r,i=new qr(r),this._textEditChanges[e]=i}return i}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ya,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Wr.is(n)||Bn.is(n)?r=n:i=n;var a,s;if(r===void 0?a=ar.create(e,i):(s=Bn.is(r)?r:this._changeAnnotations.manage(r),a=ar.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Wr.is(i)||Bn.is(i)?a=i:r=i;var s,c;if(a===void 0?s=Kr.create(e,n,r):(c=Bn.is(a)?a:this._changeAnnotations.manage(a),s=Kr.create(e,n,r,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Wr.is(n)||Bn.is(n)?r=n:i=n;var a,s;if(r===void 0?a=Yi.create(e,i):(s=Bn.is(r)?r:this._changeAnnotations.manage(r),a=Yi.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),wa;(function(t){function e(i){return{uri:i}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.string(r.uri)}o(n,"is"),t.is=n})(wa||(wa={}));var Ha;(function(t){function e(i,r){return{uri:i,version:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.string(r.uri)&&De.integer(r.version)}o(n,"is"),t.is=n})(Ha||(Ha={}));var $r;(function(t){function e(i,r){return{uri:i,version:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.string(r.uri)&&(r.version===null||De.integer(r.version))}o(n,"is"),t.is=n})($r||($r={}));var Kn;(function(t){function e(i,r,a,s){return{uri:i,languageId:r,version:a,text:s}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.string(r.uri)&&De.string(r.languageId)&&De.integer(r.version)&&De.string(r.text)}o(n,"is"),t.is=n})(Kn||(Kn={}));var Hn;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Hn||(Hn={})),function(t){function e(n){var i=n;return i===t.PlainText||i===t.Markdown}o(e,"is"),t.is=e}(Hn||(Hn={}));var ra;(function(t){function e(n){var i=n;return De.objectLiteral(n)&&Hn.is(i.kind)&&De.string(i.value)}o(e,"is"),t.is=e})(ra||(ra={}));var ri;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(ri||(ri={}));var Wa;(function(t){t.PlainText=1,t.Snippet=2})(Wa||(Wa={}));var or;(function(t){t.Deprecated=1})(or||(or={}));var wr;(function(t){function e(i,r,a){return{newText:i,insert:r,replace:a}}o(e,"create"),t.create=e;function n(i){var r=i;return r&&De.string(r.newText)&&hi.is(r.insert)&&hi.is(r.replace)}o(n,"is"),t.is=n})(wr||(wr={}));var Sr;(function(t){t.asIs=1,t.adjustIndentation=2})(Sr||(Sr={}));var Cr;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Cr||(Cr={}));var Ka;(function(t){function e(n,i){return{items:n||[],isIncomplete:!!i}}o(e,"create"),t.create=e})(Ka||(Ka={}));var aa;(function(t){function e(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(i){var r=i;return De.string(r)||De.objectLiteral(r)&&De.string(r.language)&&De.string(r.value)}o(n,"is"),t.is=n})(aa||(aa={}));var Sa;(function(t){function e(n){var i=n;return!!i&&De.objectLiteral(i)&&(ra.is(i.contents)||aa.is(i.contents)||De.typedArray(i.contents,aa.is))&&(n.range===void 0||hi.is(n.range))}o(e,"is"),t.is=e})(Sa||(Sa={}));var $a;(function(t){function e(n,i){return i?{label:n,documentation:i}:{label:n}}o(e,"create"),t.create=e})($a||($a={}));var Ga;(function(t){function e(n,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s={label:n};return De.defined(i)&&(s.documentation=i),De.defined(r)?s.parameters=r:s.parameters=[],s}o(e,"create"),t.create=e})(Ga||(Ga={}));var Qr;(function(t){t.Text=1,t.Read=2,t.Write=3})(Qr||(Qr={}));var za;(function(t){function e(n,i){var r={range:n};return De.number(i)&&(r.kind=i),r}o(e,"create"),t.create=e})(za||(za={}));var Ca;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ca||(Ca={}));var oa;(function(t){t.Deprecated=1})(oa||(oa={}));var Ja;(function(t){function e(n,i,r,a,s){var c={name:n,kind:i,location:{uri:a,range:r}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(Ja||(Ja={}));var ba;(function(t){function e(i,r,a,s,c,u){var d={name:i,detail:r,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(i){var r=i;return r&&De.string(r.name)&&De.number(r.kind)&&hi.is(r.range)&&hi.is(r.selectionRange)&&(r.detail===void 0||De.string(r.detail))&&(r.deprecated===void 0||De.boolean(r.deprecated))&&(r.children===void 0||Array.isArray(r.children))&&(r.tags===void 0||Array.isArray(r.tags))}o(n,"is"),t.is=n})(ba||(ba={}));var qi;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(qi||(qi={}));var Va;(function(t){function e(i,r){var a={diagnostics:i};return r!=null&&(a.only=r),a}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.typedArray(r.diagnostics,Hr.is)&&(r.only===void 0||De.typedArray(r.only,De.string))}o(n,"is"),t.is=n})(Va||(Va={}));var ja;(function(t){function e(i,r,a){var s={title:i},c=!0;return typeof r=="string"?(c=!1,s.kind=r):mr.is(r)?s.command=r:s.edit=r,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&De.string(r.title)&&(r.diagnostics===void 0||De.typedArray(r.diagnostics,Hr.is))&&(r.kind===void 0||De.string(r.kind))&&(r.edit!==void 0||r.command!==void 0)&&(r.command===void 0||mr.is(r.command))&&(r.isPreferred===void 0||De.boolean(r.isPreferred))&&(r.edit===void 0||Yr.is(r.edit))}o(n,"is"),t.is=n})(ja||(ja={}));var Ya;(function(t){function e(i,r){var a={range:i};return De.defined(r)&&(a.data=r),a}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&hi.is(r.range)&&(De.undefined(r.command)||mr.is(r.command))}o(n,"is"),t.is=n})(Ya||(Ya={}));var qa;(function(t){function e(i,r){return{tabSize:i,insertSpaces:r}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&De.uinteger(r.tabSize)&&De.boolean(r.insertSpaces)}o(n,"is"),t.is=n})(qa||(qa={}));var Qa;(function(t){function e(i,r,a){return{range:i,target:r,data:a}}o(e,"create"),t.create=e;function n(i){var r=i;return De.defined(r)&&hi.is(r.range)&&(De.undefined(r.target)||De.string(r.target))}o(n,"is"),t.is=n})(Qa||(Qa={}));var Za;(function(t){function e(i,r){return{range:i,parent:r}}o(e,"create"),t.create=e;function n(i){var r=i;return r!==void 0&&hi.is(r.range)&&(r.parent===void 0||t.is(r.parent))}o(n,"is"),t.is=n})(Za||(Za={}));var br=null,Xa;(function(t){function e(a,s,c,u){return new sa(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(De.defined(s)&&De.string(s.uri)&&(De.undefined(s.languageId)||De.string(s.languageId))&&De.uinteger(s.lineCount)&&De.func(s.getText)&&De.func(s.positionAt)&&De.func(s.offsetAt))}o(n,"is"),t.is=n;function i(a,s){for(var c=a.getText(),u=r(s,function(O,A){var G=O.range.start.line-A.range.start.line;return G===0?O.range.start.character-A.range.start.character:G}),d=c.length,h=u.length-1;h>=0;h--){var g=u[h],p=a.offsetAt(g.range.start),w=a.offsetAt(g.range.end);if(w<=d)c=c.substring(0,p)+g.newText+c.substring(w,c.length);else throw new Error("Overlapping edit");d=p}return c}o(i,"applyEdits"),t.applyEdits=i;function r(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);r(u,s),r(d,s);for(var h=0,g=0,p=0;h<u.length&&g<d.length;){var w=s(u[h],d[g]);w<=0?a[p++]=u[h++]:a[p++]=d[g++]}for(;h<u.length;)a[p++]=u[h++];for(;g<d.length;)a[p++]=d[g++];return a}o(r,"mergeSort")})(Xa||(Xa={}));var sa=function(){function t(e,n,i,r){this._uri=e,this._languageId=n,this._version=i,this._content=r,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,i=!0,r=0;r<n.length;r++){i&&(e.push(r),i=!1);var a=n.charAt(r);i=a==="\r"||a===`
`,a==="\r"&&r+1<n.length&&n.charAt(r+1)===`
`&&r++}i&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),i=0,r=n.length;if(r===0)return $i.create(0,e);for(;i<r;){var a=Math.floor((i+r)/2);n[a]>e?r=a:i=a+1}var s=i-1;return $i.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),De;(function(t){var e=Object.prototype.toString;function n(w){return typeof w!="undefined"}o(n,"defined"),t.defined=n;function i(w){return typeof w=="undefined"}o(i,"undefined"),t.undefined=i;function r(w){return w===!0||w===!1}o(r,"boolean"),t.boolean=r;function a(w){return e.call(w)==="[object String]"}o(a,"string"),t.string=a;function s(w){return e.call(w)==="[object Number]"}o(s,"number"),t.number=s;function c(w,O,A){return e.call(w)==="[object Number]"&&O<=w&&w<=A}o(c,"numberRange"),t.numberRange=c;function u(w){return e.call(w)==="[object Number]"&&-2147483648<=w&&w<=2147483647}o(u,"integer"),t.integer=u;function d(w){return e.call(w)==="[object Number]"&&0<=w&&w<=2147483647}o(d,"uinteger"),t.uinteger=d;function h(w){return e.call(w)==="[object Function]"}o(h,"func"),t.func=h;function g(w){return w!==null&&typeof w=="object"}o(g,"objectLiteral"),t.objectLiteral=g;function p(w,O){return Array.isArray(w)&&w.every(O)}o(p,"typedArray"),t.typedArray=p})(De||(De={}));var Zr;(function(t){function e(i){return typeof i=="string"||i instanceof String}o(e,"string"),t.string=e;function n(i){return typeof i=="number"||i instanceof Number}o(n,"number"),t.number=n})(Zr||(Zr={}));var la;(function(t){function e(n){const i=n;return i!=null&&(Zr.number(i.value)||Zr.string(i.value))&&Zr.string(i.target)}o(e,"is"),t.is=e})(la||(la={}));class _a extends l.Diagnostic{constructor(e,n,i,r){super(e,n,i);this.data=r,this.hasDiagnosticCode=!1}}o(_a,"ProtocolDiagnostic");var Ui;(function(t){const e=Object.prototype.toString;function n(h){return typeof h!="undefined"}o(n,"defined"),t.defined=n;function i(h){return h===!0||h===!1}o(i,"boolean"),t.boolean=i;function r(h){return e.call(h)==="[object String]"}o(r,"string"),t.string=r;function a(h){return e.call(h)==="[object Number]"}o(a,"number"),t.number=a;function s(h){return h!==null&&typeof h=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(h){return Array.isArray(h)}o(c,"array"),t.array=c;function u(h){return c(h)&&h.every(g=>r(g))}o(u,"stringArray"),t.stringArray=u;function d(h,g){return Array.isArray(h)&&h.every(g)}o(d,"typedArray"),t.typedArray=d})(Ui||(Ui={}));var Ir;(function(t){function e(n){const i=n;return i&&Ui.string(i.language)&&Ui.string(i.value)}o(e,"is"),t.is=e})(Ir||(Ir={}));function vo(t){const e=o(P=>l.Uri.parse(P),"nullConverter"),n=t!=null?t:e;function i(P){return n(P)}o(i,"asUri");function r(P){return P.map(a)}o(r,"asDiagnostics");function a(P){const nt=new _a(g(P.range),P.message,w(P.severity),P.data);return P.code!==void 0&&(jr.is(P.codeDescription)?nt.code={value:P.code,target:i(P.codeDescription.href)}:la.is(P.code)?(nt.hasDiagnosticCode=!0,nt.code={value:P.code.value,target:i(P.code.target)}):nt.code=P.code),P.source&&(nt.source=P.source),P.relatedInformation&&(nt.relatedInformation=s(P.relatedInformation)),Array.isArray(P.tags)&&(nt.tags=u(P.tags)),nt}o(a,"asDiagnostic");function s(P){return P.map(c)}o(s,"asRelatedInformation");function c(P){return new l.DiagnosticRelatedInformation(tt(P.location),P.message)}o(c,"asDiagnosticRelatedInformation");function u(P){if(!P)return;const nt=[];for(const hn of P){const Pi=d(hn);Pi!==void 0&&nt.push(Pi)}return nt.length>0?nt:void 0}o(u,"asDiagnosticTags");function d(P){switch(P){case Vr.Unnecessary:return l.DiagnosticTag.Unnecessary;case Vr.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function h(P){if(!!P)return new l.Position(P.line,P.character)}o(h,"asPosition");function g(P){if(!!P)return new l.Range(h(P.start),h(P.end))}o(g,"asRange");function p(P){return P.map(nt=>g(nt))}o(p,"asRanges");function w(P){if(P==null)return l.DiagnosticSeverity.Error;switch(P){case Vi.Error:return l.DiagnosticSeverity.Error;case Vi.Warning:return l.DiagnosticSeverity.Warning;case Vi.Information:return l.DiagnosticSeverity.Information;case Vi.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(w,"asDiagnosticSeverity");function O(P){if(Ui.string(P))return new l.MarkdownString(P);if(Ir.is(P))return new l.MarkdownString().appendCodeblock(P.value,P.language);if(Array.isArray(P)){const hn=[];for(const Pi of P){const Ua=new l.MarkdownString;Ir.is(Pi)?Ua.appendCodeblock(Pi.value,Pi.language):Ua.appendMarkdown(Pi),hn.push(Ua)}return hn}let nt;switch(P.kind){case Hn.Markdown:return new l.MarkdownString(P.value);case Hn.PlainText:return nt=new l.MarkdownString,nt.appendText(P.value),nt;default:return nt=new l.MarkdownString,nt.appendText(`Unsupported Markup content received. Kind is: ${P.kind}`),nt}}o(O,"asHoverContent");function A(P){if(Ui.string(P))return P;switch(P.kind){case Hn.Markdown:return new l.MarkdownString(P.value);case Hn.PlainText:return P.value;default:return`Unsupported Markup content received. Kind is: ${P.kind}`}}o(A,"asDocumentation");function G(P){if(!!P)return new l.Hover(O(P.contents),g(P.range))}o(G,"asHover");function te(P){if(!!P)return new l.TextEdit(g(P.range),P.newText)}o(te,"asTextEdit");function x(P){if(!!P)return P.map(te)}o(x,"asTextEdits");function ue(P){if(!P)return;const nt=new l.SignatureHelp;return Ui.number(P.activeSignature)?nt.activeSignature=P.activeSignature:nt.activeSignature=0,Ui.number(P.activeParameter)?nt.activeParameter=P.activeParameter:nt.activeParameter=0,P.signatures&&(nt.signatures=_e(P.signatures)),nt}o(ue,"asSignatureHelp");function _e(P){return P.map(Ae)}o(_e,"asSignatureInformations");function Ae(P){const nt=new l.SignatureInformation(P.label);return P.documentation!==void 0&&(nt.documentation=A(P.documentation)),P.parameters!==void 0&&(nt.parameters=Ve(P.parameters)),P.activeParameter!==void 0&&(nt.activeParameter=P.activeParameter),nt}o(Ae,"asSignatureInformation");function Ve(P){return P.map(wt)}o(Ve,"asParameterInformations");function wt(P){const nt=new l.ParameterInformation(P.label);return P.documentation&&(nt.documentation=A(P.documentation)),nt}o(wt,"asParameterInformation");function tt(P){if(!!P)return new l.Location(n(P.uri),g(P.range))}o(tt,"asLocation");function Nt(P){if(!!P)return It(P)}o(Nt,"asDeclarationResult");function qt(P){if(!!P)return It(P)}o(qt,"asDefinitionResult");function Ht(P){if(!P)return;const nt={targetUri:n(P.targetUri),targetRange:g(P.targetSelectionRange),originSelectionRange:g(P.originSelectionRange),targetSelectionRange:g(P.targetSelectionRange)};if(!nt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return nt}o(Ht,"asLocationLink");function It(P){if(!!P)return Ui.array(P)?P.length===0?[]:Pn.is(P[0])?P.map(Pi=>Ht(Pi)):P.map(hn=>tt(hn)):Pn.is(P)?[Ht(P)]:tt(P)}o(It,"asLocationResult");function vn(P){if(!!P)return P.map(nt=>tt(nt))}o(vn,"asReferences");function Xi(P){if(!!P)return P.map(Nr)}o(Xi,"asDocumentHighlights");function Nr(P){const nt=new l.DocumentHighlight(g(P.range));return Ui.number(P.kind)&&(nt.kind=Gr(P.kind)),nt}o(Nr,"asDocumentHighlight");function Gr(P){switch(P){case Qr.Text:return l.DocumentHighlightKind.Text;case Qr.Read:return l.DocumentHighlightKind.Read;case Qr.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Gr,"asDocumentHighlightKind");function ga(P,nt){if(!!P)return P.map(hn=>Ts(hn,nt))}o(ga,"asSymbolInformations");function lr(P){return P<=Ca.TypeParameter?P-1:l.SymbolKind.Property}o(lr,"asSymbolKind");function va(P){switch(P){case oa.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(va,"asSymbolTag");function uo(P){if(P==null)return;const nt=[];for(const hn of P){const Pi=va(hn);Pi!==void 0&&nt.push(Pi)}return nt.length===0?void 0:nt}o(uo,"asSymbolTags");function Ts(P,nt){const hn=new l.SymbolInformation(P.name,lr(P.kind),g(P.location.range),P.location.uri?n(P.location.uri):nt);return Ms(hn,P),P.containerName&&(hn.containerName=P.containerName),hn}o(Ts,"asSymbolInformation");function xl(P){if(P!=null)return P.map(No)}o(xl,"asDocumentSymbols");function No(P){var nt;const hn=new l.DocumentSymbol(P.name,(nt=P.detail)!=null?nt:"",lr(P.kind),g(P.range),g(P.selectionRange));if(Ms(hn,P),P.children!==void 0&&P.children.length>0){const Pi=[];for(const Ua of P.children)Pi.push(No(Ua));hn.children=Pi}return hn}o(No,"asDocumentSymbol");function Ms(P,nt){P.tags=uo(nt.tags),nt.deprecated&&(P.tags?P.tags.includes(l.SymbolTag.Deprecated)||(P.tags=P.tags.concat(l.SymbolTag.Deprecated)):P.tags=[l.SymbolTag.Deprecated])}o(Ms,"fillTags");function Oo(P){const nt={title:P.title,command:P.command};return P.arguments&&(nt.arguments=P.arguments),nt}o(Oo,"asCommand");function Nl(P){if(!!P)return P.map(Oo)}o(Nl,"asCommands");const Or=new Map;Or.set(qi.Empty,l.CodeActionKind.Empty),Or.set(qi.QuickFix,l.CodeActionKind.QuickFix),Or.set(qi.Refactor,l.CodeActionKind.Refactor),Or.set(qi.RefactorExtract,l.CodeActionKind.RefactorExtract),Or.set(qi.RefactorInline,l.CodeActionKind.RefactorInline),Or.set(qi.RefactorRewrite,l.CodeActionKind.RefactorRewrite),Or.set(qi.Source,l.CodeActionKind.Source),Or.set(qi.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function Uo(P){if(P==null)return;let nt=Or.get(P);if(nt)return nt;const hn=P.split(".");nt=l.CodeActionKind.Empty;for(const Pi of hn)nt=nt.append(Pi);return nt}o(Uo,"asCodeActionKind");function Ol(P){if(P!=null)return P.map(nt=>Uo(nt))}o(Ol,"asCodeActionKinds");function Ul(P){if(P==null)return;const nt=new l.CodeAction(P.title);return P.kind!==void 0&&(nt.kind=Uo(P.kind)),P.diagnostics&&(nt.diagnostics=r(P.diagnostics)),P.edit&&(nt.edit=Ps(P.edit)),P.command&&(nt.command=Oo(P.command)),P.isPreferred!==void 0&&(nt.isPreferred=P.isPreferred),nt}o(Ul,"asCodeAction");function Ps(P){if(!P)return;const nt=new l.WorkspaceEdit;return P.documentChanges?P.documentChanges.forEach(hn=>{if(ar.is(hn))nt.createFile(n(hn.uri),hn.options);else if(Kr.is(hn))nt.renameFile(n(hn.oldUri),n(hn.newUri),hn.options);else if(Yi.is(hn))nt.deleteFile(n(hn.uri),hn.options);else if(yr.is(hn))nt.set(n(hn.textDocument.uri),x(hn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(hn,void 0,4)}`)}):P.changes&&Object.keys(P.changes).forEach(hn=>{nt.set(n(hn),x(P.changes[hn]))}),nt}o(Ps,"asWorkspaceEdit");function Is(P){return new l.Color(P.red,P.green,P.blue,P.alpha)}o(Is,"asColor");function Ls(P){return new l.ColorInformation(g(P.range),Is(P.color))}o(Ls,"asColorInformation");function Bl(P){if(Array.isArray(P))return P.map(Ls)}o(Bl,"asColorInformations");function ks(P){const nt=new l.ColorPresentation(P.label);return nt.additionalTextEdits=x(P.additionalTextEdits),P.textEdit&&(nt.textEdit=te(P.textEdit)),nt}o(ks,"asColorPresentation");function Hl(P){if(Array.isArray(P))return P.map(ks)}o(Hl,"asColorPresentations");function Fs(P){if(P)switch(P){case vr.Comment:return l.FoldingRangeKind.Comment;case vr.Imports:return l.FoldingRangeKind.Imports;case vr.Region:return l.FoldingRangeKind.Region}}o(Fs,"asFoldingRangeKind");function xs(P){return new l.FoldingRange(P.startLine,P.endLine,Fs(P.kind))}o(xs,"asFoldingRange");function Wl(P){if(Array.isArray(P))return P.map(xs)}o(Wl,"asFoldingRanges");function Bo(P){return new l.SelectionRange(g(P.range),P.parent?Bo(P.parent):void 0)}o(Bo,"asSelectionRange");function Kl(P){if(!Array.isArray(P))return[];const nt=[];for(const hn of P)nt.push(Bo(hn));return nt}return o(Kl,"asSelectionRanges"),{asUri:i,asDiagnostics:r,asDiagnostic:a,asRange:g,asRanges:p,asPosition:h,asDiagnosticSeverity:w,asDiagnosticTag:d,asHover:G,asTextEdit:te,asTextEdits:x,asSignatureHelp:ue,asSignatureInformations:_e,asSignatureInformation:Ae,asParameterInformations:Ve,asParameterInformation:wt,asDeclarationResult:Nt,asDefinitionResult:qt,asLocation:tt,asReferences:vn,asDocumentHighlights:Xi,asDocumentHighlight:Nr,asDocumentHighlightKind:Gr,asSymbolKind:lr,asSymbolTag:va,asSymbolTags:uo,asSymbolInformations:ga,asSymbolInformation:Ts,asDocumentSymbols:xl,asDocumentSymbol:No,asCommand:Oo,asCommands:Nl,asCodeAction:Ul,asCodeActionKind:Uo,asCodeActionKinds:Ol,asWorkspaceEdit:Ps,asFoldingRangeKind:Fs,asFoldingRange:xs,asFoldingRanges:Wl,asColor:Is,asColorInformation:Ls,asColorInformations:Bl,asColorPresentation:ks,asColorPresentations:Hl,asSelectionRange:Bo,asSelectionRanges:Kl}}o(vo,"createConverter");var Qi;(function(t){function e(i,r){const{provider:a,repo:s}=r instanceof l.Uri?i.getVirtualUriMetadata(r):r;return i.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(i,r){const{provider:a,repo:s}=r instanceof l.Uri?i.getVirtualUriMetadata(r):r;return i.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(Qi||(Qi={}));var _r;(function(t){function e(r){if(r.HEAD.type===ae.Branch||r.HEAD.type===ae.RemoteBranch)return r.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(r){if(r.HEAD.type!==ae.Branch)return;if(r.pullRequest!==void 0)return r.HEAD.name;const a=r.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function i(r,a,s=b.timeout){const c=await r.getMetadata(a),u=Qi.externalIndexUri(r,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return b.getIndexedTip(u,d,{authentication:r.getAuthentication(a)},s)}o(i,"getIndexedTip"),t.getIndexedTip=i})(_r||(_r={}));var m;(function(t){const e=new Gt(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function i(s,c,u){const d=[];for(const g of u)d.push(n(s,c,g));const h=[];for(const g of await Promise.all(d))g!==void 0&&h.push(g);return h}o(i,"all"),t.all=i;function r(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(r,"sort"),t.sort=r;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${bn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",h=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:h}}o(a,"getCommitInfo"),t.getCommitInfo=a})(m||(m={}));var f;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(f||(f={}));var y;(function(t){function e(i){return{workspaceId:i.WorkspaceId,snapshotId:i.SnapshotId,state:i.State,commitId:i.commitId.toLowerCase(),branchName:n(i.BranchName),creationDate:new Date(i._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(i){if(i!==null)return i.startsWith("refs/heads/")?i.substr(11):i}o(n,"getBranchName")})(y||(y={}));var b;(function(t){t.timeout=5*60*1e3;const e=new Gt(32),n=new Gt(32);async function i(g,p,w,O=t.timeout){const A=await r(g,p,w,O);if(!(A===void 0||A.length===0))return A[0]}o(i,"getIndexedTip"),t.getIndexedTip=i;async function r(g,p,w,O=t.timeout){const A=c(g,p);let G=e.get(A);if(G===void 0||G!==void 0&&Date.now()-G.time>O){const te=V.getAllWorkspaceSnapshots(g,w,p);G={time:Date.now(),promise:te,snapshots:void 0},e.set(A,G)}if(G.snapshots!==null){if(G.snapshots===void 0){let te=await G.promise;if(te===void 0){G.snapshots=null;return}te.sort((x,ue)=>ue.creationDate.getTime()-x.creationDate.getTime()),te=te.filter(x=>x.state===5||x.state===3),G.snapshots=te}return G.snapshots}}o(r,"all"),t.all=r;async function a(g,p,w,O,A=t.timeout){const G=s(g,p);let te=n.get(G);if(te===null)return;if(te!==void 0)return te;const x=c(g,w),ue=e.get(x);if(ue!==void 0&&Date.now()-ue.time<=A){if(ue.snapshots===null)return;const _e=ue.snapshots!==void 0?ue.snapshots:await r(g,w,O);if(_e!==void 0){for(const Ae of _e)if(Ae.commitId===p)return n.set(G,Ae),Ae}return}if(te=await V.getWorkspaceSnapshot(p,O),te===void 0){n.set(G,null);return}return n.set(G,te),te}o(a,"single"),t.single=a;function s(g,p){return`${g.toString()}/${p}`}o(s,"getSingleCacheKey");function c(g,p){return p!==void 0?`${p}\\${g.toString()}`:g.toString()}o(c,"getAllCacheKey");async function u(g,p,w,O=t.timeout){return await a(g,p,void 0,w,O)!==void 0}o(u,"exists"),t.exists=u;async function d(g,p,w,O=t.timeout){return await r(g,p,w,O)!==void 0}o(d,"branch"),t.branch=d;async function h(g,p,w){const O=new Map(w.map(te=>[te.commitId,te])),A=await m.all(g,p.uri,w.map(te=>te.commitId));if(A.length===0)return;const G=[];for(const te of A){const x=O.get(te.hash);x!==void 0&&G.push({...x,commit:te})}if(G.length!==0)return G}o(h,"resolve"),t.resolve=h})(b||(b={}));var N;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(N||(N={}));var V;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function i(x,ue,_e){var Ae;const Ve=await An(x,{method:"POST",body:JSON.stringify(ue),headers:{"Content-Type":"application/json",...(await _e.authentication).getRichNavigationHeaders(),"x-correlation-id":(Ae=_e.correlationId)!=null?Ae:ot()}});if(!!Ve.ok)return Ve.json()}o(i,"postRequest");async function r(x,ue,_e){const Ae=await An(x,{method:"POST",body:ue,headers:(await _e.authentication).getRichNavigationHeaders()});if(!!Ae.ok)return await Ae.json()}o(r,"postForm");function a(x,ue){return`${n}/${e}/HttpLanguageService/${x}/${ue}`}o(a,"makeRequestUrl");async function s(x,ue){const _e=await An(`${n}/${e}/WorkspaceSnapshot?commitId=${x}`,{headers:(await ue.authentication).getRichNavigationHeaders()});if(_e.ok){const Ae=await _e.json();return{workspaceId:Ae.workspaceId,snapshotId:Ae.snapshotId,state:Ae.state,commitId:x.toLowerCase(),branchName:void 0,creationDate:new Date}}}o(s,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=s;async function c(x,ue,_e){const Ae=new Kt;Ae.append("uriString",x.toString(!0)),_e!==void 0&&Ae.append("branchName",_e);try{const Ve=await r(`${n}/${e}/WorkspaceSnapshot/all`,Ae,ue);return Ve===void 0?void 0:Ve.map(y.asWorkspaceSnapshot)}catch(Ve){I.error(Ve);return}}o(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(x,ue,_e){const Ae=new Kt;Ae.append("uriString",x.toString(!0)),_e!==void 0&&Ae.append("branchName",_e);try{const Ve=await r(`${n}/${e}/WorkspaceSnapshot/latest`,Ae,ue);return Ve===void 0?void 0:y.asWorkspaceSnapshot(Ve)}catch(Ve){I.error(Ve);return}}o(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function d(x,ue,_e){try{return i(a(x,"textDocument/capabilities"),ue,_e)}catch(Ae){I.error(Ae);return}}o(d,"capabilities"),t.capabilities=d;async function h(x,ue,_e){try{return i(a(x,"textDocument/hover"),ue,_e)}catch(Ae){I.error(Ae);return}}o(h,"provideHover"),t.provideHover=h;async function g(x,ue,_e){try{return i(a(x,"textDocument/definition"),ue,_e)}catch(Ae){I.error(Ae);return}}o(g,"provideDefinition"),t.provideDefinition=g;async function p(x,ue,_e){try{return i(a(x,"textDocument/declaration"),ue,_e)}catch(Ae){I.error(Ae);return}}o(p,"provideDeclaration"),t.provideDeclaration=p;async function w(x,ue,_e){try{return i(a(x,"textDocument/typeDefinition"),ue,_e)}catch(Ae){I.error(Ae);return}}o(w,"provideTypeDefinition"),t.provideTypeDefinition=w;async function O(x,ue,_e){try{return i(a(x,"textDocument/references"),ue,_e)}catch(Ae){I.error(Ae);return}}o(O,"provideReferences"),t.provideReferences=O;async function A(x,ue,_e){try{return i(a(x,"textDocument/foldingRange"),ue,_e)}catch(Ae){I.error(Ae);return}}o(A,"providerFoldingRanges"),t.providerFoldingRanges=A;async function G(x,ue,_e){if(ue=="")return;const Ae=await An(`${n}/${e}/Search/${x}/${ue}`,{headers:(await _e.authentication).getRichNavigationHeaders()});if(Ae.ok)return await Ae.json()}o(G,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=G;async function te(x,ue,_e){const Ae=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${x}/${ue}/assets/designtime`,query:`id=${_e}`});try{const Ve=await An(Ae.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return Ve.ok?Ve.text():void 0}catch(Ve){I.error(Ve);return}}o(te,"getDesignTimeFileContent"),t.getDesignTimeFileContent=te})(V||(V={}));class me{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const i=[];i.push(this.providerService.onDidChangeRepositories(r=>{var a;for(const s of r.added){const c=s.uri,u=W.getIndexMemento(c);if(u!==void 0){const d=Qi.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?b.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&U(u.ref)&&b.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const h={},g=d.pullRequest===void 0?_r.getIndexBranchName(d):void 0;g!==void 0?h.branch={name:g}:h.ref=d.HEAD.sha,W.setIndexMemento(c,h).then(void 0,void 0)},void 0)}})),i.push(this.providerService.onDidChangeRepository(r=>{const a=r.repository.uri,s=F(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...i)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const i=await this.providerService.getModeRefType(e),r=ci.decode(e);if(r!==void 0){if(r.type===li.Latest)return i===L.Branch?this.getIndexedTip(e,n?0:b.timeout):void 0;if(r.type===li.SHA){const s=Qi.externalIndexUri(this.providerService,e);return s===void 0?void 0:await b.exists(s,r.sha,{authentication:this.providerService.getAuthentication(e)},n?0:b.timeout)?r.sha:void 0}}if(this.providerService.getModeConfig(e,i).index===$e.Latest)return this.getIndexedTip(e,n?0:b.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),i=F(n);let r=this.metadata.get(i);return r!==void 0||(r=this.createIndexMetadata(e),this.metadata.set(i,r)),r}async getIndexedTip(e,n=b.timeout){const i=await _r.getIndexedTip(this.providerService,e,n);return i!==void 0?i.commitId:void 0}async createIndexMetadata(e){const n=new ct(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const i=Qi.externalIndexUri(this.providerService,e);if(i===void 0)return;n.logStep("Getting metadata");const r=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,r),s=await r;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?_r.getIndexBranchName(s):void 0,d=await b.single(i,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===ae.Branch||s.HEAD.type===ae.RemoteBranch){const w=ci.decode(e);if(w!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?w.type===li.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await b.branch(i,u,{authentication:this.providerService.getAuthentication(e)})?{type:un.Indexed}:{type:un.NotIndexed}):{type:un.NotIndexed}:w.type===li.Latest||w.type===li.SHA?{type:un.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:un.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const g=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((g.index===$e.Latest||g.index===$e.Match)&&d!==void 0)return{type:un.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(g.index===$e.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:un.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===ae.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const w=await b.all(i,u,{authentication:c});if(w!==void 0&&w.length>0)return{type:un.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,w),branch:{name:u}}}}return d!==void 0?{type:un.Indexed}:s.HEAD.type===ae.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await b.branch(i,u,{authentication:c}))?{type:un.Indexed}:{type:un.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,i){if(i.length===0)throw new Error("At least on snapshot should exist");const r=new Set(i.map(h=>h.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const h of a.commits)if(h.hash===n){s=h;break}if(s===void 0)return;const c=new Map(a.commits.map(h=>[h.hash,h])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!r.has(d.hash);)if(d.parents.length>0){for(let h=1;h<d.parents.length;h++){const g=c.get(d.parents[h]);g!==void 0&&u.push(g)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const i=Qi.externalIndexUri(this.providerService,e);if(i===void 0)return[];const r=await b.all(i,void 0,{authentication:this.providerService.getAuthentication(e)});if(r===void 0)return[];const a=[];for(const s of r)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[i,r]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,r);if(i===void 0)return[];const{HEAD:s}=n,c=[];if(i!==void 0){let u;const d=[`${ke(s.sha)}`];if(i.type===un.Active){const h=await i.sha;a.index===$e.Latest||a.index===$e.Match?(u=a.display===$.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===$e.TipPlusLatest&&(u="$(layers-dot)",h!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else i.type===un.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):i.type===un.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(Dt({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(me,"RichNavIndexProvider");var Te;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",h=>{d(h).catch(g=>I.log("Selecting index mode failed.",g))})]}o(n,"create"),t.create=n;const i=new Map;function r(h){i.set(h.key(),h)}o(r,"addService"),t.addService=r;function a(h){i.delete(h.key())}o(a,"removeService"),t.removeService=a;function s(h){return i.get(F(h))}o(s,"getService");async function c(h){for(const g of i.values())if(await g.handles(h))return g}o(c,"getServiceForDocument");async function u(){try{let h=o(function(O){const A=O.lastIndexOf("/");return A<=0?O:O.substr(A+1)},"basename");const g=l.window.activeTextEditor;if(g===void 0){e.hide();return}const p=await c(g.document);if(p===void 0){e.hide();return}const w=await p.isDocumentIndexed(g.document);w===rn.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",h(g.document.uri.path))),e.show()):w===rn.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",h(g.document.uri.path))),e.show()):e.hide()}catch(h){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(h){var g;const p=h.uri,w=s(p);if(w===void 0)return;const[O,A,G,te]=await Promise.all([w.getBranchName(),w.getMetadata(),w.getIndexMetadata(),w.getModeRefType(p)]);if(G===void 0||!un.hasIndex(G.type))return;let x,ue=!1;const _e=ci.decode(p);(_e==null?void 0:_e.type)===li.Latest||(_e==null?void 0:_e.type)===li.SHA?(ue=!0,x={display:$.Browse,index:_e.type===li.Latest?$e.Latest:$e.Match}):x=(g=w.getCurrentIndexMode())!=null?g:w.getModeConfig(p,te);const Ae=w.getUriMetadata(),Ve=l.l10n.t("{0} current","$(check)"),wt={indexKind:"disable",label:l.l10n.t("Disable"),description:x.index===$e.None?`  \u2022  ${Ve}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let tt,Nt;if(te===L.PullRequestBranch||te===L.PullRequestRemoteBranch||te===L.Commit||te===L.Tag){const qt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:x.index===$e.Match&&x.display===$.Browse?`  \u2022  ${Ve}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},Ht={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:x.index===$e.Match&&x.display===$.Edit?`  \u2022  ${Ve}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let It=Ae.provider.id==="github";It&&(It=A.HEAD.type===ae.RemoteBranch?A.HEAD.branch.remote.accessLevel>=Z.Write:!0);const vn=It?[qt,Ht,wt]:[qt,wt];Nt=await l.window.showQuickPick(vn,{placeHolder:"Pick a rich navigation mode"})}else if(te===L.Branch||te===L.RemoteBranch){const qt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:x.index===$e.Latest?`  \u2022  ${Ve}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},Ht={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:x.index===$e.TipPlusLatest?`  \u2022  ${Ve}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},It=Ae.provider.id==="github"?[qt,Ht,wt]:[qt,wt];Nt=await l.window.showQuickPick(It,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",O)})}if(Nt!==void 0&&(Nt.indexKind==="disable"?tt={display:$.Edit,index:$e.None}:Nt.indexKind==="match"?tt={display:$.Browse,index:$e.Match}:Nt.indexKind==="match+writeable"?tt={display:$.Edit,index:$e.Match}:Nt.indexKind==="tip+latest"?tt={display:$.Edit,index:$e.TipPlusLatest}:Nt.indexKind==="latest"&&(tt={display:$.Browse,index:$e.Latest}),tt!==void 0&&!pe.equals(x,tt))){if(await w.hasChanges()&&tt.display===$.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await w.updateIndexMode(tt),ue){const qt=await w.getNonIndexedWorkspaceDescriptor();qt!==void 0&&ut(w.getProviderService(),qt)}}}o(d,"toggleIndexMode")})(Te||(Te={}));class gt{constructor(e){this.telemetryService=e}static createStatus(){return Te.create()}async createNavigationService(e,n){const i=await e.getIndexMetadata(n.uri);if(!(i===void 0||i.type===un.NotIndexed))return()=>new fn(e,n,this.telemetryService)}}o(gt,"RichNavServiceProvider");var ft;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(r){const a=e.exec(r);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:xt.scheme,authority:M(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function i(r){if(r.scheme!==xt.scheme)return;let a;try{return a=JSON.parse(C(r.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${r.path}`}}catch{return}}o(i,"toRichNavComponents"),t.toRichNavComponents=i})(ft||(ft={}));const bt=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new Gt(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return bt.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==bt.scheme)return;const n=ft.toRichNavComponents(t);if(n===void 0)return;const i=await V.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(i!==void 0)return e={content:this.textEncoder.encode(i),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let xt=bt;xt.scheme="vsck-fs",xt.emptyDisposable={dispose:()=>{}};var rn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(rn||(rn={}));const Ft=o(class{static registerCapability(t,e,n){var i;const r=this.disabledCapabilities.get(t);if(r==null?void 0:r[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(i=n[e])!=null?i:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const i=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[h,g,p]=this.currentlyResolved,[w,O,A]=c,G=this.providerService.getModeConfig(s,A);if(h!==void 0&&g!==void 0&&p!==void 0&&h.HEAD.sha===w.HEAD.sha&&O!==void 0&&g.type===O.type&&p.index===G.index&&p.display===G.display){const x=(g==null?void 0:g.type)===un.Active?await g.sha:void 0,ue=(O==null?void 0:O.type)===un.Active?await O.sha:void 0;if(x===ue)return}const te={newDisplayMode:G.display,newIndexMode:G.index,newIndexType:(O==null?void 0:O.type)===void 0?"undefined":un[O==null?void 0:O.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(g==null?void 0:g.type)===void 0?"undefined":un[g==null?void 0:g.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",te),this.currentlyResolved=[w,O,G];for(const x of this.registeredFeatures.values())x.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,Ji.isActive(O)){const x=Qi.externalIndexUri(this.providerService,w),ue=await O.sha;if(x!==void 0&&ue!==void 0){const _e=await b.single(x,ue,_r.getIndexBranchName(w),{authentication:this.providerService.getAuthentication(s)});_e!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:_e.snapshotId}),this.workspaceSnapshot=_e,this.documentListeners=this.installDocumentListeners(),((G==null?void 0:G.display)===$.Edit||w.HEAD.sha!==ue)&&(this.mapper=new Br(this.providerService,s,ue,w.HEAD.sha)))}}await Te.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Gt(2048),this.knownDesignTimeFiles=new Set;const r=[];r.push(this.providerService.onDidChangeRepository(a=>{F(a.repository.uri)===F(this.repository.uri)&&i()})),r.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(F(s)===F(this.repository.uri)){i();break}})),this.environmentListeners=l.Disposable.from(...r),i(!0),Te.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=ci.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===li.Latest&&a.type!==un.Active||d.type===li.SHA&&(a.type!==un.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const h=await this.providerService.getModeRefType(c,this.metadata),g=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,h,!0);g!==void 0&&g.display===$.Browse&&a!==void 0&&g.index!==$e.None&&a.type!==un.Active?u=!0:(a==null?void 0:a.type)===un.Active&&await a.sha===void 0&&((g==null?void 0:g.display)===$.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Ft.fileSystemProvider===void 0&&(Ft.fileSystemProvider=new xt,l.workspace.registerFileSystemProvider(xt.scheme,Ft.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const i=this.repository.uri,r=await this.providerService.getModeRefType(i,this.metadata);t=this.providerService.getModeConfig(i,r),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===$e.Latest){await Promise.all([this.metadata,this.indexMetadata]);const i=await this.getIndexedTip();if(i===void 0)return;await this.sync(i.hash)}else t.index===$e.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await W.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return F(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),Te.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Qe.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return _r.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:xe.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===un.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=Qi.externalIndexUri(this.providerService,t),n=_r.getIndexBranchName(t);if(e===void 0||n===void 0)return;const i=await b.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(i===void 0)return;const r=await m.get(this.providerService,this.repository.uri,i.commitId);if(r!==void 0)return{...r,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=Qi.externalIndexUri(this.providerService,e);if(n===void 0)return;const[i,r]=await Promise.all([m.get(this.providerService,this.repository.uri,t),b.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(i===void 0||r===void 0))return{...i,branchName:r.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const i=n.uri.scheme;if(Qe.scheme!==i&&xt.scheme!==i)return;const r=n.uri.toString();if(i===Qe.scheme&&!r.startsWith(this.repositoryRoot)||i===xt.scheme&&!this.knownDesignTimeFiles.has(r)||this.pendingCapabilitiesRequests.has(r))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(r);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(r,c),s=await c,this.pendingCapabilitiesRequests.delete(r),this.capabilitiesCache.set(r,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const i=n.uri.toString(),r=this.registeredFeatures.get(i);r!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),r.dispose()),this.pendingCapabilitiesRequests.delete(i)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const i=this.workspaceSnapshot,r=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,G)=>{const te=`/${i.snapshotId}/source/`;this.metadata.then(x=>{A(vo(ue=>{const _e=l.Uri.parse(ue);if(x===void 0)return _e;try{if(_e.scheme==="vsck"&&_e.authority===i.workspaceId&&_e.path.startsWith(te))return this.repository.createRelativeUri(_e.path.substr(te.length));const Ae=ft.toVSCode(ue);return Ae!==void 0?(this.knownDesignTimeFiles.add(Ae.toString()),Ae):_e}catch(Ae){return _e}}))},G)}),d=new RegExp(`^vsck:\\/\\/${i.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function h(A){const G=d.exec(A);return G===null||G.length===2}o(h,"designTimeFilter");function g(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const G=A[0];return typeof G.uri=="string"?A.filter(ue=>h(ue.uri)):typeof G.targetUri=="string"?A.filter(ue=>h(ue.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(g,"filterDesignTimeFiles");async function p(A,G,te){var x,ue,_e;if(te==null||A===void 0)return te;const Ae=new Map(l.workspace.textDocuments.map(wt=>[wt.uri.toString(!0),wt]));if(Array.isArray(te)){const wt=[],tt=[];if(te.length===0)return[];for(const Nt of te){const qt=Nt;if(qt.uri instanceof l.Uri){const Ht=await A.mapRangeFromIndexToCode((x=Ae.get(qt.uri.toString()))!=null?x:qt.uri,qt.range);Ht!==void 0&&wt.push(new l.Location(qt.uri,Ht))}else{const Ht=Nt,It=(ue=Ae.get(Ht.targetUri.toString()))!=null?ue:Ht.targetUri,vn=Ht.originSelectionRange?await A.mapRangeFromIndexToCode(G,Ht.originSelectionRange):void 0;if(vn!==void 0||Ht.originSelectionRange===void 0){const Xi=await A.mapRangeFromIndexToCode(It,Ht.targetRange);if(Xi!==void 0){const Nr=Ht.targetSelectionRange?await A.mapRangeFromIndexToCode(It,Ht.targetSelectionRange):void 0;(Nr!==void 0||Ht.targetSelectionRange===void 0)&&tt.push({targetUri:Ht.targetUri,targetRange:Xi,targetSelectionRange:Nr,originSelectionRange:vn})}}}}return wt.length>0?wt:tt}const Ve=await A.mapRangeFromIndexToCode((_e=Ae.get(te.uri.toString()))!=null?_e:te.uri,te.range);if(Ve!==void 0)return new l.Location(te.uri,Ve)}o(p,"mapLocations");const w=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:ot()}),"getRestApiOptions"),O=o((A,G)=>{const te={method:A,correlationId:G.correlationId};this.telemetryService.publicLog2("codex.restAPICall",te)},"sendTelemetry");Ft.registerCapability(r,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=w(A);return O("codex.provideHover",x),(await u).asHover(await V.provideHover(n,te,x))}})),Ft.registerCapability(r,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=w(A);return O("codex.provideDefinition",x),p(this.mapper,A,(await u).asDefinitionResult(g(await V.provideDefinition(n,te,x))))}})),Ft.registerCapability(r,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=w(A);return O("codex.provideDeclaration",x),p(this.mapper,A,(await u).asDeclarationResult(g(await V.provideDeclaration(n,te,x))))}})),Ft.registerCapability(r,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=w(A);return O("codex.provideTypeDefinition",x),p(this.mapper,A,(await u).asDefinitionResult(g(await V.provideTypeDefinition(n,te,x))))}})),Ft.registerCapability(r,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,G,te)=>{const x=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,G):G;if(x===void 0)return;const ue={position:{line:x.line,character:x.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:te.includeDeclaration}},_e=w(A);return O("codex.provideReferences",_e),p(this.mapper,A,(await u).asReferences(g(await V.provideReferences(n,ue,_e))))}})),Ft.registerCapability(r,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async A=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const G=w(A);return O("codex.provideFoldingRanges",G),(await u).asFoldingRanges(await V.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),G))}})),Ft.registerCapability(r,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async A=>{const G=w(t),te=await V.provideWorkspaceSymbols(n,A,G);if(te!==void 0)return(await u).asSymbolInformations(te)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),Te.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await V.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===xt.scheme){const i=ft.toRichNavComponents(t);return i===void 0?t:l.Uri.file(i.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let fn=Ft;fn.localCapabilities=new Map([["javascript",Object.assign(N.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(N.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(N.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(N.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),fn.disabledCapabilities=new Map([["javascript",Object.assign(N.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(N.create(),{declarationProvider:!0})],["typescript",Object.assign(N.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(N.create(),{declarationProvider:!0})]]);var gn=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),ve=o((t,e,n)=>(gn(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Zn=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Gi=o((t,e,n,i)=>(gn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),"__privateSet"),Bi;class Lr{constructor(e){Zn(this,Bi,void 0),Gi(this,Bi,e)}async provideEditSessionIdentity(e,n){await wi(ve(this,Bi),e.uri);const i=ve(this,Bi).getRepository(e.uri);if(!i||n.isCancellationRequested)return null;const{uri:r,ref:a}=await ve(this,Bi).getRepositoryContext(i),s=await ve(this,Bi).getMetadata(i.uri);return JSON.stringify({remote:r!=null?r:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const i=eo(e),r=eo(n);return i.remote===r.remote&&i.ref===r.ref&&i.sha===r.sha?l.EditSessionIdentityMatch.Complete:i.remote===r.remote&&i.ref===r.ref&&i.sha!==r.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(i){return l.EditSessionIdentityMatch.Partial}}}o(Lr,"EditSessionIdentityProvider"),Bi=new WeakMap;function eo(t){let{remote:e,ref:n,sha:i}=JSON.parse(t);return typeof e=="string"&&e.endsWith(".git")&&(e=e.slice(0,e.length-4)),{remote:e,ref:n,sha:i}}o(eo,"normalizeEditSessionIdentity");var Ea=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Ti=o((t,e,n)=>(Ea(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),ca=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),po=o((t,e,n,i)=>(Ea(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Mi;class Da{constructor(e){ca(this,Mi,void 0),po(this,Mi,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await wi(Ti(this,Mi),e);const n=Ti(this,Mi).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Ti(this,Mi).getRepositoryContext(n)})}async getMetadata(e){const n=Ti(this,Mi).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:i,repo:r}=n;return{provider:{id:i.id,name:i.name},repo:r,getRevision:async()=>{const{HEAD:a}=await Ti(this,Mi).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Ti(this,Mi).getRegisteredProvider(e)}getProviderUri(e){return z.getProviderUri(e)}getProviderRootUri(e){return Ti(this,Mi).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Qe.scheme&&Ti(this,Mi).hasProvider(e,n)}getVirtualUri(e){return z.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Ti(this,Mi).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==z.scheme)return!1;await wi(Ti(this,Mi),e);const n=Ti(this,Mi).getProviderRootUri(e);if(n.scheme!=="github")return!1;const i=new ct(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:fe.Debug}),r=await Ti(this,Mi).loadWorkspaceContents(n);return i.stop(),r}}o(Da,"ExtensionApi"),Mi=new WeakMap;var Aa=Object.defineProperty,Ra=Object.getOwnPropertyDescriptor,Ta=o((t,e,n,i)=>{for(var r=i>1?void 0:i?Ra(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&Aa(e,n,r),r},"fs_decorateClass");const Xr=l.FileSystemError.FileNotFound().code;class kr{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const i=n.map(r=>{switch(r.type){case E.Created:return{type:l.FileChangeType.Created,uri:r.uri};case E.Changed:return{type:l.FileChangeType.Changed,uri:r.uri};case E.Deleted:return{type:l.FileChangeType.Deleted,uri:r.uri}}});setTimeout(()=>this._onDidChangeFile.fire(i),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Qe.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(I.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=z.getOpenUris(this.scheme,e);for(const[r,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>se(a,s))&&(this.implicitlyWatchedUris.delete(r),n.set(r,a));I.debug(`fs.updateOpenOrWatchedUris(${e.map(r=>r.toString()).join(", ")}): uris=${n.size}`);for(const r of e)n.set(F(r),r);const i=[...n.values()].map(r=>({type:l.FileChangeType.Changed,uri:r}));setTimeout(()=>{I.debug(`fs.updateOpenOrWatchedUris: Firing events=${i.map(r=>r.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(i)},0)}watch(e,n){const i=F(e);this.watchedUris.set(i,e);const r=wi(this.providerService,e).then(()=>this.providerService.watch(z.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(i),(await r).dispose()}}}async stat(e){const n=new ct(`fs.stat(${e.toString()})`);await wi(this.providerService,e);const i=this.providerService.getVirtualRootUri(e),r=i.toString();this.syncedRootUris.has(r)||(this.syncedRootUris.add(r),await this.providerService.fetchOrSync(i));let a;try{if(this.providerService.changeStoreMaybeHasChanges(i,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(F(e),e);return a=await this.providerService.stat(z.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(F(e)),n.stop()}}async readDirectory(e){const n=new ct(`fs.readDirectory(${e.toString()})`);await wi(this.providerService,e),this.implicitlyWatchedUris.set(F(e),e);try{n.logStep("Provider query");let i=await this.providerService.readDirectory(z.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),i=await this.providerService.changeStoreUpdateDirectoryEntries(e,i)),i}finally{n.stop()}}async createDirectory(e){const n=new ct(`fs.createDirectory(${e.toString()})`);await wi(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(i){throw I.error(i,n.context),i}finally{n.stop()}}async readFile(e){const n=new ct(`fs.readFile(${e.toString()})`),i=F(e);let r;await wi(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(i,e);return r=await this.providerService.readFile(z.getProviderUri(e)),r}catch(a){throw a instanceof Un&&we.showProviderNotFoundMessage(a),a}finally{r===void 0&&this.implicitlyWatchedUris.delete(i),n.stop()}}async writeFile(e,n,i){const r=new ct(`fs.writeFile(${e.toString()})`,{},n.length,i);await wi(this.providerService,e);try{let a;try{if(a=await this.stat(e),!i.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===Xr){if(!i.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{r.logStep("Provider original query");let s;try{s=await this.providerService.readFile(z.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===Xr)s=new Uint8Array;else throw c}r.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw I.error(s,r.context),s}}catch(a){throw a instanceof Un&&we.showProviderNotFoundMessage(a),a}finally{r.stop()}}async delete(e,n){const i=new ct(`fs.delete(${e.toString()})`,{},n);await wi(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(r){throw I.error(r,i.context),r}finally{i.stop()}}async deleteDirectory(e,n){const i=new ct(`fs.deleteDirectory(${e.toString()})`,{},n);try{const r=await this.readDirectory(e);if(r.length!==0){if(!n.recursive&&r.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of r)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(r){throw I.error(r,i.context),r}finally{i.stop()}}async rename(e,n,i){const r=new ct(`fs.rename(${e.toString()} -> ${n.toString()})`,{},i);await wi(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:i.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,i);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async renameDirectory(e,n,i){const r=new ct(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},i);try{await this.copyDirectory(e,n,i),await this.delete(e,{recursive:!0})}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async copy(e,n,i){const r=new ct(`fs.copy(${e.toString()} -> ${n.toString()})`,{},i);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:i.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,i);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async copyDirectory(e,n,i){const r=new ct(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},i);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),i):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),i)}catch(a){throw I.error(a,r.context),a}}finally{r.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===Xr)return!1;throw n}}async provideFileSearchResults(e,n,i){var r;const a=new ct(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:fe.Debug});await wi(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:z.getProviderUri(n.folder)},i),s==null?void 0:s.map(c=>z.getVirtualUri(c))}catch(c){throw I.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(r=s==null?void 0:s.length)!=null?r:0} results found`})}}async provideTextSearchResults(e,n,i,r){return await wi(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:z.getProviderUri(n.folder)},{report:a=>i.report({...a,uri:z.getVirtualUri(a.uri)})},r)}}o(kr,"ChangeTrackingFileSystem"),Ta([zn()],kr.prototype,"stat",1),Ta([zn()],kr.prototype,"readDirectory",1),Ta([zn()],kr.prototype,"readFile",1);const Ma=o(class{constructor(t){this.providerService=t,this.lock=new jn("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const i=W.getEffective("uncommittedChangesOnEntry");if(i==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&i==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const h=[u,d].join(`

`),g={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},w={title:l.l10n.t("Don't Show Again")},O=await l.window.showInformationMessage(h,{modal:!0},g,p,w);switch(O==null?void 0:O.title){case g.title:await l.commands.executeCommand("remoteHub.sync");break;case w.title:await W.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){I.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){I.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){I.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const i=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let r,a;(i==null?void 0:i.groups)!==void 0&&(r=Number(i.groups.start),isNaN(r)&&(r=void 0),a=Number(i.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,i.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;r!==void 0&&(u={selection:new l.Range(Number(r)-1,0,a!=null?a:r,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return I.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return I.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){I.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){I.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${F(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?l.Uri.from(i):i);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return I.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Ma.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let ua=Ma;ua.storageSchemaVersion=1;function Zi(){}o(Zi,"Diff"),Zi.prototype={diff:o(function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.callback;typeof i=="function"&&(r=i,i={}),this.options=i;var a=this;function s(A){return r?(setTimeout(function(){r(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,h=c+u,g=[{newPos:-1,components:[]}],p=this.extractCommon(g[0],n,e,0);if(g[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function w(){for(var A=-1*d;A<=d;A+=2){var G=void 0,te=g[A-1],x=g[A+1],ue=(x?x.newPos:0)-A;te&&(g[A-1]=void 0);var _e=te&&te.newPos+1<c,Ae=x&&0<=ue&&ue<u;if(!_e&&!Ae){g[A]=void 0;continue}if(!_e||Ae&&te.newPos<x.newPos?(G=mo(x),a.pushComponent(G.components,void 0,!0)):(G=te,G.newPos++,a.pushComponent(G.components,!0,void 0)),ue=a.extractCommon(G,n,e,A),G.newPos+1>=c&&ue+1>=u)return s(to(a,G.components,n,e,a.useLongestToken));g[A]=G}d++}if(o(w,"execEditLength"),r)o(function A(){setTimeout(function(){if(d>h)return r();w()||A()},0)},"exec")();else for(;d<=h;){var O=w();if(O)return O}},"diff"),pushComponent:o(function(e,n,i){var r=e[e.length-1];r&&r.added===n&&r.removed===i?e[e.length-1]={count:r.count+1,added:n,removed:i}:e.push({count:1,added:n,removed:i})},"pushComponent"),extractCommon:o(function(e,n,i,r){for(var a=n.length,s=i.length,c=e.newPos,u=c-r,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],i[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],i=0;i<e.length;i++)e[i]&&n.push(e[i]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function to(t,e,n,i,r){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(i.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var g=e[a-1];e[a-1]=e[a],e[a]=g}}else{if(!d.added&&r){var h=n.slice(c,c+d.count);h=h.map(function(w,O){var A=i[u+O];return A.length>w.length?A:w}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(to,"buildValues");function mo(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(mo,"clonePath");var yo=new Zi;function Ho(t,e,n){return yo.diff(t,e,n)}o(Ho,"diffChars");function Pa(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Pa,"generateOptions");var le=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,lt=/\S/,mt=new Zi;mt.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!lt.test(t)&&!lt.test(e)},mt.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&le.test(e[n])&&le.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Wt(t,e,n){return n=Pa(n,{ignoreWhitespace:!0}),mt.diff(t,e,n)}o(Wt,"diffWords");function mn(t,e,n){return mt.diff(t,e,n)}o(mn,"diffWordsWithSpace");var Sn=new Zi;Sn.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var r=n[i];i%2&&!this.options.newlineIsToken?e[e.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),e.push(r))}return e};function En(t,e,n){return Sn.diff(t,e,n)}o(En,"diffLines");function Ci(t,e,n){var i=Pa(n,{ignoreWhitespace:!0});return Sn.diff(t,e,i)}o(Ci,"diffTrimmedLines");var pi=new Zi;pi.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function bi(t,e,n){return pi.diff(t,e,n)}o(bi,"diffSentences");var _i=new Zi;_i.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Fr(t,e,n){return _i.diff(t,e,n)}o(Fr,"diffCss");function ai(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ai=o(function(e){return typeof e},"_typeof"):ai=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),ai(t)}o(ai,"_typeof");function sr(t){return Ns(t)||Os(t)||Us(t)||Bs()}o(sr,"_toConsumableArray");function Ns(t){if(Array.isArray(t))return wo(t)}o(Ns,"_arrayWithoutHoles");function Os(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(Os,"_iterableToArray");function Us(t,e){if(!!t){if(typeof t=="string")return wo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wo(t,e)}}o(Us,"_unsupportedIterableToArray");function wo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}o(wo,"_arrayLikeToArray");function Bs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(Bs,"_nonIterableSpread");var Hs=Object.prototype.toString,da=new Zi;da.useLongestToken=!0,da.tokenize=Sn.tokenize,da.castInput=function(t){var e=this.options,n=e.undefinedReplacement,i=e.stringifyReplacer,r=i===void 0?function(a,s){return typeof s=="undefined"?n:s}:i;return typeof t=="string"?t:JSON.stringify(So(t,null,null,r),r,"  ")},da.equals=function(t,e){return Zi.prototype.equals.call(da,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Gl(t,e,n){return da.diff(t,e,n)}o(Gl,"diffJson");function So(t,e,n,i,r){e=e||[],n=n||[],i&&(t=i(r,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(Hs.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=So(t[a],e,n,i,r);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),ai(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=So(t[u],e,n,i,u);e.pop(),n.pop()}else s=t;return s}o(So,"canonicalize");var no=new Zi;no.tokenize=function(t){return t.slice()},no.join=no.removeEmpty=function(t){return t};function zl(t,e,n){return no.diff(t,e,n)}o(zl,"diffArrays");function Ia(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],r=[],a=0;function s(){var d={};for(r.push(d);a<n.length;){var h=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(h))break;var g=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(h);g&&(d.index=g[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var h=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(h){var g=h[1]==="---"?"old":"new",p=h[2].split("	",2),w=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(w)&&(w=w.substr(1,w.length-2)),d[g+"FileName"]=w,d[g+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,h=n[a++],g=h.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+g[1],oldLines:typeof g[2]=="undefined"?1:+g[2],newStart:+g[3],newLines:typeof g[4]=="undefined"?1:+g[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var w=0,O=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(i[a]||`
`),A==="+"?w++:A==="-"?O++:A===" "&&(w++,O++);else break}if(!w&&p.newLines===1&&(p.newLines=0),!O&&p.oldLines===1&&(p.oldLines=0),e.strict){if(w!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(O!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return r}o(Ia,"parsePatch");function Ws(t,e,n){var i=!0,r=!1,a=!1,s=1;return o(function c(){if(i&&!a){if(r?s++:i=!1,t+s<=n)return s;a=!0}if(!r)return a||(i=!0),e<=t-s?-s++:(r=!0,c())},"iterator")}o(Ws,"distanceIterator");function Wo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ia(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var i=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Nr,Gr,ga,lr){return Gr===lr},c=0,u=n.fuzzFactor||0,d=0,h=0,g,p;function w(Nr,Gr){for(var ga=0;ga<Nr.lines.length;ga++){var lr=Nr.lines[ga],va=lr.length>0?lr[0]:" ",uo=lr.length>0?lr.substr(1):lr;if(va===" "||va==="-"){if(!s(Gr+1,i[Gr],va,uo)&&(c++,c>u))return!1;Gr++}}return!0}o(w,"hunkFits");for(var O=0;O<a.length;O++){for(var A=a[O],G=i.length-A.oldLines,te=0,x=h+A.oldStart-1,ue=Ws(x,d,G);te!==void 0;te=ue())if(w(A,x+te)){A.offset=h+=te;break}if(te===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var _e=0,Ae=0;Ae<a.length;Ae++){var Ve=a[Ae],wt=Ve.oldStart+Ve.offset+_e-1;_e+=Ve.newLines-Ve.oldLines;for(var tt=0;tt<Ve.lines.length;tt++){var Nt=Ve.lines[tt],qt=Nt.length>0?Nt[0]:" ",Ht=Nt.length>0?Nt.substr(1):Nt,It=Ve.linedelimiters[tt];if(qt===" ")wt++;else if(qt==="-")i.splice(wt,1),r.splice(wt,1);else if(qt==="+")i.splice(wt,0,Ht),r.splice(wt,0,It),wt++;else if(qt==="\\"){var vn=Ve.lines[tt-1]?Ve.lines[tt-1][0]:null;vn==="+"?g=!0:vn==="-"&&(p=!0)}}}if(g)for(;!i[i.length-1];)i.pop(),r.pop();else p&&(i.push(""),r.push(`
`));for(var Xi=0;Xi<i.length-1;Xi++)i[Xi]=i[Xi]+r[Xi];return i.join("")}o(Wo,"applyPatch");function Jl(t,e){typeof t=="string"&&(t=Ia(t));var n=0;function i(){var r=t[n++];if(!r)return e.complete();e.loadFile(r,function(a,s){if(a)return e.complete(a);var c=Wo(s,r,e);e.patched(r,c,function(u){if(u)return e.complete(u);i()})})}o(i,"processIndex"),i()}o(Jl,"applyPatches");function Ko(t,e,n,i,r,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=En(n,i,s);c.push({value:"",lines:[]});function u(te){return te.map(function(x){return" "+x})}o(u,"contextLines");for(var d=[],h=0,g=0,p=[],w=1,O=1,A=o(function(x){var ue=c[x],_e=ue.lines||ue.value.replace(/\n$/,"").split(`
`);if(ue.lines=_e,ue.added||ue.removed){var Ae;if(!h){var Ve=c[x-1];h=w,g=O,Ve&&(p=s.context>0?u(Ve.lines.slice(-s.context)):[],h-=p.length,g-=p.length)}(Ae=p).push.apply(Ae,sr(_e.map(function(Xi){return(ue.added?"+":"-")+Xi}))),ue.added?O+=_e.length:w+=_e.length}else{if(h)if(_e.length<=s.context*2&&x<c.length-2){var wt;(wt=p).push.apply(wt,sr(u(_e)))}else{var tt,Nt=Math.min(_e.length,s.context);(tt=p).push.apply(tt,sr(u(_e.slice(0,Nt))));var qt={oldStart:h,oldLines:w-h+Nt,newStart:g,newLines:O-g+Nt,lines:p};if(x>=c.length-2&&_e.length<=s.context){var Ht=/\n$/.test(n),It=/\n$/.test(i),vn=_e.length==0&&p.length>qt.oldLines;!Ht&&vn&&n.length>0&&p.splice(qt.oldLines,0,"\\ No newline at end of file"),(!Ht&&!vn||!It)&&p.push("\\ No newline at end of file")}d.push(qt),h=0,g=0,p=[]}w+=_e.length,O+=_e.length}},"_loop"),G=0;G<c.length;G++)A(G);return{oldFileName:t,newFileName:e,oldHeader:r,newHeader:a,hunks:d}}o(Ko,"structuredPatch");function Ks(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var i=t.hunks[n];i.oldLines===0&&(i.oldStart-=1),i.newLines===0&&(i.newStart-=1),e.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@"),e.push.apply(e,i.lines)}return e.join(`
`)+`
`}o(Ks,"formatPatch");function $s(t,e,n,i,r,a,s){return Ks(Ko(t,e,n,i,r,a,s))}o($s,"createTwoFilesPatch");function Gs(t,e,n,i,r,a){return $s(t,t,e,n,i,r,a)}o(Gs,"createPatch");function zs(t,e){return t.length!==e.length?!1:Co(t,e)}o(zs,"arrayEqual");function Co(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Co,"arrayStartsWith");function Js(t){var e=_o(t.lines),n=e.oldLines,i=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,i!==void 0?t.newLines=i:delete t.newLines}o(Js,"calcLineCount");function Vl(t,e,n){t=$o(t,n),e=$o(e,n);var i={};(t.index||e.index)&&(i.index=t.index||e.index),(t.newFileName||e.newFileName)&&(Go(t)?Go(e)?(i.oldFileName=io(i,t.oldFileName,e.oldFileName),i.newFileName=io(i,t.newFileName,e.newFileName),i.oldHeader=io(i,t.oldHeader,e.oldHeader),i.newHeader=io(i,t.newHeader,e.newHeader)):(i.oldFileName=t.oldFileName,i.newFileName=t.newFileName,i.oldHeader=t.oldHeader,i.newHeader=t.newHeader):(i.oldFileName=e.oldFileName||t.oldFileName,i.newFileName=e.newFileName||t.newFileName,i.oldHeader=e.oldHeader||t.oldHeader,i.newHeader=e.newHeader||t.newHeader)),i.hunks=[];for(var r=0,a=0,s=0,c=0;r<t.hunks.length||a<e.hunks.length;){var u=t.hunks[r]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(zo(u,d))i.hunks.push(Jo(u,s)),r++,c+=u.newLines-u.oldLines;else if(zo(d,u))i.hunks.push(Jo(d,c)),a++,s+=d.newLines-d.oldLines;else{var h={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};Vs(h,u.oldStart,u.lines,d.oldStart,d.lines),a++,r++,i.hunks.push(h)}}return i}o(Vl,"merge");function $o(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ia(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Ko(void 0,void 0,e,t)}return t}o($o,"loadPatch");function Go(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(Go,"fileNameChanged");function io(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(io,"selectField");function zo(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(zo,"hunkBefore");function Jo(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(Jo,"cloneHunk");function Vs(t,e,n,i,r){var a={offset:e,lines:n,index:0},s={offset:i,lines:r,index:0};for(jo(t,a,s),jo(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))js(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,sr(ea(a)))}else if(u[0]==="+"&&c[0]===" "){var h;(h=t.lines).push.apply(h,sr(ea(s)))}else c[0]==="-"&&u[0]===" "?Vo(t,a,s):u[0]==="-"&&c[0]===" "?Vo(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):bo(t,ea(a),ea(s))}Yo(t,a),Yo(t,s),Js(t)}o(Vs,"mergeLines");function js(t,e,n){var i=ea(e),r=ea(n);if(qo(i)&&qo(r)){if(Co(i,r)&&Qo(n,i,i.length-r.length)){var a;(a=t.lines).push.apply(a,sr(i));return}else if(Co(r,i)&&Qo(e,r,r.length-i.length)){var s;(s=t.lines).push.apply(s,sr(r));return}}else if(zs(i,r)){var c;(c=t.lines).push.apply(c,sr(i));return}bo(t,i,r)}o(js,"mutualChange");function Vo(t,e,n,i){var r=ea(e),a=Ys(n,r);if(a.merged){var s;(s=t.lines).push.apply(s,sr(a.merged))}else bo(t,i?a:r,i?r:a)}o(Vo,"removal");function bo(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(bo,"conflict");function jo(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var i=e.lines[e.index++];t.lines.push(i),e.offset++}}o(jo,"insertLeading");function Yo(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(Yo,"insertTrailing");function ea(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var i=t.lines[t.index];if(n==="-"&&i[0]==="+"&&(n="+"),n===i[0])e.push(i),t.index++;else break}return e}o(ea,"collectChange");function Ys(t,e){for(var n=[],i=[],r=0,a=!1,s=!1;r<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[r];if(u[0]==="+")break;if(a=a||c[0]!==" ",i.push(u),r++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[r]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;r<e.length;)i.push(e[r++]);return{merged:i,changes:n}}o(Ys,"collectContext");function qo(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(qo,"allRemoves");function Qo(t,e,n){for(var i=0;i<n;i++){var r=e[e.length-n+i].substr(1);if(t.lines[t.index+i]!==" "+r)return!1}return t.index+=n,!0}o(Qo,"skipRemoveSuperset");function _o(t){var e=0,n=0;return t.forEach(function(i){if(typeof i!="string"){var r=_o(i.mine),a=_o(i.theirs);e!==void 0&&(r.oldLines===a.oldLines?e+=r.oldLines:e=void 0),n!==void 0&&(r.newLines===a.newLines?n+=r.newLines:n=void 0)}else n!==void 0&&(i[0]==="+"||i[0]===" ")&&n++,e!==void 0&&(i[0]==="-"||i[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(_o,"calcOldNewLineCount");function jl(t){for(var e=[],n,i,r=0;r<t.length;r++)n=t[r],n.added?i=1:n.removed?i=-1:i=0,e.push([i,n.value]);return e}o(jl,"convertChangesToDMP");function Yl(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];i.added?e.push("<ins>"):i.removed&&e.push("<del>"),e.push(qs(i.value)),i.added?e.push("</ins>"):i.removed&&e.push("</del>")}return e.join("")}o(Yl,"convertChangesToXML");function qs(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(qs,"escapeHTML");var Zo=/[^a-zA-Z0-9]/,Xo=/\s/,es=/[\r\n]/,Qs=/\n\r?\n$/,Zs=/^\r?\n\r?\n/,Ze;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(Ze||(Ze={}));function Xs(t,e){return t<e?t:e}o(Xs,"min");function el(t,e){return t>e?t:e}o(el,"max");var Hi=Rt,La=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var i=["@@ -"+e+" +"+n+` @@
`],r,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case Ze.DIFF_INSERT:r="+";break;case Ze.DIFF_DELETE:r="-";break;case Ze.DIFF_EQUAL:r=" ";break}i[a+1]=r+encodeURI(this.diffs[a][1])+`
`}return i.join("").replace(/%20/g," ")},t}(),tl=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,i,r){typeof r=="undefined"&&(this.diffTimeout<=0?r=Number.MAX_VALUE:r=Date.now()+this.diffTimeout*1e3);var a=r;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[Ze.DIFF_EQUAL,e]]:[];typeof i=="undefined"&&(i=!0);var s=i,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var h=this.diff_compute_(e,n,s,a);return u&&h.unshift([Ze.DIFF_EQUAL,u]),d&&h.push([Ze.DIFF_EQUAL,d]),this.diff_cleanupMerge(h),h},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var i=0,r=Hi.min(e.length,n.length),a=r,s=0;i<a;)e.substring(s,a)===n.substring(s,a)?(i=a,s=i):r=a,a=Math.floor((r-i)/2+i);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var i=0,r=Hi.min(e.length,n.length),a=r,s=0;i<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(i=a,s=i):r=a,a=Math.floor((r-i)/2+i);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,i=[],r=0,a=null,s=0,c=0,u=0,d=0,h=0;s<e.length;)e[s][0]===Ze.DIFF_EQUAL?(i[r++]=s,c=d,u=h,d=0,h=0,a=e[s][1]):(e[s][0]===Ze.DIFF_INSERT?d+=e[s][1].length:h+=e[s][1].length,a&&a.length<=Hi.max(c,u)&&a.length<=Hi.max(d,h)&&(e.splice(i[r-1],0,[Ze.DIFF_DELETE,a]),e[i[r-1]+1][0]=Ze.DIFF_INSERT,r--,r--,s=r>0?i[r-1]:-1,c=0,u=0,d=0,h=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===Ze.DIFF_DELETE&&e[s][0]===Ze.DIFF_INSERT){var g=e[s-1][1],p=e[s][1],w=this.diff_commonOverlap_(g,p),O=this.diff_commonOverlap_(p,g);w>=O?(w>=g.length/2||w>=p.length/2)&&(e.splice(s,0,[Ze.DIFF_EQUAL,p.substring(0,w)]),e[s-1][1]=g.substring(0,g.length-w),e[s+1][1]=p.substring(w),s++):(O>=g.length/2||O>=p.length/2)&&(e.splice(s,0,[Ze.DIFF_EQUAL,g.substring(0,O)]),e[s-1][0]=Ze.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-O),e[s+1][0]=Ze.DIFF_DELETE,e[s+1][1]=g.substring(O),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL){var i=e[n-1][1],r=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(i,r);if(s){var c=r.substring(r.length-s);i=i.substring(0,i.length-s),r=c+r.substring(0,r.length-s),a=c+a}for(var u=i,d=r,h=a,g=this.diff_cleanupSemanticScore_(i,r)+this.diff_cleanupSemanticScore_(r,a);r.charAt(0)===a.charAt(0);){i+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(i,r)+this.diff_cleanupSemanticScore_(r,a);p>=g&&(g=p,u=i,d=r,h=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,i=[],r=0,a=null,s=0,c=!1,u=!1,d=!1,h=!1;s<e.length;)e[s][0]===Ze.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||h)?(i[r++]=s,c=d,u=h,a=e[s][1]):(r=0,a=null),d=h=!1):(e[s][0]===Ze.DIFF_DELETE?h=!0:d=!0,a&&(c&&u&&d&&h||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(h)===3)&&(e.splice(i[r-1],0,[Ze.DIFF_DELETE,a]),e[i[r-1]+1][0]=Ze.DIFF_INSERT,r--,a=null,c&&u?(d=h=!0,r=0):(r--,s=r>0?i[r-1]:-1,d=h=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([Ze.DIFF_EQUAL,""]);for(var n=0,i=0,r=0,a="",s="",c;n<e.length;)switch(e[n][0]){case Ze.DIFF_INSERT:r++,s+=e[n][1],n++;break;case Ze.DIFF_DELETE:i++,a+=e[n][1],n++;break;case Ze.DIFF_EQUAL:i+r>1?(i!==0&&r!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-i-r>0&&e[n-i-r-1][0]===Ze.DIFF_EQUAL?e[n-i-r-1][1]+=s.substring(0,c):(e.splice(0,0,[Ze.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=i+r,e.splice(n,i+r),a.length&&(e.splice(n,0,[Ze.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[Ze.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===Ze.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var i=0,r=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==Ze.DIFF_INSERT&&(i+=e[c][1].length),e[c][0]!==Ze.DIFF_DELETE&&(r+=e[c][1].length),!(i>n));c++)a=i,s=r;return e.length!==c&&e[c][0]===Ze.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],i=/&/g,r=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],h=d.replace(i,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case Ze.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case Ze.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+h+"</del>";break;case Ze.DIFF_EQUAL:n[c]="<span>"+h+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],i=0;i<e.length;i++)e[i][0]!==Ze.DIFF_INSERT&&(n[i]=e[i][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],i=0;i<e.length;i++)e[i][0]!==Ze.DIFF_DELETE&&(n[i]=e[i][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,i=0,r=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case Ze.DIFF_INSERT:i+=c.length;break;case Ze.DIFF_DELETE:r+=c.length;break;case Ze.DIFF_EQUAL:n+=Hi.max(i,r),i=0,r=0;break}}return n+=Hi.max(i,r),n},t.prototype.diff_toDelta=function(e){for(var n=[],i=0;i<e.length;i++)switch(e[i][0]){case Ze.DIFF_INSERT:n[i]="+"+encodeURI(e[i][1]);break;case Ze.DIFF_DELETE:n[i]="-"+e[i][1].length;break;case Ze.DIFF_EQUAL:n[i]="="+e[i][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var i=[],r=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{i[r++]=[Ze.DIFF_INSERT,decodeURI(u)]}catch(g){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=e.substring(a,a+=d);s[c].charAt(0)==="="?i[r++]=[Ze.DIFF_EQUAL,h]:i[r++]=[Ze.DIFF_DELETE,h];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return i},t.prototype.diff_linesToChars=function(e,n){var i=[],r={};i[0]="";var a=this.diff_linesToCharsMunge_(e,i,r,4e4),s=this.diff_linesToCharsMunge_(n,i,r,65535);return{chars1:a,chars2:s,lineArray:i}},t.prototype.diff_charsToLines=function(e,n){for(var i=0;i<e.length;i++){for(var r=e[i][1],a=[],s=0;s<r.length;s++)a[s]=n[r.charCodeAt(s)];e[i][1]=a.join("")}},t.prototype.match_main=function(e,n,i){if(e==null||n==null||i==null)throw new Error("Null input. (match_main)");return i=Hi.max(0,Hi.min(i,e.length)),e===n?0:e.length?e.substring(i,i+n.length)===n?i:this.match_bitap_(e,n,i):-1},t.prototype.patch_make=function(e,n,i){var r,a;if(typeof e=="string"&&typeof n=="string"&&typeof i=="undefined")r=e,a=this.diff_main(r,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof i=="undefined")a=e,r=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof i=="undefined")r=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&i&&typeof i=="object")r=e,a=i;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new La,u=0,d=0,h=0,g=r,p=r,w=0;w<a.length;w++){var O=a[w][0],A=a[w][1];switch(!u&&O!==Ze.DIFF_EQUAL&&(c.start1=d,c.start2=h),O){case Ze.DIFF_INSERT:c.diffs[u++]=a[w],c.length2+=A.length,p=p.substring(0,h)+A+p.substring(h);break;case Ze.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[w],p=p.substring(0,h)+p.substring(h+A.length);break;case Ze.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==w+1?(c.diffs[u++]=a[w],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,g),s.push(c),c=new La,u=0,g=p,d=h);break}O!==Ze.DIFF_INSERT&&(d+=A.length),O!==Ze.DIFF_DELETE&&(h+=A.length)}return u&&(this.patch_addContext_(c,g),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){for(var r=e[i],a=new La,s=0;s<r.diffs.length;s++)a.diffs[s]=[r.diffs[s][0],r.diffs[s][1]];a.start1=r.start1,a.start2=r.start2,a.length1=r.length1,a.length2=r.length2,n[i]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);n=i+n+i,this.patch_splitMax(e);for(var r=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+r,u=this.diff_text1(e[s].diffs),d=void 0,h=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(h=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(h===-1||d>=h)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,r-=e[s].length2-e[s].length1;else{a[s]=!0,r=d-c;var g=void 0;if(h===-1?g=n.substring(d,d+u.length):g=n.substring(d,h+this.matchMaxBits),u===g)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,g,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var w=0,O=0,A=0;A<e[s].diffs.length;A++){var G=e[s].diffs[A];G[0]!==Ze.DIFF_EQUAL&&(O=this.diff_xIndex(p,w)),G[0]===Ze.DIFF_INSERT?n=n.substring(0,d+O)+G[1]+n.substring(d+O):G[0]===Ze.DIFF_DELETE&&(n=n.substring(0,d+O)+n.substring(d+this.diff_xIndex(p,w+G[1].length))),G[0]!==Ze.DIFF_DELETE&&(w+=G[1].length)}}}}}return n=n.substring(i.length,n.length-i.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,i="",r=1;r<=n;r++)i+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=n,e[r].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==Ze.DIFF_EQUAL)s.unshift([Ze.DIFF_EQUAL,i]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==Ze.DIFF_EQUAL)s.push([Ze.DIFF_EQUAL,i]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=i.substring(0,c),a.length1+=c,a.length2+=c}return i},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=n)){var r=e[i];e.splice(i--,1);for(var a=r.start1,s=r.start2,c="";r.diffs.length!==0;){var u=new La,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([Ze.DIFF_EQUAL,c]));r.diffs.length!==0&&u.length1<n-this.patchMargin;){var h=r.diffs[0][0],g=r.diffs[0][1];h===Ze.DIFF_INSERT?(u.length2+=g.length,s+=g.length,u.diffs.push(r.diffs.shift()),d=!1):h===Ze.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===Ze.DIFF_EQUAL&&g.length>2*n?(u.length1+=g.length,a+=g.length,d=!1,u.diffs.push([h,g]),r.diffs.shift()):(g=g.substring(0,n-u.length1-this.patchMargin),u.length1+=g.length,a+=g.length,h===Ze.DIFF_EQUAL?(u.length2+=g.length,s+=g.length):d=!1,u.diffs.push([h,g]),g===r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(g.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(r.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===Ze.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([Ze.DIFF_EQUAL,p])),d||e.splice(++i,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],i=0;i<e.length;i++)n[i]=e[i];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var i=e.split(`
`),r=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var s=i[r].match(a);if(!s)throw new Error("Invalid patch string: "+i[r]);var c=new La;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),r++;for(var u=void 0,d=void 0,h=void 0;r<i.length;){u=i[r].charAt(0),h=i[r].substring(1);try{d=decodeURI(h)}catch(g){throw new Error("Illegal escape in patch_fromText: "+h)}if(u==="-")c.diffs.push([Ze.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([Ze.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([Ze.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}r++}}return n},t.prototype.diff_compute_=function(e,n,i,r){var a;if(!e)return[[Ze.DIFF_INSERT,n]];if(!n)return[[Ze.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[Ze.DIFF_INSERT,s.substring(0,u)],[Ze.DIFF_EQUAL,c],[Ze.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=Ze.DIFF_DELETE,a[2][0]=Ze.DIFF_DELETE),a;if(c.length===1)return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var h=d[0],g=d[1],p=d[2],w=d[3],O=d[4],A=this.diff_main(h,p,i,r),G=this.diff_main(g,w,i,r);return A.concat([[Ze.DIFF_EQUAL,O]],G)}return i&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,r):this.diff_bisect_(e,n,r)},t.prototype.diff_lineMode_=function(e,n,i){var r=this.diff_linesToChars(e,n);e=r.chars1,n=r.chars2;var a=r.lineArray,s=this.diff_main(e,n,!1,i);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([Ze.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,h="",g="";c<s.length;){switch(s[c][0]){case Ze.DIFF_INSERT:d++,g+=s[c][1];break;case Ze.DIFF_DELETE:u++,h+=s[c][1];break;case Ze.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(h,g,!1,i),w=p.length-1;w>=0;w--)s.splice(c,0,p[w]);c=c+p.length}d=0,u=0,h="",g="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,i){for(var r=e.length,a=n.length,s=Math.ceil((r+a)/2),c=s,u=2*s,d=new Array(u),h=new Array(u),g=0;g<u;g++)d[g]=-1,h[g]=-1;d[c+1]=0,h[c+1]=0;for(var p=r-a,w=p%2!=0,O=0,A=0,G=0,te=0,x=0;x<s&&!(Date.now()>i);x++){for(var ue=-x+O;ue<=x-A;ue+=2){var _e=c+ue,Ae=void 0;ue===-x||ue!==x&&d[_e-1]<d[_e+1]?Ae=d[_e+1]:Ae=d[_e-1]+1;for(var Ve=Ae-ue;Ae<r&&Ve<a&&e.charAt(Ae)===n.charAt(Ve);)Ae++,Ve++;if(d[_e]=Ae,Ae>r)A+=2;else if(Ve>a)O+=2;else if(w){var wt=c+p-ue;if(wt>=0&&wt<u&&h[wt]!==-1){var tt=r-h[wt];if(Ae>=tt)return this.diff_bisectSplit_(e,n,Ae,Ve,i)}}}for(var Nt=-x+G;Nt<=x-te;Nt+=2){var wt=c+Nt,tt=void 0;Nt===-x||Nt!==x&&h[wt-1]<h[wt+1]?tt=h[wt+1]:tt=h[wt-1]+1;for(var qt=tt-Nt;tt<r&&qt<a&&e.charAt(r-tt-1)===n.charAt(a-qt-1);)tt++,qt++;if(h[wt]=tt,tt>r)te+=2;else if(qt>a)G+=2;else if(!w){var _e=c+p-Nt;if(_e>=0&&_e<u&&d[_e]!==-1){var Ae=d[_e],Ve=c+Ae-_e;if(tt=r-tt,Ae>=tt)return this.diff_bisectSplit_(e,n,Ae,Ve,i)}}}}return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,i,r,a){var s=e.substring(0,i),c=n.substring(0,r),u=e.substring(i),d=n.substring(r),h=this.diff_main(s,c,!1,a),g=this.diff_main(u,d,!1,a);return h.concat(g)},t.prototype.diff_linesToCharsMunge_=function(e,n,i,r){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(i.hasOwnProperty?i.hasOwnProperty(d):i[d]!==void 0)?a+=String.fromCharCode(i[d]):(u===r&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),i[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var i=e.length,r=n.length;if(i===0||r===0)return 0;i>r?e=e.substring(i-r):i<r&&(n=n.substring(0,i));var a=Hi.min(i,r);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var i=e.length>n.length?e:n,r=e.length>n.length?n:e;if(i.length<4||r.length*2<i.length)return null;var a=this.diff_halfMatchI_(i,r,Math.ceil(i.length/4)),s=this.diff_halfMatchI_(i,r,Math.ceil(i.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,h,g,p=c[4];return e.length>n.length?(u=c[0],d=c[1],h=c[2],g=c[3]):(h=c[0],g=c[1],u=c[2],d=c[3]),[u,d,h,g,p]},t.prototype.diff_halfMatchI_=function(e,n,i){for(var r=e.substring(i,i+Math.floor(e.length/4)),a="",s,c,u,d,h=n.indexOf(r,0);h!==-1;){var g=this.diff_commonPrefix(e.substring(i),n.substring(h)),p=this.diff_commonSuffix(e.substring(0,i),n.substring(0,h));a.length<p+g&&(a=n.substring(h-p,h)+n.substring(h,h+g),s=e.substring(0,i-p),c=e.substring(i+g),u=n.substring(0,h-p),d=n.substring(h+g)),h=n.indexOf(r,h+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),a=i.match(Zo),s=r.match(Zo),c=a&&i.match(Xo),u=s&&r.match(Xo),d=c&&i.match(es),h=u&&r.match(es),g=d&&e.match(Qs),p=h&&n.match(Zs);return g||p?5:d||h?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,i){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var r=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,i);s!==-1&&(a=Hi.min(this.match_bitapScore_(0,s,n,i),a),s=e.lastIndexOf(n,i+n.length),s!==-1&&(a=Hi.min(this.match_bitapScore_(0,s,n,i),a)));var c=1<<n.length-1;s=-1;for(var u,d,h=n.length+e.length,g,p=0;p<n.length;p++){for(u=0,d=h;u<d;)this.match_bitapScore_(p,i+d,n,i)<=a?u=d:h=d,d=Math.floor((h-u)/2+u);h=d;var w=Hi.max(1,i-d+1),O=Hi.min(i+d,e.length)+n.length,A=Array(O+2);A[O+1]=(1<<p)-1;for(var G=O;G>=w;G--){var te=r[e.charAt(G-1)];if(p===0?A[G]=(A[G+1]<<1|1)&te:A[G]=(A[G+1]<<1|1)&te|((g[G+1]|g[G])<<1|1)|g[G+1],A[G]&c){var x=this.match_bitapScore_(p,G-1,n,i);if(x<=a)if(a=x,s=G-1,s>i)w=Hi.max(1,2*i-s);else break}}if(this.match_bitapScore_(p+1,i,n,i)>a)break;g=A}return s},t.prototype.match_bitapScore_=function(e,n,i,r){var a=e/i.length,s=Math.abs(r-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},i=0;i<e.length;i++)n[e.charAt(i)]=0;for(var i=0;i<e.length;i++)n[e.charAt(i)]|=1<<e.length-i-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),r=0;n.indexOf(i)!==n.lastIndexOf(i)&&i.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)r+=this.patchMargin,i=n.substring(e.start2-r,e.start2+e.length1+r);r+=this.patchMargin;var a=n.substring(e.start2-r,e.start2);a&&e.diffs.unshift([Ze.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+r);s&&e.diffs.push([Ze.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Eo(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let r=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=r[0];for(let h=0;h<c.length;h++){const g=c[h];let p;for(p=u;p<r.length&&!(r[p].buffer2index<g&&(p===r.length-1||r[p+1].buffer2index>g));p++);if(p<r.length){const w={buffer1index:a,buffer2index:g,chain:r[p]};if(u===r.length?r.push(d):r[u]=d,u=p+1,d=w,u===r.length)break}}r[u]=d}return r[r.length-1]}o(Eo,"LCS");function nl(t,e){const n=Eo(t,e);let i=[],r=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),i.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--r>u.buffer1index;)d.buffer1.push(t[r]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),i.push(d)),r>=0&&s.common.push(t[r])}return c(),i.reverse(),i}o(nl,"diffComm");function ts(t,e){const n=Eo(t,e);let i=[],r=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=r-s.buffer1index-1,u=a-s.buffer2index-1;r=s.buffer1index,a=s.buffer2index,(c||u)&&i.push({buffer1:[r+1,c],buffer1Content:t.slice(r+1,r+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return i.reverse(),i}o(ts,"diffIndices");function ql(t,e){const n=Eo(t,e);let i=[],r=t.length,a=e.length;function s(c,u,d){let h=[];for(let g=0;g<d;g++)h.push(c[u+g]);return{offset:u,length:d,chunk:h}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=r-c.buffer1index-1,d=a-c.buffer2index-1;r=c.buffer1index,a=c.buffer2index,(u||d)&&i.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return i.reverse(),i}o(ql,"diffPatch");function il(t,e,n){let i=[];function r(u,d){i.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(r,"addHunk"),ts(e,t).forEach(u=>r(u,"a")),ts(e,n).forEach(u=>r(u,"b")),i.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");i.length;){let u=i.shift(),d=u.oStart,h=u.oStart+u.oLength,g=[u];for(c(d);i.length;){const p=i[0],w=p.oStart;if(w>h)break;h=Math.max(h,w+p.oLength),g.push(i.shift())}if(g.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;g.length;){u=g.shift();const x=u.oStart,ue=x+u.oLength,_e=u.abStart,Ae=_e+u.abLength;let Ve=p[u.ab];Ve[0]=Math.min(_e,Ve[0]),Ve[1]=Math.max(Ae,Ve[1]),Ve[2]=Math.min(x,Ve[2]),Ve[3]=Math.max(ue,Ve[3])}const w=p.a[0]+(d-p.a[2]),O=p.a[1]+(h-p.a[3]),A=p.b[0]+(d-p.b[2]),G=p.b[1]+(h-p.b[3]);let te={stable:!1,aStart:w,aLength:O-w,aContent:t.slice(w,O),oStart:d,oLength:h-d,oContent:e.slice(d,h),bStart:A,bLength:G-A,bContent:n.slice(A,G)};a.push(te)}s=h}return c(e.length),a}o(il,"diff3MergeRegions");function Do(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},i);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(i.stringSeparator)),s&&(e=e.split(i.stringSeparator)),c&&(n=n.split(i.stringSeparator));let u=[];const d=il(t,e,n);let h=[];function g(){h.length&&u.push({ok:h}),h=[]}o(g,"flushOk");function p(w,O){if(w.length!==O.length)return!1;for(let A=0;A<w.length;A++)if(w[A]!==O[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(w=>{w.stable?h.push(...w.bufferContent):i.excludeFalseConflicts&&p(w.aContent,w.bContent)?h.push(...w.aContent):(g(),u.push({conflict:{a:w.aContent,aIndex:w.aStart,o:w.oContent,oIndex:w.oStart,b:w.bContent,bIndex:w.bStart}}))}),g(),u}o(Do,"diff3Merge");function Ql(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},i);const a=Do(t,e,n,i);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${i.label.a?` ${i.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${i.label.o?` ${i.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${i.label.b?` ${i.label.b}`:""}`))}),{conflict:s,result:c}}o(Ql,"mergeDiff3");function rl(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},i);const a=Do(t,e,n,i);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(rl,"node_diff3_merge");function Zl(t,e,n,i){i=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},i);const a=Do(t,e,n,i);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const h=nl(d.conflict.a,d.conflict.b);for(let g=0;g<h.length;g++){let p=h[g];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Zl,"mergeDigIn");function Xl(t,e){let n=[],i=0;function r(a){for(;i<a;)n.push(t[i]),i++}o(r,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];r(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);i+=s.buffer1.length}return r(t.length),n}o(Xl,"patch");function ec(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(ec,"stripPatch");function tc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(tc,"invertPatch");const Ao=new tl;Ao.diffTimeout=0;function ns(t,e,n){return W.get("experimental.useDiffMatchPatch")===!0?Ao.patch_toText(Ao.patch_make(e,n)):Gs(t,e,n)}o(ns,"diffs_createPatch");function is(t,e,n,i){const r=`diff --git a/${t} b/${t}`;switch(i){case"modify":return ns(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,h=[];for(let g=0;g<d;g+=1)(g<c.length-1||g===c.length-1&&c[g]!=="")&&h.push("+"),h.push(c[g]),g<u.length&&h.push(u[g]);return n=h.join(""),`${r}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${r}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(is,"createPatch2");function rs(t,e,n){return Wo(t,e,n)}o(rs,"diffs_applyPatch");function al(t,e){const n=[];for(const i of Ia(t,e))n.push({...i,oldFileName:i.newFileName,oldHeader:i.newHeader,newFileName:i.oldFileName,newHeader:i.oldHeader,hunks:i.hunks.map(r=>({...r,oldLines:r.newLines,oldStart:r.newStart,newLines:r.oldLines,newStart:r.oldStart,lines:r.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(i);return n}o(al,"reversePatch");function as(t,e,n,i){let r=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(h=>h===`\r
`).length;r=d>a.length-d?`\r
`:`
`}const s=rl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${i}`);return{conflicts:u,mergedContent:c.join(r)}}o(as,"diffs_merge");var ol=Object.defineProperty,sl=Object.getOwnPropertyDescriptor,ll=o((t,e,n,i)=>{for(var r=i>1?void 0:i?sl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&ol(e,n,r),r},"changeStore_decorateClass");const cl=l.FileSystemError.FileNotFound().code,os=`===================================================================
`,Er=new TextDecoder,ul=new TextEncoder;function dl(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o(dl,"isOperation");function ro(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(ro,"toEvent");const ka=o(class{constructor(t,e,n,i,r,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=i,this.workspaceId=r,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new Yn,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(i){const r=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${i.toString(!0)}

${this.toStorage(await this.getWorkingOperations(i))}`});return void l.window.showTextDocument(r)}if(o(n,"exportCore"),t===void 0)for(const i of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,i.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new ct("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const i of(t=l.workspace.workspaceFolders)!=null?t:[])i.uri.scheme===z.scheme&&await this.hasChanges(i.uri)&&n.push(i.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(t),async()=>{const r=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!r.some(u=>u.staged));for(const u of r){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===E.Created&&u.fileType===l.FileType.Directory&&(r.some(h=>Me(h.uri,u.uri))||(d={type:E.Deleted,rootUri:t,uri:u.uri})),i.push(d!=null?d:ro(u,t)),u.type===E.Created){let h=u.uri;for(;;){const{parent:g}=this.findParent(h,r,p=>p.type===E.Created);if(g){a.push(g),h=g.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(i.push(ro(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),i.length!==0&&this._onDidChange.fire(i)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>this.discardCore(e,t,i),n),i.length!==0&&this._onDidChange.fire(i)}async discardCore(t,e,n){I.debug(`ChangeStore.discardCore(${e.toString()})`);let i=await this.getWorkingOperations(t);if(i.length===0)return;const r=be(e),a=i.findIndex(u=>be(u.uri)===r);if(a===-1)return;const[s]=i.splice(a,1);let c;switch(s.type){case E.Created:c=E.Deleted;break;case E.Deleted:c=E.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===E.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:h}=this.findNewParentWithOnlyChild(u,i);if(d){i.splice(h,1),n.push({type:E.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===E.Deleted){let u=s.uri;const d=this.findDeletedParents(u,i);let h=[...i];d.forEach(({parent:g,parentIndex:p})=>{h[p]=void 0,n.push({type:E.Created,rootUri:t,uri:g.uri})}),i=h.filter(g=>g!==void 0)}await this.saveWorkingOperations(t,i),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const i=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;I.log(i);const r=[];await this.lock.synchronizeWrite(F(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let h;switch(d.type){case E.Created:h=E.Deleted;break;case E.Deleted:h=E.Created;break;default:h=d.type;break}if(r.push({type:h,rootUri:t,uri:d.uri}),d.type===E.Created){let g=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(g,a);if(p){s.push(p),g=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(r.push({type:E.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},i),r.length!==0&&this._onDidChange.fire(r)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);r!==void 0&&await this.stageCore(e,t,r,i,a)},n),i.length!==0&&this._onDidChange.fire(i)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;I.log(e);const n=[];await this.lock.synchronizeWrite(F(t),async()=>{const i=(await this.getWorkingOperations(t)).filter(r=>!r.staged);if(i.length!==0)for(const r of i){const{index:a}=await this.getWorkingOperation(r.uri,t);if(!await this.stageCore(t,r.uri,r,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,i,r){if(n.conflicts){if(!n.conflicts.status.includes(E.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",he(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case E.Changed:switch(n.type){case E.Created:return!1;case E.Changed:return await this.spliceOperation(e,r,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0;case E.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,he(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,i),!0):u===c?(await this.spliceOperation(e,r,{...n,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0):!1}case E.Created:switch(n.type){case E.Changed:case E.Deleted:return!1;case E.Created:return await this.spliceOperation(e,r,{...n,type:E.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},i),!0}case E.Deleted:switch(n.type){case E.Created:case E.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,he(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,r,{...n,type:E.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0):u===c?(await this.discardCore(t,e,i),!0):!1}case E.Deleted:return await this.discardCore(t,e,i),!0}}}return await this.spliceOperation(e,r,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},i),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);r!==void 0&&await this.spliceOperation(t,a,{...r,staged:!1,timestamp:Date.now()},i)},n),i.length!==0&&this._onDidChange.fire(i)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;I.log(e);const n=[];await this.lock.synchronizeWrite(F(t),async()=>{const i=(await this.getWorkingOperations(t)).map(r=>({...r,staged:!1,timestamp:Date.now()}));i.length!==0&&(await this.saveWorkingOperations(t,i),n.push(...i.map(r=>ro(r,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=F(t),i=this.cache.get(n);return i!==void 0?i.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const i=F(t),r=this.cache.get(i);if(r===void 0)return;if(r.length===0)return!1;if(e===void 0)return!0;const a=be(e);return r.some(s=>be(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(F(n),async()=>{const{operation:i}=await this.getWorkingOperation(t,n);return i},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(F(t),async()=>{let i=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:r,predicate:a}=e;i=i.filter(s=>{var c;return(!r||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return i},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(F(t),async()=>{var i,r;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((r=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,c))!=null?r:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=F(e),i=this.cache.get(n);if((i==null?void 0:i.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const r=Er.decode(await this.getWorkingContent(e,t));if(r!==void 0)return r;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return i.conflicts!==void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return i.staged&&i.conflicts===void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return!i.staged&&i.conflicts===void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,i){var r;let a;dl(n)?a=n:i=i!=null?i:n,I.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,i==null?void 0:i.save);const s=this.getScopedChangeStore(e.workspaceId),c=(r=e.patch)!=null?r:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...i,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Er.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,h)=>{try{const g=z.getProviderUri(u),p=Er.decode(await l.workspace.fs.readFile(g)),w=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),O=Er.decode(await l.workspace.fs.readFile(w)),A=await this.providerService.getMetadata(w);return{...as(h,p,O,A.HEAD.sha),baseUri:g,incomingUri:w}}catch(g){throw new Error(`Unable to apply patch to ${d}: ${String(g)}`)}}})}async applyPatch(t,e,n){if(I.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const i=`ChangeStore.applyPatchCore(${t.toString()})`;I.debug(i,n==null?void 0:n.save);const r=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var w;const O=F(p),A=l.workspace.textDocuments.find(G=>F(G.uri)===O);return(w=A==null?void 0:A.getText())!=null?w:Er.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const w=await l.workspace.fs.stat(p);return Boolean(w)}catch{return!1}}o(u,"exists");async function d(p,w,O){let A=rs("",O,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${w}`);A=await n.getIncomingContent(w)}r.createFile(p,{overwrite:!0}),r.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function h(p,w,O,A){const G=await c(p);let te=rs(G,O,{fuzzFactor:1});if(te===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${w}; Resulted in conflicts`);const x={title:l.l10n.t("Merge")},ue={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,w),{modal:!0},x,ue)!==x)return;const Ae=await n.merge(p,w,G);te=Ae.mergedContent,Ae.conflicts&&s.set(F(p),{type:A,baseUri:Ae.baseUri,incomingUri:Ae.incomingUri})}r.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),te)}o(h,"applyModification");const g=(n==null?void 0:n.reverse)?al(e,{}):Ia(e,{});for(const p of g)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const w=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,O=this.providerService.createRelativeVirtualUri(t,w);a.push(F(O)),!await u(O)?await d(O,w,p):await h(O,w,p,E.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const w=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,O=this.providerService.createRelativeVirtualUri(t,w);await u(O)&&r.deleteFile(O)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const w=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(F(w)),!await u(w)?await d(w,p.newFileName,p):await h(w,p.newFileName,p,E.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(r),n.save&&a.length)for(const p of a){const w=l.workspace.textDocuments.find(O=>F(O.uri)===p);await(w==null?void 0:w.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(F(t),async()=>{const w=await this.getWorkingOperations(t);if(w.length===0)return;let O=-1;for(const A of w){O++;const G=s.get(F(A.uri));G!==void 0&&await this.spliceOperation(A.uri,O,{...A,conflicts:{baseUri:G.baseUri,incomingUri:G.incomingUri,status:[A.type,G.type]},timestamp:Date.now()},p)}},i),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){I.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(I.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:i}=await this.getWorkingOperation(e,t);if(i===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&i.staged?"":await this.createPatchCore(t,i)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),i=`diff --git a/${n} b/${n}`;if(e.type===E.Created){let u=await this.getContent(e.uri);return is(n,"",u,"add")}if(e.type===E.Deleted){let u=Er.decode(await l.workspace.fs.readFile(z.getProviderUri(e.uri)));return is(n,u,"","delete")}const r=await this.getContent(e.uri),a=Er.decode(await l.workspace.fs.readFile(z.getProviderUri(e.uri))),s=ns(n,a,r),c=s.indexOf(os);return`${i}
${s.substr(c+os.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const i=`ChangeStore.keep(${t.toString()})`;I.log(i,e);const r=[];await this.lock.synchronizeWrite(F(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case E.Changed:switch(a.type){case E.Changed:case E.Created:case E.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break}break;case E.Created:switch(a.type){case E.Changed:case E.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break;case E.Created:await this.spliceOperation(t,s,{...a,type:E.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},r);break}break;case E.Deleted:switch(a.type){case E.Deleted:await this.discardCore(n,t,r);break;case E.Changed:await this.spliceOperation(t,s,{...a,type:E.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);break;case E.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break}break}return}if(e===void 0)return;switch(e.type){case E.Changed:switch(a.type){case E.Deleted:await this.spliceOperation(t,s,{...a,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);return;case E.Created:break;case E.Changed:break}break;case E.Created:switch(a.type){case E.Changed:case E.Deleted:return;case E.Created:break}break;case E.Deleted:switch(a.type){case E.Deleted:return this.discardCore(n,t,r);case E.Changed:await this.spliceOperation(t,s,{...a,type:E.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);return;case E.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:E.Changed,originalHash:c!==void 0?await ht(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},r)},i),r.length!==0&&this._onDidChange.fire(r)}async merge(t,e,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const r=`ChangeStore.merge(${t.toString()})`;I.log(r,e,n);const a=[];await this.lock.synchronizeWrite(F(i),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,i);if(s===void 0)return;switch(e.type){case E.Changed:switch(s.type){case E.Deleted:await this.spliceOperation(t,c,{...s,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case E.Created:break;case E.Changed:break}break;case E.Created:switch(s.type){case E.Deleted:case E.Changed:return;case E.Created:const w=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:w!==void 0?await ht(w):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:E.Changed,timestamp:Date.now()},a);break}break;case E.Deleted:switch(s.type){case E.Deleted:return this.discardCore(i,t,a);case E.Changed:await this.spliceOperation(t,c,{...s,type:E.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case E.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(i,t),h=s.type===E.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),g=await l.workspace.fs.readFile(e.providerUri),p=as(Er.decode(d),Er.decode(h),Er.decode(g),u.HEAD.sha);await this.writeFileCore(i,t,a,ul.encode(p.mergedContent),g!=null?g:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},r),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,i){let r;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:r}=await this.getWorkingOperation(t,a)),(r==null?void 0:r.type)===E.Deleted?this.resolveOpenCommand(e):((r==null?void 0:r.type)===E.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,i]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;I.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new ka.ScopedChangeStore(this,e,this.workspaceId):new ka.ScopedChangeStore(new ka(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const i=F(n),r=this.cache.get(i);if((r==null?void 0:r.length)!==0)return this.lock.synchronizeRead(i,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===E.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new ct(`ChangeStore.readFile(${t.toString()})`);try{const i=this.providerService.getVirtualRootUri(t);if(i===void 0)return;const r=F(i),a=this.cache.get(r);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(r,()=>{const s=this.cache.get(r);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(i,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.createDirectory(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,r===void 0?{type:E.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...r,timestamp:Date.now()},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.deleteDirectory(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);if((r==null?void 0:r.type)===E.Created)return this.discardCore(e,t,i);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:E.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const i=new ct(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const r=F(n),a=this.cache.get(r);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(r,async()=>{const{path:s}=X(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case E.Changed:break;case E.Created:{if(Me(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case E.Deleted:{if(Me(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),h=e.findIndex(([g])=>g===d);h!==-1&&e.splice(h,1)}break}}return e},i.context)}finally{i.stop()}}async writeFile(t,e,n,i){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const a=new ct(`ChangeStore.writeFile(${t.toString()})`,{},e.length,i);try{const s=[];if(await this.lock.synchronizeWrite(F(r),async()=>this.writeFileCore(r,t,s,e,n,i),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,i,r,a){const s=new ct(`ChangeStore.writeFileCore(${e.toString()})`,{},i.length,a);try{const[{operation:c,index:u},d,h]=await Promise.all([this.getWorkingOperation(e,t),ht(i),ht(r)]);if(d===h&&(!c||(c==null?void 0:c.type)===E.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&h===(c==null?void 0:c.originalHash))return;const[{HEAD:g}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,i)]);await this.spliceOperation(e,u,c===void 0?{type:E.Changed,uri:e,fileType:l.FileType.File,revision:g.sha,timestamp:Date.now(),size:i.byteLength,hash:d,originalHash:h,conflicts:a,staged:!1}:{...c,revision:g.sha,timestamp:Date.now(),size:i.byteLength,hash:d,originalHash:h,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const i=new ct(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const r=[];if(await this.lock.synchronizeWrite(F(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),ht(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:E.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:{...a,type:E.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},r)},i.context),r.length===0)return;this._onDidChange.fire(r)}finally{i.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new ct(`ChangeStore.deleteFile(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);if((r==null?void 0:r.type)===E.Created)return this.discardCore(e,t,i);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:E.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}findParent(t,e,n){const i=ze(t),{operation:r,index:a}=this.findWorkingOperation(i,e);return r!==void 0&&n(r,e)?{parent:r,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=be(t);return this.findParent(t,e,(i,r)=>i.type===E.Created&&!r.some(a=>Me(a.uri,i.uri)&&be(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let i=0;i<e.length;i+=1){const r=e[i];r.type===E.Deleted&&se(t,r.uri)&&n.push({parent:r,parentIndex:i})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=be(t);let i=-1;const r=e.find((a,s)=>be(a.uri)!==n?!1:(i=s,!0));return r===void 0?{operation:void 0,index:-1}:{operation:r,index:i}}async getWorkingOperations(t){const e=F(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){I.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=F(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(i){throw this.cache.delete(n),I.error(i,`Failed to save repository changes for ${n}`),i}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw I.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){I.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===cl)return;throw I.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){I.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(i){throw I.error(i),this.telemetryService.sendException(i),i}}getFileStorageKey(t,e){return`changestore/${Ie(e)}`}async spliceOperation(t,e,n,i){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const a=await this.getWorkingOperations(r);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(r,a),i.push(ro(n,r,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?typeof i=="string"?l.Uri.parse(i):l.Uri.from(i):i);return Array.isArray(e)?e:e.operations}catch(e){throw I.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:ka.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Ro=ka;Ro.operationsStorageSchemaVersion=1,Ro.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,i=await this.changeStore.stat(this.stripUriScope(t));return i!==void 0&&n&&(i.permissions=l.FilePermission.Readonly),i}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,i){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,i)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},ll([Mn()],Ro.prototype,"getWorkingOperations",1);function hl(t){switch(t){case E.Changed:return l.l10n.t("Modified");case E.Created:return l.l10n.t("Added");case E.Deleted:return l.l10n.t("Deleted")}}o(hl,"getStatusText");function fl(t){const[e,n]=t;switch(e){case E.Changed:switch(n){case E.Changed:case E.Created:return l.l10n.t("Modified by Both");case E.Deleted:return l.l10n.t("Deleted by Incoming")}case E.Created:switch(n){case E.Changed:case E.Created:return l.l10n.t("Added by Both");case E.Deleted:return l.l10n.t("Deleted by Incoming")}case E.Deleted:switch(n){case E.Changed:case E.Created:return l.l10n.t("Deleted by Current");case E.Deleted:return l.l10n.t("Deleted by Both")}}}o(fl,"getConflictStatusText");class ss{constructor(e){this.providerService=e,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){const n=e.map(({uri:i})=>(this._decorations.delete(F(i)),i));setTimeout(()=>this._onDidChangeFileDecorations.fire(n),0)}async provideFileDecoration(e,n){if(e.scheme!==Qe.scheme)return;await wi(this.providerService,e);const i=F(e);let r=this._decorations.get(i);if(r!==void 0)return r!=null?r:void 0;const a=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let s;a.length>0&&(s=a.find(u=>F(u.uri)===i));const c=await this.providerService.changeStoreGetChange(e);if(c===void 0){if(s!==void 0)switch(s.type){case E.Created:r={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case E.Deleted:r={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case E.Changed:r={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:r={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}return this._decorations.set(i,r!=null?r:null),r}if(c.conflicts)r={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",fl(c.conflicts.status))};else if(s!==void 0)switch(s.type){case E.Created:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case E.Deleted:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case E.Changed:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(c.type){case E.Created:r={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case E.Changed:r={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case E.Deleted:r={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(i,r!=null?r:null),r}}o(ss,"ScmDecorationProvider");const ls=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class cs{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:i,dictionaries:r,style:a,seed:s}=e;this.dictionaries=r,this.separator=i,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,i)=>{let r;e?(r=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,h)=>d+h,1),u=Math.floor(Number(c));return ls(u)}return ls(s)})(e),e=4294967296*r):r=Math.random();let a=i[Math.floor(r*i.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(cs,"a");const us={separator:"_",dictionaries:[]},gl=o(t=>{const e=[...t&&t.dictionaries||us.dictionaries],n={...us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new cs(n).generate()},"n");var vl=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],pl=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],ml=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],nc=null,ic=null,rc=null;class ds{static generate(e={}){let n=e.min||1,i=e.max||999;if(e.length){const r=Math.pow(10,e.length);return n=r/10,i=r-1,[`${Math.floor(Math.random()*(i-n))+n}`]}return[`${Math.floor(Math.random()*(i-n))+n}`]}}o(ds,"y");class To{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,r)=>{this.resolver=i,this.rejecter=r}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const i=this.task;return this.task=void 0,i()}})),this.timeout=setTimeout(()=>{var i;this.timeout=void 0,(i=this.resolver)==null||i.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(To,"TaskDebouncer");class xr{constructor(e){this.command=e}get label(){return this.command.title}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}}o(xr,"CommandQuickPickItem");var ao;(function(t){async function e(n,i,r,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),h=new To(500),g=[h],{defaultBranch:p,HEAD:w}=await n.getMetadata(i);async function O(ue){const[_e,Ae,Ve,wt]=await Promise.all([n.getBranch(i,p.name),n.getBranches(i,{query:ue,limit:100}),n.getTags(i,{query:ue,limit:100}),n.getSnapshots(i)]),tt=new Set,Nt=new Set;for(const vn of wt)tt.add(vn.hash),Nt.add(vn.branch.name);const qt=((c==null?void 0:c.filterBranches)?Ae.branches.filter(c==null?void 0:c.filterBranches):Ae.branches).filter(vn=>vn.name!==p.name),Ht=l.l10n.t("Open indexed commit"),It=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:Ht}];return[...u,...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${ke(w.sha)}${tt.has(w.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:He.Commit,name:void 0,sha:w.sha,buttons:tt.has(w.sha)?It:void 0}]:[],{label:`$(${(_e==null?void 0:_e.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${ke(p.sha)}${Nt.has(p.name)||tt.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:He.Branch,name:void 0,sha:p.sha,buttons:Nt.has(p.name)||tt.has(p.sha)?It:void 0},...qt.map(vn=>({label:`$(${vn.locked?"lock":"git-branch"}) ${vn.name}`,description:`\u2022$(git-commit) ${ke(vn.commit)}${Nt.has(vn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:He.Branch,name:vn.name,sha:vn.commit,buttons:Nt.has(vn.name)?It:void 0})),...Ve.tags.map(vn=>({label:`$(tag) ${vn.name}`,description:`\u2022$(git-commit) ${ke(vn.commit)}${tt.has(vn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:He.Tag,name:vn.name,sha:vn.commit,buttons:tt.has(vn.commit)?It:void 0}))]}o(O,"getItems");const A=O(void 0);let G,te=!1;async function x(ue){G=void 0;const _e=d.activeItems;d.items=ue!=null?ue:await A,te&&_e.length!==0&&(d.activeItems=d.items.filter(Ae=>_e.some(Ve=>Ve.label===Ae.label))),d.busy=!1}o(x,"setItems");try{return await new Promise(_e=>{var Ae;g.push(d.onDidHide(()=>_e(void 0)),d.onDidChangeValue(Ve=>{if(te=!1,Ve=Ve.trim(),(c==null?void 0:c.allowResetToSha)&&w.branch&&U(Ve)){x([{label:`Reset $(git-branch) ${w.branch.name} to $(git-commit) ${Ve}`,name:w.branch.name,sha:Ve,type:He.Branch}]);return}d.busy=!0;const wt=h.debounce(Ve?()=>O(Ve):()=>A);G===void 0&&(G=wt.then(async tt=>x(tt)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[Ve]=d.activeItems;_e(Ve)}}),d.onDidTriggerItemButton(Ve=>{const wt=Ve.item;wt instanceof xr||(wt.useIndex=!0),_e(wt)})),d.title=a,d.placeholder=r,d.matchOnDescription=!0,d.ignoreFocusOut=(Ae=c==null?void 0:c.ignoreFocusOut)!=null?Ae:!0,d.busy=!0,d.show(),G=h.debounce(async()=>A,0).then(Ve=>x(Ve))})}finally{d.dispose(),g.forEach(ue=>void ue.dispose())}}o(e,"show"),t.show=e})(ao||(ao={}));const yl=new TextDecoder;class hs{constructor(e,n,i){this.providerService=e,this.openActionsService=n,this.telemetryService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(W.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:a})=>{const s=this.getScmProvider(z.getVirtualUri(a.uri));s!==void 0&&await this.updateStatusBarCommands(s,void 0)}),this.providerService.onDidSyncRepository(async({repository:a,syncing:s})=>{const c=this.getScmProvider(z.getVirtualUri(a.uri));c!==void 0&&await this.updateStatusBarCommands(c,{syncing:s})}),this.providerService.onDidRefresh(a=>{for(const s of a)this.update(s)}),this.providerService.onDidChangeChangeStore(a=>this.update(a[0].rootUri)),...this.registerCommands());const r=this.providerService.repositories;this.onRepositoriesChanged({added:r,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=W.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){W.changed(e,"staging")&&(this._staging=void 0,W.changed(e,"staging.enabled")&&this.refresh()),W.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const i=await this.update(n.uri);(i==null?void 0:i.repository)&&this._onDidOpenRepository.fire(i.repository)}if(e.removed.length)for(const n of e.removed){const i=this._scmProviders.findIndex(r=>F(r.sourceControl.rootUri)===F(n.uri));if(i!==-1){const r=this._scmProviders[i];r.repository&&this._onDidCloseRepository.fire(r.repository),r.sourceControl.dispose(),this._scmProviders.splice(i,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(fs(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(Fa);if(c.length!==0){if(await Po(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const i=this.getSourceControlFrom(e);if((i==null?void 0:i.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const r=await this.providerService.getChangeStore(i.rootUri).getChanges(i.rootUri);n||await Po(r)?await this.providerService.getChangeStore(i.rootUri).discardAll(i.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const i of e)!Fa(i)||(this.telemetryService.publicLog2("command.discardChanges"),await Po([i])?(await this.providerService.getChangeStore(i.resourceUri).discard(i.resourceUri),await this.closeDiffEditors(n.rootUri,[i.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const i=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!i)for(const r of e)!Fa(r)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(r.resourceUri).stage(r.resourceUri),await this.closeDiffEditors(i,[r.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const i=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!i)for(const r of e)!Fa(r)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(r.resourceUri).unstage(r.resourceUri),await this.closeDiffEditors(i,[r.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!Fa(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:i}=e;if(!!i)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(i.command,...(n=i.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const i of e)if(Mo(i)){const r=i,a=this.providerService.getChangeStore(r.resourceUri).resolveOpenCommand(r.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(i instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const r=i;await l.window.showTextDocument(r)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await Vt("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await xa(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"),l.l10n.t("Create Branch"));if(i===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const r=await this.providerService.getMetadata(i);if(r.accessLevel<Z.Write){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions"}),l.window.showErrorMessage(l.l10n.t("You don't have access to create branches on this repository."));return}let a,s=!1;if(e==null?void 0:e.fromSha)a=e.fromSha,a==="HEAD"&&(a=r.HEAD.sha);else{const O=await ao.show(this.providerService,i,l.l10n.t("Select a ref to create the new branch from"),l.l10n.t("Create Branch \u2022 {0}",r.name),{showHead:!0});if(!O){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}a=O.sha,s=Boolean(O.useIndex)}let c;try{c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Na(this.providerService,i,a,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Create Branch \u2022 {0}",r.name)))}catch(O){I.error(O),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!c){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const u=await this.providerService.switchTo(i,{type:He.Branch,id:c});if(!u)return;const d=await this.providerService.getChangeStore(i).createChangeset(i);d&&await this.openActionsService.setChangesetToApply(u.uri,d);const h=l.l10n.t("Switch to Branch"),g=l.l10n.t("Open in New Window"),w=W.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,c),{modal:!0},h,g);!w||(u.location=w===g?xe.NewWindow:xe.CurrentWindow,s&&await W.setMode(u.uri,Y.getIndexDefault(L.Branch)),await ut(this.providerService,u,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const i=l.window.activeTextEditor;if((i==null?void 0:i.document.languageId)!=="diff"){const r=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(r===void 0||r.length===0)return;n=yl.decode(await l.workspace.fs.readFile(r[0]))}else n=i.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const i of n){const r=this.getSourceControlFrom(i);if((r==null?void 0:r.rootUri)===void 0)return;let a;Mo(i)&&(a=i.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(r.rootUri).createPatch(r.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,i;const r=(n=e==null?void 0:e.uri)!=null?n:await xa(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"),l.l10n.t("Switch to Branch or Tag"));if(r===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(r);if(e==null?void 0:e.commands)switch(s.accessLevel>=Z.Write&&a.push(new xr(Dt({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:r}]})),new xr(Dt({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:r}]}))),s.HEAD.type){case ae.Branch:a.push(new xr(Dt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case ae.RemoteBranch:a.push(new xr(Dt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case ae.Tag:a.push(new xr(Dt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case ae.Commit:a.push(new xr(Dt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(i=s.HEAD.branch)==null?void 0:i.name,u=Boolean(c&&!await this.providerService.getChangeStore(r).hasChanges(r)),d=await ao.show(this.providerService,r,l.l10n.t("Choose which branch to switch to"),l.l10n.t("Switch to Branch or Tag \u2022 {0}",s.name),a,{allowResetToSha:u,filterBranches:c?h=>h.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof xr?void d.execute():u&&d.type===He.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(r,{to:d.sha})}catch(h){I.error(h),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",ke(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const h=await this.providerService.switchTo(r,d.name?{type:d.type,id:d.name}:void 0);if(h!==void 0){if(d.useIndex){const g=await this.providerService.getModeRefType(h.uri);await W.setMode(h.uri,Y.getIndexDefault(g))}return ut(this.providerService,h)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await xa(this._scmProviders,l.l10n.t("Choose which repository to fetch"),l.l10n.t("Fetch Repository"));if(i!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(i,{force:!0}))}catch(r){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const r=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){r.push(s)}return r})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await xa(this._scmProviders,l.l10n.t("Choose which repository to pull"),l.l10n.t("Pull Repository"));if(i!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(i,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await xa(this._scmProviders,l.l10n.t("Choose which repository to sync"),l.l10n.t("Synchronize Repository"));if(i!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(i)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),W.updateEffective("commitDirectlyWarning",it.Off)})]}async sync(e,{pull:n,...i}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,i))}catch(r){if(qe.asVirtualProviderErrorCode(r)===Ee.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:Oe.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(qe.asVirtualProviderErrorCode(r)===Ee.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw I.error(r),this.telemetryService.sendException(r),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),r}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(i){if(qe.asVirtualProviderErrorCode(i)===Ee.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}I.error(i),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(i)}}async commitChangesCore(e,n){const i=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const r=new ct(`VirtualSourceControl.commitChanges(${i.toString()})`);let a;try{const s=await this.providerService.getMetadata(i);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const g=e.inputBox.value;if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(i,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!g){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let w,O;if(s.HEAD.type===ae.RemoteBranch?(O=s.HEAD.branch.remote.accessLevel<Z.Write,w=O&&s.accessLevel<Z.Write):(w=s.accessLevel<Z.Write,O=w),u===void 0&&w&&(u=await this.providerService.getFork(i),u===void 0)){const A={title:l.l10n.t("Fork Repository")},G={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,G)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(i)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||O){if(u===void 0){const G={title:l.l10n.t("Commit to a New Branch")},te={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},G,te)!==G){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const G=await this.providerService.getBranches(u?this.providerService.createVirtualUri(i,u):i,{query:"patch-"});for(const te of G.branches){const x=/^patch-(?<num>\d+)$/.exec(te.name);if(x==null?void 0:x.groups){const ue=Number(x.groups.num);ue>A&&(A=ue)}}}catch{}if(c=await Na(this.providerService,i,s.HEAD.sha,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),u,`patch-${A+1}`),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(i,g,p,c,n,u),await this.closeDiffEditors(i,void 0)}catch(A){const G=qe.asVirtualProviderErrorCode(A);if(G===Ee.DetachedHEADError){const te={title:l.l10n.t("Commit to a New Branch")},x={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},te,x)!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}if(c=await Na(this.providerService,i,s.HEAD.sha,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),u),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(G===Ee.MergeConflictError){const te={title:l.l10n.t("Pull")},x={title:l.l10n.t("Sync (Pull & Push)")},ue={title:l.l10n.t("Cancel"),isCloseAffordance:!0},_e=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},te,x,ue);if(_e!==te&&_e!==x){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(i,{pull:_e===te,conflictResolution:Oe.Merge}),_e===te){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(G===Ee.CommitToProtectedBranchError){const te={title:l.l10n.t("Commit to a New Branch")},x={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?te:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},te,x))!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}if(c=await Na(this.providerService,i,s.HEAD.sha,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),u),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else throw I.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(i).discardAll(i,{staged:d}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:d}),ko(na.HasCommitted,!0),!u&&!c)return;async function h(){if(u){const A={title:l.l10n.t("Switch to Fork")},G={title:l.l10n.t("Cancel"),isCloseAffordance:!0},te=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,G);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(te===A)}),te===A){let x;c!==void 0?x={type:He.Branch,id:c}:s.HEAD.branch!==void 0&&(x={type:He.Branch,id:s.HEAD.branch.name}),ut(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(i,{repo:u.repo,ref:x}),location:xe.CurrentWindow})}return}const g={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},w=W.get("switchToCreatedBranch")==="always",O=w?g:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},g,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(O===g),autoConfirm:String(w)}),O===g&&ut(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(i,{repo:s.repo,ref:c?{type:He.Branch,id:c}:void 0}),location:xe.CurrentWindow})}o(h,"showSwitchToPrompt"),h.call(this)}finally{r.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(i){const r=qe.asVirtualProviderErrorCode(i);if(r===Ee.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(r===Ee.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}I.error(i),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(i)}}async createPullRequestCore(e,n){var i;const r=e.rootUri,a=(i=n==null?void 0:n.draft)!=null?i:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new ct(`VirtualSourceControl.createPullRequest(${r.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const h=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(r,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const g=e.inputBox.value;if(!g){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(r);let w,O;p.HEAD.type===ae.RemoteBranch?(O=p.HEAD.branch.remote.accessLevel<Z.Write,w=O&&p.accessLevel<Z.Write):(w=p.accessLevel<Z.Write,O=w);let A=n==null?void 0:n.fork;if(A===void 0&&w&&(A=await this.providerService.getFork(r),A===void 0)){const Ve={title:l.l10n.t("Fork Repository")},wt={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Ve,wt)!==Ve){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(r)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const G=g.trimStart().split(`
`),te=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("Pull request title"),prompt:l.l10n.t("Enter a title for the new pull request"),title:l.l10n.t("New Pull Request"),value:G[0]});if(!te){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function x(Ve){let wt=0;try{const tt=await this.providerService.getBranches(A?this.providerService.createVirtualUri(r,A):r,{query:"patch-"});for(const Nt of tt.branches){const qt=/^patch-(?<num>\d+)$/.exec(Nt.name);if(qt==null?void 0:qt.groups){const Ht=Number(qt.groups.num);Ht>wt&&(wt=Ht)}}}catch{}return Na(this.providerService,r,Ve,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),A,`patch-${wt+1}`)}o(x,"createBranch");const ue=await x.call(this,p.HEAD.sha);if(!ue){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(r,g,d,ue,void 0,A);const _e=await this.providerService.createPullRequest(r,ue,te,G.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(r).discardAll(r,{staged:h}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:h}));async function Ae(){const Ve={title:l.l10n.t("Switch to Pull Request")},wt={title:l.l10n.t("Cancel"),isCloseAffordance:!0},tt=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",_e.id,p.name),{modal:!0},Ve,wt);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(tt===Ve)}),tt===Ve&&ut(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(r,{repo:p.repo,ref:{type:He.PullRequest,id:_e.id}}),location:xe.CurrentWindow})}o(Ae,"showSwitchToPrompt"),Ae.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const i=await this.providerService.getMetadata(e),r=await this.createOrUpdateScmProvider(e,n.name),a=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:h=>h.fileType===l.FileType.File}),s=await Promise.all(a.conflicts.map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,h.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",he(h.uri)))}))),c=o(h=>this.providerService.createVirtualUri(z.getProviderId(h),{repo:i.repo,ref:{type:He.Commit,id:i.HEAD.sha}},this.providerService.getRelativeFilePath(h)),"getOriginalVirtualUri"),u=await Promise.all(a.staged.map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,c(h.uri),l.l10n.t("{0} (Index)",he(h.uri)))}))),d=await Promise.all(a.working.map(async h=>({type:h.type,resourceUri:h.uri,decorations:{strikeThrough:h.type===E.Deleted},command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,c(h.uri),l.l10n.t("{0} (Working Tree)",he(h.uri)))})));return r.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(r).resourceStates=s,this.ensureStagedChangesGroup(r).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(r).resourceStates=this.staging.enabled?d:[...u,...d],r}ensureActionButton(e){var n,i;const r=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:r!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",r):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(i=this.providerService.changeStoreMaybeHasChanges(e))!=null?i:!0}}async createOrUpdateScmProvider(e,n){var i,r;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:h=>z.getProviderUri(h)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=Z.Write||((r=(i=a.HEAD.branch)==null?void 0:i.remote)==null?void 0:r.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=Z.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),W.get("commitDirectlyWarning")===it.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(W.get("commitDirectlyWarning")===it.Auto&&Ds(na.HasCommitted))return;const h=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name));return h.isTrusted=!0,h.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${l.l10n.t("Hide")}')`),{message:h,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,i){var r,a,s,c,u;const d=e.sourceControl.rootUri;i=i!=null?i:await this.providerService.getMetadata(d);const{HEAD:h}=i,g=await this.providerService.getIndexMetadata(d),p=(g==null?void 0:g.type)===un.Active,w=(g==null?void 0:g.type)===un.Active,O=un.hasIndex(g==null?void 0:g.type),A=await this.providerService.getChangeStore(d).hasChanges(d),G=(a=h.type===ae.Branch&&((r=await this.providerService.getBranch(d,h.branch.name))==null?void 0:r.locked)?"$(lock)":void 0)!=null?a:on(h.type),te=[];if(te.push(Dt({command:"remoteHub.switchToBranch",title:`${G} ${h.name}${A?"*":""}`,tooltip:`${ke(h.sha)}`,arguments:[{uri:d,commands:!0}]})),h.detached||((n==null?void 0:n.syncing)?te.push(Dt({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):te.push(Dt({command:"remoteHub.sync",title:`$(sync)${((c=(s=i.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=i.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||w?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),i.pullRequest&&te.push(Dt({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${i.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,i.pullRequest.id,i.provider.name,i.pullRequest.title),arguments:[{provider:i.provider,repo:i.repo,pullRequest:{id:i.pullRequest.id}}]})),O){const x=this.providerService.getIndexProvider(d);x&&te.push(...await x.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=te}ensureMergeConflictsGroup(e){const n="conflicts";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),i.hideWhenEmpty=!0,e.groups.push(i)),i}ensureStagedChangesGroup(e){const n="staged";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),i.hideWhenEmpty=!0,e.groups.push(i)),i}ensureWorkingChangesGroup(e){const n="changes";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(i)),i}getScmProvider(e){const n=F(e);return this._scmProviders.find(i=>F(i.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(wl(e))n=e;else if(fs(e)){const i=e,r=this._scmProviders.find(a=>a.groups.includes(i));n=r==null?void 0:r.sourceControl}else if(Mo(e)){const i=e,r=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.includes(i)));n=r==null?void 0:r.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const r=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===z.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&r.push(a)}await l.window.tabGroups.close(r,!0)}}o(hs,"VirtualSourceControl");function wl(t){return"rootUri"in t&&"inputBox"in t}o(wl,"isSourceControl");function fs(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(fs,"isSourceControlResourceGroup");function Mo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(Mo,"isSourceControlResourceState");function Fa(t){return"type"in t}o(Fa,"isTrackedChange");async function Po(t){var e,n,i;if(t.length===0)return!0;let r,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===E.Created?(r=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,he((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===E.Deleted?(a=l.l10n.t("Restore file"),r=l.l10n.t("Are you sure you want to restore {0}?",he((n=c.resourceUri)!=null?n:c.uri))):r=l.l10n.t("Are you sure you want to discard changes in {0}?",he((i=c.resourceUri)!=null?i:c.uri))}else t.every(c=>c.type===E.Created)?r=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===E.Deleted)?(a=l.l10n.t("Restore files"),r=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):r=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(r,{modal:!0},a)===a}o(Po,"confirmDiscard");async function xa(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const i=await l.window.showQuickPick(t.map(({sourceControl:r})=>({label:r.label,uri:r.rootUri})),{placeHolder:e,title:n});if(!!i)return i.uri}o(xa,"getOrPickRootUri");async function Na(t,e,n,i,r,a,s,c){const u=new Set;let d;const h=l.window.createInputBox();h.ignoreFocusOut=!0;try{return await new Promise((g,p)=>{d=l.Disposable.from(h.onDidHide(()=>g(void 0)),h.onDidChangeValue(w=>{if(w=w.trim(),!w){h.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(u.has(w)){h.validationMessage=l.l10n.t("Branch '{0}' already exists",w);return}if(!Le(w)){h.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",w);return}h.validationMessage=void 0}),h.onDidAccept(async()=>{const w=h.value;try{h.enabled=!1,h.busy=!0;const O=await t.createBranch(e,w,n,s);g(O)}catch(O){if(qe.asVirtualProviderErrorCode(O)===Ee.InvalidBranchNameError){h.enabled=!0,h.busy=!1,h.validationMessage=O.message,u.add(w);return}p(O)}})),h.prompt=i,h.placeholder=r,h.title=a,h.value=Sl(c),h.show()})}finally{h.dispose(),d==null||d.dispose()}}o(Na,"createBranchWithPrompt");function Sl(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const i=Cl();return`${n}${i}`}return`${n}${t!=null?t:""}`}o(Sl,"generateBranchName");function Cl(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const i of e)i.toLowerCase()==="adjectives"&&n.push(vl),i.toLowerCase()==="animals"&&n.push(pl),i.toLowerCase()==="colors"&&n.push(ml),i.toLowerCase()==="numbers"&&n.push(ds.generate({length:3}));return n.length===0?"":gl({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(Cl,"generateRandomBranchName");class Dr extends l.TimelineItem{static is(e){return e instanceof Dr}constructor(e,n,i,r,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=i.message.indexOf(`
`),h=d!==-1?`${i.message.substring(0,d)} \u2026`:i.message,g=a==="authored"?i.authorDate:i.commitDate;super(h,(u=g==null?void 0:g.getTime())!=null?u:0);this.id=i.hash,this.contextValue=`${z.scheme}:${n}:file:commit`,this.command=r,s&&(this.description=i.authorName),this.tooltip=bl(i,c,g),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=i.hash,this.parents=i.parents,this.message=i.message}}o(Dr,"CommitTimelineItem");function bl(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,ke(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,ke(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,ke(t.hash),e.format(n),t.message)}o(bl,"getCommitTooltip");class ta extends l.TimelineItem{static is(e){return e instanceof ta}constructor(e,n,i,r,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,i.timestamp);this.id="index",this.contextValue=`${z.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(i.timestamp)),hl(i.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=r,this.message=c}}o(ta,"ChangeOperationTimelineItem");class gs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new To(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),W.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);!e.some(i=>F(i)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);(e.added.some(i=>F(i.uri)===n)||e.removed.some(i=>F(i.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||F(this.rootUri)!==F(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);e.some(i=>F(i.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,i){var r;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const O of this.providerService.repositories)if(O.uri.path===this.rootUri.path){this.rootUri=O.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||i.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||i.isCancellationRequested)return{items:[]};const u=((r=c.paging)==null?void 0:r.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=W.getAny("git.timeline.date",void 0,"committed"),g=W.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async O=>new Dr(this.rootUri,s.provider.id,O,await this.resolveDiffCommand(O,s,e,a),{dateType:h,showAuthor:g,dateFormatter:d}))),w=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(w&&Boolean(w.staged&&W.get("staging.enabled"))){const A=new ta(this.rootUri,s.provider.id,w,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(w.uri,z.getProviderUri(w.uri),l.l10n.t("{0} (Index)",he(w.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return I.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Qe.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,i,r)=>{!Dr.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,i,r)=>{!Dr.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,i,r)=>{var a;!Dr.is(n)&&!ta.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,i,r)=>{!i||!Dr.is(n)&&!ta.is(n)||(e={uri:i,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,i,r)=>{if(!i||!e||!Dr.is(n)&&!ta.is(n)||F(i)!==F(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,i),c=await this.providerService.getMetadata(n.rootUri),u=he(i),d=a.parents[0];let h;d===void 0?h=l.l10n.t("{0} ({1})",u,ke(n.hash)):a.hash===""?h=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?h=l.l10n.t("{0} (Index)",u):h=l.l10n.t("{0} ({1})",u,ke(a.hash));let g=a.hash===""||a.hash==="~"?i:this.providerService.createProviderUri(i,{repo:c.repo,ref:{type:He.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(g=g.with({query:"~"}));const p=n.parents[0];let w;p===void 0?w=l.l10n.t("{0} ({1})",u,ke(n.hash)):p==="~"&&n.hash===""?w=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?w=l.l10n.t("{0} (Index)",u):w=l.l10n.t("{0} ({1})",u,ke(n.hash));const O=l.l10n.t("{0} \u27F7 {1}",h,w),A=n.hash===""||n.hash==="~"?i:this.providerService.createProviderUri(i,{repo:c.repo,ref:{type:He.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",g,A,O)})]}async resolveDiffCommand(e,n,i,r,a){const s=he(i);let c=e.parents[0],u=this.providerService.createProviderUri(i,{repo:n.repo,ref:{type:He.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},r);try{await this.providerService.stat(u)}catch(g){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,ke(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,ke(c),ke(e.hash)),c===void 0&&(u=u.with({query:"~"}));const h=e.hash===""||e.hash==="~"?i:this.providerService.createProviderUri(i,{repo:n.repo,ref:{type:He.Commit,id:e.hash}},r);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,h,d,a]}}async openOnRemote(e){if(!Dr.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await Vt("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(gs,"VirtualTimelineProvider");class vs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const i=new ct(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await wi(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let r,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":r=decodeURIComponent(d);break;case"location":a=d===xe.CurrentWindow?xe.CurrentWindow:xe.NewWindow;break}}if(!r){i.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}r=r.trim(),a=a!=null?a:xe.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(r,void 0,a);if(!s){i.log({message:`: Unable to open workspace for ${r}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});return}i.log({message:`: Opening ${r} in ${a}`}),ut(this.providerService,s);break}case"/open-files":{let r;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){r=decodeURIComponent(u);break}}if(!r){i.log({message:": Unable to find url parameter"});return}r=r.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(r);if(!a){i.log({message:`: Unable to open files/folders for ${r}`});return}a.filesToOpen?(i.log({message:`: Opening files/folders for ${r}`}),await((n=lo())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):i.log({message:`: No files/folders found to open for ${r}`});break}default:{i.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{i.stop()}}}o(vs,"RemoteUriHandler");var _l=Object.defineProperty,El=Object.getOwnPropertyDescriptor,Dl=o((t,e,n,i)=>{for(var r=i>1?void 0:i?El(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&_l(e,n,r),r},"view_decorateClass"),ha;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(ha||(ha={}));const ps=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof ps}get id(){}toString(){return`${I.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let fa=ps;Dl([Mn((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],fa.prototype,"triggerChange",1);class ms{constructor(e,n,i,r){this.id=e,this.name=n,this.providerService=i,this.telemetryService=r,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(I.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),h=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${h!==void 0?`
parent: ${h.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${h!==void 0?`\\
parent: \`${h.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!W.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(W.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await wi(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,i;await((i=(n=this.root)==null?void 0:n.refresh)==null?void 0:i.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,i=!1){var r;const a=await((r=e.refresh)==null?void 0:r.call(e,n));!i&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(i){I.error(i)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){I.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=W.get("views")[this.configKey]),this._config}}o(ms,"View");class ys extends fa{constructor(e,n,i,r,a,s,c){super(e,n);this._message=i,this._description=r,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:ha.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(ys,"MessageNode");var Al=Object.defineProperty,Rl=Object.getOwnPropertyDescriptor,Io=o((t,e,n,i)=>{for(var r=i>1?void 0:i?Rl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&Al(e,n,r),r},"workspaceRepositoriesView_decorateClass");const ws=o(class extends fa{constructor(t,e,n,i,r,a,s){super(t,e);this.changeStore=n,this.canonical=i,this.workspaceRepository=r,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Oa.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return ws.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${ha.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&W.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const i=z.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index)",he(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",he(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:i}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),r=this.view.providerService.createProviderUri(this.operation.uri,{repo:i,ref:{type:He.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index of {1})",he(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",he(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ss=ws;Ss.key=":changes";const Cs=o(class extends fa{constructor(t,e,n,i,r){super(t,e);this.canonical=n,this.workspaceRepository=i,this.root=r}static getId(t,e){return`${oo.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Cs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Ss(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Ii(this.workspaceRepository),n=Qe.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,i=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return i.id=this.id,i.contextValue=`${ha.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,i.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${bn(this.workspaceRepository.timestamp,{ago:!0})}`,i.iconPath=t?new l.ThemeIcon("check"):this.root?Es(this.canonical.provider.id):In(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),i.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Tl(this.workspaceRepository.ref.type),on(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",bn(this.workspaceRepository.timestamp,{ago:!0}),zi(this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(i.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),i}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Oa=Cs;Oa.key=":wsrepo",Io([Mn()],Oa.prototype,"refresh",1);const bs=o(class extends fa{constructor(t,e,n,i){super(t,e);this.canonical=n,this.workspaceRepositories=i}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return bs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new ys(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Oa(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=ha.WorkspaceRepositories,e.iconPath=Es(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let oo=bs;oo.key=":wsrepos",Io([Mn()],oo.prototype,"refresh",1);class Lo extends fa{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[i,r]of e){const a=l.Uri.parse(i);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:r.some(d=>d.workspaceId===this.view.workspaceId)};r.length===1?n.push(new Oa(this.view,this,u,r[0],!0)):n.push(new oo(this.view,this,u,r))}catch(s){if(s instanceof Un)continue;I.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(Lo,"WorkspaceRepositoriesViewNode"),Io([Mn()],Lo.prototype,"refresh",1);class _s extends ms{constructor(e,n,i){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,i);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(r,a)=>{if(!(r.scheme!=="remotehub-view"||r.authority!=="wsrepo"||!r.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new Lo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),ut(this.providerService,{name:e.name,uri:e.uri,location:xe.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),ut(this.providerService,{name:e.name,uri:e.uri,location:xe.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=F(this.providerService.getVirtualCanonicalRootUri(e.uri)),i=this.providerService.repositories.filter(a=>F(a.canonicalUri)===n);return await Ml(i,l.l10n.t("Choose a repository to apply the changeset to"))}}o(_s,"WorkspaceRepositoriesView");function Tl(t,e){switch(t){case ae.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case ae.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case ae.Tag:return l.l10n.t("Tag");case ae.Commit:return l.l10n.t("Commit")}}o(Tl,"headTypeToString");function Es(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(Es,"providerToIconPath");async function Ml(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(i=>({label:i.name,description:i.provider.name,repository:i})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(Ml,"getRepository");let so;function lo(){return so}o(lo,"getOpenActionsService");var na;(function(t){t.HasCommitted="has:committed",t.Version="version"})(na||(na={}));let co;function Ds(t){return co.globalState.get(t)}o(Ds,"getState");async function ko(t,e){return co.globalState.update(t,e)}o(ko,"updateState");let As=!1;function Pl(){return As}o(Pl,"isPreRelease");async function Il(t){co=t,ee.configure("remoteHub",t),I.configure(t,"Remote Repositories",W.get("logLevel")),ct.start("Time to root directory",{log:!1});const e=jt.configure(t),n=new Ei(t),i=t.extension.packageJSON.version;await ko(na.Version,i),await t.workspaceState.update(na.Version,i);const[,r]=co.extension.packageJSON.version.split(".");As=Number.parseInt(r)%2==1;try{const a=new Qe(n,t.workspaceState);so=new ua(a);const s=new hs(a,so,n),c=new Da(a);return typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(z.scheme,new Lr(a))),t.subscriptions.push(W.onDidChange(u=>{!W.changed(u,"logLevel")||(I.logLevel=W.get("logLevel"))}),a.onDidChangeRepositories(async u=>{for(const d of u.added)try{const h=await d.getMetadata(),{HEAD:g,defaultBranch:p,name:w,provider:O,pullRequest:A}=h,G=g.name.replace(/\//g,"\u2009\u2215\u2009");let te=" ";if(A!==void 0)te=` (PR ${A.id}) `;else if(g.type===ae.Tag)te=` (${G}) `;else if(g.type===ae.Commit)te=` (${G}) `;else if(g.type===ae.Branch||g.type===ae.RemoteBranch){const ue=g.branch.name.replace(/\//g,"\u2009\u2215\u2009");g.branch.name!==p.name&&(te=` (${ue}) `)}const x={uri:d.uri,type:"folder",label:`${w}${te}[${O.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",x)}catch(h){I.error(h,"Failed to add repository to recently opened")}}),new ss(a),new kr(a),new vs(a,n),...Bt(a,t.extension.id,n),...Fl(a,n),...await Ll(a,s,t,n),new gs(a),new _s(a,e,n),s,so,a,n),n.publicLog2("activate"),Promise.resolve(c)}catch(a){throw I.error(a),a}}o(Il,"activate");async function Ll(t,e,n,i){const r=[];if(Rs()){const a=new me(t,i);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),r.push(a)}return r.push(kl(t,e)),r}o(Ll,"registerProviders");function kl(t,e){async function n(){var r;try{let a=(r=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?r:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(I.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(g=>{const p=l.extensions.onDidChange(()=>{var w;a=(w=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?w:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),g())})})),I.log("[ GHPR] Registering..."),Zt(rt.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(g=>d(g));async function d(g){const p=g.added.filter(w=>w.provider.id==="github");if(p.length!==0){I.log("[ GHPR] Checking for opened PRs...");for(const w of p){const O=await t.getBestRemoteUri(w.uri,gi.PullRequest);if(!!O){u.dispose(),I.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",O.toString());return}}I.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),I.log("[ GHPR] Registration complete");const h=t.repositories;return h.length&&d({added:h,removed:[]}),l.Disposable.from(c,u)}catch(a){return I.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const i=n();return l.Disposable.from({dispose:async()=>{var r;return void((r=await i)==null?void 0:r.dispose())}})}o(kl,"registerGitHub");function Fl(t,e){if(!Rs())return[];e.publicLog2("codex.enableRichNav",{});const n=new Wn(t);return[n,n.register(new gt(e)),...gt.createStatus()]}o(Fl,"registerNavigationServiceProviders");function Rs(){return l.env.uiKind===l.UIKind.Desktop||W.get("richNavigation.enabled")===!0}o(Rs,"isRichNavEnabled");const Fo=new Map,xo=new Map;async function wi(t,e){var n,i,r;if(e!==void 0&&typeof e!="string"&&(e=Qe.getProviderId(e)),e&&xo.has(e)){const a=xo.get(e);if(!a)return;await Fo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!["github.remotehub","ms-vscode.azure-repos"].includes(s.toLowerCase()))continue;const u=Fo.get(s),d=(i=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?i:[],h=d.find(p=>p===e)!==void 0,g=d.length&&e===void 0;if(!u&&(g||h)){const p=(r=l.extensions.getExtension(s))==null?void 0:r.activate().then(w=>w.registerVirtualProviderService(t));if(p===void 0)return;Fo.set(s,p);for(const w of d)xo.set(w,s);if(await p,e!==void 0&&h)return}else u&&await u}}o(wi,"ensureProvidersRegistered")})(),module.exports=fo})();
